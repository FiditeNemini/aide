function u(t){document.readyState==="loading"||document.readyState==="uninitialized"?document.addEventListener("DOMContentLoaded",t):t()}var c=acquireVsCodeApi();function p(){let t=document.getElementById("simple-browser-settings");if(t){let e=t.getAttribute("data-settings");if(e)return JSON.parse(e)}throw new Error("Could not load settings")}var s=p(),d=document.querySelector("iframe#browser"),m="root",L=document.getElementById(m);if(!L)throw new Error(`Root node with id '${m} not found.`);var n=document.querySelector(".header"),r=n.querySelector(".url-input"),f=n.querySelector(".forward-button"),y=n.querySelector(".back-button"),v=n.querySelector(".reload-button"),E=n.querySelector(".clear-overlays-button"),w=n.querySelector(".open-external-button");window.addEventListener("message",t=>{switch(t.data.type){case"focus":{d.focus();break}case"didChangeFocusLockIndicatorEnabled":{g(t.data.enabled);break}}});function l(t){let e=new URL(t),o=t.port,a=s.sessions[o];return a&&(e.port=a.toString()),e.searchParams.has("vscodeBrowserReqId")&&e.searchParams.delete("vscodeBrowserReqId"),e.href}u(()=>{setInterval(()=>{let e=document.activeElement?.tagName==="IFRAME";document.body.classList.toggle("iframe-focused",e)},50),d.addEventListener("load",()=>{window.addEventListener("message",e=>{if(e.isTrusted&&e.data.type==="location-change"){let o=new URL(e.data.location);r.value=l(o)}})}),r.addEventListener("change",e=>{let o=e.target.value;t(o)}),f.addEventListener("click",()=>{history.forward()}),y.addEventListener("click",()=>{history.back()}),E.addEventListener("click",()=>{c.postMessage({type:"clearOverlays"})}),w.addEventListener("click",()=>{c.postMessage({type:"openExternal",url:r.value})}),v.addEventListener("click",()=>{t(r.value)}),t(s.url,!0),r.value=l(new URL(s.url)),g(s.focusLockIndicatorEnabled);function t(e,o=!1){try{let i=new URL(e);i.searchParams.append("vscodeBrowserReqId",Date.now().toString()),d.src=i.toString()}catch{d.src=e}let a={url:e,originalUrl:s.originalUrl};o||c.postMessage({type:"updateUrl",data:a}),c.setState(a)}});function g(t){document.body.classList.toggle("enable-focus-lock-indicator",t)}
