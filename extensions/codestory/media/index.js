function u(t){document.readyState==="loading"||document.readyState==="uninitialized"?document.addEventListener("DOMContentLoaded",t):t()}var d=acquireVsCodeApi();function p(){let t=document.getElementById("simple-browser-settings");if(t){let e=t.getAttribute("data-settings");if(e)return JSON.parse(e)}throw new Error("Could not load settings")}var r=p(),c=document.querySelector("iframe#browser"),m="root",f=document.getElementById(m);if(!f)throw new Error(`Root node with id '${m} not found.`);var s=document.querySelector(".header"),a=s.querySelector(".url-input"),L=s.querySelector(".forward-button"),w=s.querySelector(".back-button"),y=s.querySelector(".reload-button"),E=s.querySelector(".open-external-button");window.addEventListener("message",t=>{switch(t.data.type){case"focus":{c.focus();break}case"didChangeFocusLockIndicatorEnabled":{g(t.data.enabled);break}}});function l(t){let e=new URL(t),o=t.port,n=r.sessions[o];return n&&(e.port=n.toString()),e.searchParams.has("vscodeBrowserReqId")&&e.searchParams.delete("vscodeBrowserReqId"),e.href}u(()=>{setInterval(()=>{let e=document.activeElement?.tagName==="IFRAME";document.body.classList.toggle("iframe-focused",e)},50),c.addEventListener("load",()=>{window.addEventListener("message",e=>{if(e.isTrusted&&e.data.type==="location-change"){let o=new URL(e.data.location);a.value=l(o)}})}),a.addEventListener("change",e=>{let o=e.target.value;t(o)}),L.addEventListener("click",()=>{history.forward()}),w.addEventListener("click",()=>{history.back()}),E.addEventListener("click",()=>{d.postMessage({type:"openExternal",url:a.value})}),y.addEventListener("click",()=>{t(a.value)}),t(r.url,!0),a.value=l(new URL(r.url)),g(r.focusLockIndicatorEnabled);function t(e,o=!1){try{let i=new URL(e);i.searchParams.append("vscodeBrowserReqId",Date.now().toString()),c.src=i.toString()}catch{c.src=e}let n={url:e,originalUrl:r.originalUrl};o||d.postMessage({type:"updateUrl",data:n}),d.setState(n)}});function g(t){document.body.classList.toggle("enable-focus-lock-indicator",t)}
