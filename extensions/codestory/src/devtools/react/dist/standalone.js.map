{"version":3,"file":"standalone.js","mappings":"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","sources":["webpack://cs-react-devtools-core/../../node_modules/clipboard-js/clipboard.js","webpack://cs-react-devtools-core/../../node_modules/jsc-safe-url/index.js","webpack://cs-react-devtools-core/../../node_modules/lru-cache/index.js","webpack://cs-react-devtools-core/../../node_modules/process/browser.js","webpack://cs-react-devtools-core/../../node_modules/pseudomap/map.js","webpack://cs-react-devtools-core/../../node_modules/pseudomap/pseudomap.js","webpack://cs-react-devtools-core/../../node_modules/uuid/index.js","webpack://cs-react-devtools-core/../../node_modules/uuid/lib/bytesToUuid.js","webpack://cs-react-devtools-core/../../node_modules/uuid/lib/rng.js","webpack://cs-react-devtools-core/../../node_modules/uuid/v1.js","webpack://cs-react-devtools-core/../../node_modules/uuid/v4.js","webpack://cs-react-devtools-core/../../node_modules/ws/index.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/buffer-util.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/constants.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/event-target.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/extension.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/limiter.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/permessage-deflate.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/receiver.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/sender.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/stream.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/validation.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/websocket-server.js","webpack://cs-react-devtools-core/../../node_modules/ws/lib/websocket.js","webpack://cs-react-devtools-core/../../node_modules/yallist/yallist.js","webpack://cs-react-devtools-core/external commonjs \"bufferutil\"","webpack://cs-react-devtools-core/external commonjs \"utf-8-validate\"","webpack://cs-react-devtools-core/external node-commonjs \"crypto\"","webpack://cs-react-devtools-core/external node-commonjs \"events\"","webpack://cs-react-devtools-core/external node-commonjs \"http\"","webpack://cs-react-devtools-core/external node-commonjs \"https\"","webpack://cs-react-devtools-core/external node-commonjs \"net\"","webpack://cs-react-devtools-core/external node-commonjs \"stream\"","webpack://cs-react-devtools-core/external node-commonjs \"tls\"","webpack://cs-react-devtools-core/external node-commonjs \"url\"","webpack://cs-react-devtools-core/external node-commonjs \"util\"","webpack://cs-react-devtools-core/external node-commonjs \"zlib\"","webpack://cs-react-devtools-core/webpack/bootstrap","webpack://cs-react-devtools-core/webpack/runtime/compat get default export","webpack://cs-react-devtools-core/webpack/runtime/define property getters","webpack://cs-react-devtools-core/webpack/runtime/hasOwnProperty shorthand","webpack://cs-react-devtools-core/webpack/runtime/make namespace object","webpack://cs-react-devtools-core/../react-devtools-shared/src/events.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/bridge.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/constants.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/frontend/types.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/storage.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/utils.js","webpack://cs-react-devtools-core/../shared/ReactSymbols.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/hydration.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/isArray.js","webpack://cs-react-devtools-core/../shared/isArray.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/views/Profiler/utils.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/views/Profiler/CommitTreeBuilder.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/views/Profiler/FlamegraphChartBuilder.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/views/Profiler/RankedChartBuilder.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/ProfilingCache.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/Logger.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/ProfilerStore.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/UnsupportedBridgeOperationError.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/devtools/store.js","webpack://cs-react-devtools-core/external node-commonjs \"path\"","webpack://cs-react-devtools-core/external node-commonjs \"fs\"","webpack://cs-react-devtools-core/./src/utils.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/PerformanceLoggingUtils.js","webpack://cs-react-devtools-core/../src/sourcemap-codec.ts","webpack://cs-react-devtools-core/../react-devtools-shared/src/hooks/SourceMapConsumer.js","webpack://cs-react-devtools-core/../react-devtools-shared/src/symbolicateSource.js","webpack://cs-react-devtools-core/./src/standalone.js"],"sourcesContent":["//  Import support https://stackoverflow.com/questions/13673346/supporting-both-commonjs-and-amd\n(function(name, definition) {\n    if (typeof module !== \"undefined\") { module.exports = definition(); }\n    else if (typeof define === \"function\" && typeof define.amd === \"object\") { define(definition); }\n    else { this[name] = definition(); }\n}(\"clipboard\", function() {\n  if (typeof document === 'undefined' || !document.addEventListener) {\n    return null;\n  }\n\n  var clipboard = {};\n\n  clipboard.copy = (function() {\n    var _intercept = false;\n    var _data = null; // Map from data type (e.g. \"text/html\") to value.\n    var _bogusSelection = false;\n\n    function cleanup() {\n      _intercept = false;\n      _data = null;\n      if (_bogusSelection) {\n        window.getSelection().removeAllRanges();\n      }\n      _bogusSelection = false;\n    }\n\n    document.addEventListener(\"copy\", function(e) {\n      if (_intercept) {\n        for (var key in _data) {\n          e.clipboardData.setData(key, _data[key]);\n        }\n        e.preventDefault();\n      }\n    });\n\n    // Workaround for Safari: https://bugs.webkit.org/show_bug.cgi?id=156529\n    function bogusSelect() {\n      var sel = document.getSelection();\n      // If \"nothing\" is selected...\n      if (!document.queryCommandEnabled(\"copy\") && sel.isCollapsed) {\n        // ... temporarily select the entire body.\n        //\n        // We select the entire body because:\n        // - it's guaranteed to exist,\n        // - it works (unlike, say, document.head, or phantom element that is\n        //   not inserted into the DOM),\n        // - it doesn't seem to flicker (due to the synchronous copy event), and\n        // - it avoids modifying the DOM (can trigger mutation observers).\n        //\n        // Because we can't do proper feature detection (we already checked\n        // document.queryCommandEnabled(\"copy\") , which actually gives a false\n        // negative for Blink when nothing is selected) and UA sniffing is not\n        // reliable (a lot of UA strings contain \"Safari\"), this will also\n        // happen for some browsers other than Safari. :-()\n        var range = document.createRange();\n        range.selectNodeContents(document.body);\n        sel.removeAllRanges();\n        sel.addRange(range);\n        _bogusSelection = true;\n      }\n    };\n\n    return function(data) {\n      return new Promise(function(resolve, reject) {\n        _intercept = true;\n        if (typeof data === \"string\") {\n          _data = {\"text/plain\": data};\n        } else if (data instanceof Node) {\n          _data = {\"text/html\": new XMLSerializer().serializeToString(data)};\n        } else if (data instanceof Object){\n          _data = data;\n        } else {\n          reject(\"Invalid data type. Must be string, DOM node, or an object mapping MIME types to strings.\")\n        }\n\n        function triggerCopy(tryBogusSelect) {\n          try {\n            if (document.execCommand(\"copy\")) {\n              // document.execCommand is synchronous: http://www.w3.org/TR/2015/WD-clipboard-apis-20150421/#integration-with-rich-text-editing-apis\n              // So we can call resolve() back here.\n              cleanup();\n              resolve();\n            }\n            else {\n              if (!tryBogusSelect) {\n                bogusSelect();\n                triggerCopy(true);\n              } else {\n                cleanup();\n                throw new Error(\"Unable to copy. Perhaps it's not available in your browser?\");\n              }\n            }\n          } catch (e) {\n            cleanup();\n            reject(e);\n          }\n        }\n        triggerCopy(false);\n\n      });\n    };\n  })();\n\n  clipboard.paste = (function() {\n    var _intercept = false;\n    var _resolve;\n    var _dataType;\n\n    document.addEventListener(\"paste\", function(e) {\n      if (_intercept) {\n        _intercept = false;\n        e.preventDefault();\n        var resolve = _resolve;\n        _resolve = null;\n        resolve(e.clipboardData.getData(_dataType));\n      }\n    });\n\n    return function(dataType) {\n      return new Promise(function(resolve, reject) {\n        _intercept = true;\n        _resolve = resolve;\n        _dataType = dataType || \"text/plain\";\n        try {\n          if (!document.execCommand(\"paste\")) {\n            _intercept = false;\n            reject(new Error(\"Unable to paste. Pasting only works in Internet Explorer at the moment.\"));\n          }\n        } catch (e) {\n          _intercept = false;\n          reject(new Error(e));\n        }\n      });\n    };\n  })();\n\n  // Handle IE behaviour.\n  if (typeof ClipboardEvent === \"undefined\" &&\n      typeof window.clipboardData !== \"undefined\" &&\n      typeof window.clipboardData.setData !== \"undefined\") {\n\n    /*! promise-polyfill 2.0.1 */\n    (function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof a)throw new TypeError(\"not a function\");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void j(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError(\"A promise cannot be resolved with itself.\");if(a&&(\"object\"==typeof a||\"function\"==typeof a)){var c=a.then;if(\"function\"==typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled=\"function\"==typeof a?a:null,this.onRejected=\"function\"==typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=c.immediateFn||\"function\"==typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)},k=Array.isArray||function(a){return\"[object Array]\"===Object.prototype.toString.call(a)};c.prototype[\"catch\"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&k(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&(\"object\"==typeof g||\"function\"==typeof g)){var h=g.then;if(\"function\"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&\"object\"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},\"undefined\"!=typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)})(this);\n\n    clipboard.copy = function(data) {\n      return new Promise(function(resolve, reject) {\n        // IE supports string and URL types: https://msdn.microsoft.com/en-us/library/ms536744(v=vs.85).aspx\n        // We only support the string type for now.\n        if (typeof data !== \"string\" && !(\"text/plain\" in data)) {\n          throw new Error(\"You must provide a text/plain type.\");\n        }\n\n        var strData = (typeof data === \"string\" ? data : data[\"text/plain\"]);\n        var copySucceeded = window.clipboardData.setData(\"Text\", strData);\n        if (copySucceeded) {\n          resolve();\n        } else {\n          reject(new Error(\"Copying was rejected.\"));\n        }\n      });\n    };\n\n    clipboard.paste = function() {\n      return new Promise(function(resolve, reject) {\n        var strData = window.clipboardData.getData(\"Text\");\n        if (strData) {\n          resolve(strData);\n        } else {\n          // The user rejected the paste request.\n          reject(new Error(\"Pasting was rejected.\"));\n        }\n      });\n    };\n  }\n\n  return clipboard;\n}));\n","/**\n * These functions are for handling of query-string free URLs, necessitated\n * by query string stripping of URLs in JavaScriptCore stack traces\n * introduced in iOS 16.4.\n *\n * See https://github.com/facebook/react-native/issues/36794 for context.\n *\n * @flow strict\n */\n\n// We use regex-based URL parsing as defined in RFC3986 because it's easier to\n// determine whether the input is a complete URI, a path-absolute or a\n// path-rootless (as defined in the spec), and be as faithful to the input as\n// possible. This will match any string, and does not imply validity.\n//\n// https://www.rfc-editor.org/rfc/rfc3986#appendix-B\nconst URI_REGEX = /^(([^:/?#]+):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n\nfunction _rfc3986Parse(url /*:string */) {\n  const match = url.match(URI_REGEX);\n  if (match == null) {\n    throw new Error(\"Unexpected error - failed to regex-match URL\");\n  }\n  return {\n    schemeAndAuthority: (match[1] || \"\") + (match[3] || \"\"),\n    path: match[5] || \"\",\n    hasQueryPart: match[6] != null,\n    queryWithoutQuestionMark: match[7] || \"\",\n    fragmentWithHash: match[8] || \"\",\n  };\n}\n\nfunction isJscSafeUrl(url /*:string */) /*:boolean*/ {\n  const parsedUrl = _rfc3986Parse(url);\n  return !parsedUrl.hasQueryPart;\n}\n\n/**\n * @param {string} urlToNormalize\n * @returns string\n */\nfunction toNormalUrl(urlToNormalize /*:string */) /*:string */ {\n  const parsedUrl = _rfc3986Parse(urlToNormalize);\n  if (parsedUrl.path.indexOf(\"//&\") === -1) {\n    return urlToNormalize;\n  }\n  return (\n    parsedUrl.schemeAndAuthority +\n    parsedUrl.path.replace(\"//&\", \"?\") +\n    // We don't expect JSC urls to also have query strings, but interpret\n    // liberally and append them.\n    (parsedUrl.queryWithoutQuestionMark.length > 0\n      ? \"&\" + parsedUrl.queryWithoutQuestionMark\n      : \"\") +\n    // Likewise, JSC URLs will usually have their fragments stripped, but\n    // preserve if we find one.\n    parsedUrl.fragmentWithHash\n  );\n}\n\n/**\n * @param {string} urlToConvert\n * @returns string\n */\nfunction toJscSafeUrl(urlToConvert /*:string */) /*:string */ {\n  if (!_rfc3986Parse(urlToConvert).hasQueryPart) {\n    return urlToConvert;\n  }\n  const parsedUrl = _rfc3986Parse(toNormalUrl(urlToConvert));\n  if (\n    parsedUrl.queryWithoutQuestionMark.length > 0 &&\n    (parsedUrl.path === \"\" || parsedUrl.path === \"/\")\n  ) {\n    throw new Error(\n      `The given URL \"${urlToConvert}\" has an empty path and cannot be converted to a JSC-safe format.`\n    );\n  }\n  return (\n    parsedUrl.schemeAndAuthority +\n    parsedUrl.path +\n    (parsedUrl.queryWithoutQuestionMark.length > 0\n      ? \"//&\" +\n        // Query strings may contain '?' (e.g. in key or value names) - these\n        // must be percent-encoded to form a valid path, and not be stripped.\n        parsedUrl.queryWithoutQuestionMark.replace(/\\?/g, \"%3F\")\n      : \"\") +\n    // We expect JSC to strip this - we don't handle fragments for now.\n    parsedUrl.fragmentWithHash\n  );\n}\n\nmodule.exports = {\n  isJscSafeUrl,\n  toNormalUrl,\n  toJscSafeUrl,\n};\n","'use strict'\n\nmodule.exports = LRUCache\n\n// This will be a proper iterable 'Map' in engines that support it,\n// or a fakey-fake PseudoMap in older versions.\nvar Map = require('pseudomap')\nvar util = require('util')\n\n// A linked list to keep track of recently-used-ness\nvar Yallist = require('yallist')\n\n// use symbols if possible, otherwise just _props\nvar hasSymbol = typeof Symbol === 'function' && process.env._nodeLRUCacheForceNoSymbol !== '1'\nvar makeSymbol\nif (hasSymbol) {\n  makeSymbol = function (key) {\n    return Symbol(key)\n  }\n} else {\n  makeSymbol = function (key) {\n    return '_' + key\n  }\n}\n\nvar MAX = makeSymbol('max')\nvar LENGTH = makeSymbol('length')\nvar LENGTH_CALCULATOR = makeSymbol('lengthCalculator')\nvar ALLOW_STALE = makeSymbol('allowStale')\nvar MAX_AGE = makeSymbol('maxAge')\nvar DISPOSE = makeSymbol('dispose')\nvar NO_DISPOSE_ON_SET = makeSymbol('noDisposeOnSet')\nvar LRU_LIST = makeSymbol('lruList')\nvar CACHE = makeSymbol('cache')\n\nfunction naiveLength () { return 1 }\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nfunction LRUCache (options) {\n  if (!(this instanceof LRUCache)) {\n    return new LRUCache(options)\n  }\n\n  if (typeof options === 'number') {\n    options = { max: options }\n  }\n\n  if (!options) {\n    options = {}\n  }\n\n  var max = this[MAX] = options.max\n  // Kind of weird to have a default max of Infinity, but oh well.\n  if (!max ||\n      !(typeof max === 'number') ||\n      max <= 0) {\n    this[MAX] = Infinity\n  }\n\n  var lc = options.length || naiveLength\n  if (typeof lc !== 'function') {\n    lc = naiveLength\n  }\n  this[LENGTH_CALCULATOR] = lc\n\n  this[ALLOW_STALE] = options.stale || false\n  this[MAX_AGE] = options.maxAge || 0\n  this[DISPOSE] = options.dispose\n  this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n  this.reset()\n}\n\n// resize the cache when the max changes.\nObject.defineProperty(LRUCache.prototype, 'max', {\n  set: function (mL) {\n    if (!mL || !(typeof mL === 'number') || mL <= 0) {\n      mL = Infinity\n    }\n    this[MAX] = mL\n    trim(this)\n  },\n  get: function () {\n    return this[MAX]\n  },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'allowStale', {\n  set: function (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  },\n  get: function () {\n    return this[ALLOW_STALE]\n  },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'maxAge', {\n  set: function (mA) {\n    if (!mA || !(typeof mA === 'number') || mA < 0) {\n      mA = 0\n    }\n    this[MAX_AGE] = mA\n    trim(this)\n  },\n  get: function () {\n    return this[MAX_AGE]\n  },\n  enumerable: true\n})\n\n// resize the cache when the lengthCalculator changes.\nObject.defineProperty(LRUCache.prototype, 'lengthCalculator', {\n  set: function (lC) {\n    if (typeof lC !== 'function') {\n      lC = naiveLength\n    }\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(function (hit) {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      }, this)\n    }\n    trim(this)\n  },\n  get: function () { return this[LENGTH_CALCULATOR] },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'length', {\n  get: function () { return this[LENGTH] },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'itemCount', {\n  get: function () { return this[LRU_LIST].length },\n  enumerable: true\n})\n\nLRUCache.prototype.rforEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this[LRU_LIST].tail; walker !== null;) {\n    var prev = walker.prev\n    forEachStep(this, fn, walker, thisp)\n    walker = prev\n  }\n}\n\nfunction forEachStep (self, fn, node, thisp) {\n  var hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE]) {\n      hit = undefined\n    }\n  }\n  if (hit) {\n    fn.call(thisp, hit.value, hit.key, self)\n  }\n}\n\nLRUCache.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this[LRU_LIST].head; walker !== null;) {\n    var next = walker.next\n    forEachStep(this, fn, walker, thisp)\n    walker = next\n  }\n}\n\nLRUCache.prototype.keys = function () {\n  return this[LRU_LIST].toArray().map(function (k) {\n    return k.key\n  }, this)\n}\n\nLRUCache.prototype.values = function () {\n  return this[LRU_LIST].toArray().map(function (k) {\n    return k.value\n  }, this)\n}\n\nLRUCache.prototype.reset = function () {\n  if (this[DISPOSE] &&\n      this[LRU_LIST] &&\n      this[LRU_LIST].length) {\n    this[LRU_LIST].forEach(function (hit) {\n      this[DISPOSE](hit.key, hit.value)\n    }, this)\n  }\n\n  this[CACHE] = new Map() // hash of items by key\n  this[LRU_LIST] = new Yallist() // list of items in order of use recency\n  this[LENGTH] = 0 // length of items in the list\n}\n\nLRUCache.prototype.dump = function () {\n  return this[LRU_LIST].map(function (hit) {\n    if (!isStale(this, hit)) {\n      return {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }\n    }\n  }, this).toArray().filter(function (h) {\n    return h\n  })\n}\n\nLRUCache.prototype.dumpLru = function () {\n  return this[LRU_LIST]\n}\n\n/* istanbul ignore next */\nLRUCache.prototype.inspect = function (n, opts) {\n  var str = 'LRUCache {'\n  var extras = false\n\n  var as = this[ALLOW_STALE]\n  if (as) {\n    str += '\\n  allowStale: true'\n    extras = true\n  }\n\n  var max = this[MAX]\n  if (max && max !== Infinity) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  max: ' + util.inspect(max, opts)\n    extras = true\n  }\n\n  var maxAge = this[MAX_AGE]\n  if (maxAge) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  maxAge: ' + util.inspect(maxAge, opts)\n    extras = true\n  }\n\n  var lc = this[LENGTH_CALCULATOR]\n  if (lc && lc !== naiveLength) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  length: ' + util.inspect(this[LENGTH], opts)\n    extras = true\n  }\n\n  var didFirst = false\n  this[LRU_LIST].forEach(function (item) {\n    if (didFirst) {\n      str += ',\\n  '\n    } else {\n      if (extras) {\n        str += ',\\n'\n      }\n      didFirst = true\n      str += '\\n  '\n    }\n    var key = util.inspect(item.key).split('\\n').join('\\n  ')\n    var val = { value: item.value }\n    if (item.maxAge !== maxAge) {\n      val.maxAge = item.maxAge\n    }\n    if (lc !== naiveLength) {\n      val.length = item.length\n    }\n    if (isStale(this, item)) {\n      val.stale = true\n    }\n\n    val = util.inspect(val, opts).split('\\n').join('\\n  ')\n    str += key + ' => ' + val\n  })\n\n  if (didFirst || extras) {\n    str += '\\n'\n  }\n  str += '}'\n\n  return str\n}\n\nLRUCache.prototype.set = function (key, value, maxAge) {\n  maxAge = maxAge || this[MAX_AGE]\n\n  var now = maxAge ? Date.now() : 0\n  var len = this[LENGTH_CALCULATOR](value, key)\n\n  if (this[CACHE].has(key)) {\n    if (len > this[MAX]) {\n      del(this, this[CACHE].get(key))\n      return false\n    }\n\n    var node = this[CACHE].get(key)\n    var item = node.value\n\n    // dispose of the old one before overwriting\n    // split out into 2 ifs for better coverage tracking\n    if (this[DISPOSE]) {\n      if (!this[NO_DISPOSE_ON_SET]) {\n        this[DISPOSE](key, item.value)\n      }\n    }\n\n    item.now = now\n    item.maxAge = maxAge\n    item.value = value\n    this[LENGTH] += len - item.length\n    item.length = len\n    this.get(key)\n    trim(this)\n    return true\n  }\n\n  var hit = new Entry(key, value, len, now, maxAge)\n\n  // oversized objects fall out of cache automatically.\n  if (hit.length > this[MAX]) {\n    if (this[DISPOSE]) {\n      this[DISPOSE](key, value)\n    }\n    return false\n  }\n\n  this[LENGTH] += hit.length\n  this[LRU_LIST].unshift(hit)\n  this[CACHE].set(key, this[LRU_LIST].head)\n  trim(this)\n  return true\n}\n\nLRUCache.prototype.has = function (key) {\n  if (!this[CACHE].has(key)) return false\n  var hit = this[CACHE].get(key).value\n  if (isStale(this, hit)) {\n    return false\n  }\n  return true\n}\n\nLRUCache.prototype.get = function (key) {\n  return get(this, key, true)\n}\n\nLRUCache.prototype.peek = function (key) {\n  return get(this, key, false)\n}\n\nLRUCache.prototype.pop = function () {\n  var node = this[LRU_LIST].tail\n  if (!node) return null\n  del(this, node)\n  return node.value\n}\n\nLRUCache.prototype.del = function (key) {\n  del(this, this[CACHE].get(key))\n}\n\nLRUCache.prototype.load = function (arr) {\n  // reset the cache\n  this.reset()\n\n  var now = Date.now()\n  // A previous serialized cache has the most recent items first\n  for (var l = arr.length - 1; l >= 0; l--) {\n    var hit = arr[l]\n    var expiresAt = hit.e || 0\n    if (expiresAt === 0) {\n      // the item was created without expiration in a non aged cache\n      this.set(hit.k, hit.v)\n    } else {\n      var maxAge = expiresAt - now\n      // dont add already expired items\n      if (maxAge > 0) {\n        this.set(hit.k, hit.v, maxAge)\n      }\n    }\n  }\n}\n\nLRUCache.prototype.prune = function () {\n  var self = this\n  this[CACHE].forEach(function (value, key) {\n    get(self, key, false)\n  })\n}\n\nfunction get (self, key, doUse) {\n  var node = self[CACHE].get(key)\n  if (node) {\n    var hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE]) hit = undefined\n    } else {\n      if (doUse) {\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    if (hit) hit = hit.value\n  }\n  return hit\n}\n\nfunction isStale (self, hit) {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE])) {\n    return false\n  }\n  var stale = false\n  var diff = Date.now() - hit.now\n  if (hit.maxAge) {\n    stale = diff > hit.maxAge\n  } else {\n    stale = self[MAX_AGE] && (diff > self[MAX_AGE])\n  }\n  return stale\n}\n\nfunction trim (self) {\n  if (self[LENGTH] > self[MAX]) {\n    for (var walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      var prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nfunction del (self, node) {\n  if (node) {\n    var hit = node.value\n    if (self[DISPOSE]) {\n      self[DISPOSE](hit.key, hit.value)\n    }\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\n// classy, since V8 prefers predictable objects.\nfunction Entry (key, value, length, now, maxAge) {\n  this.key = key\n  this.value = value\n  this.length = length\n  this.now = now\n  this.maxAge = maxAge || 0\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","if (process.env.npm_package_name === 'pseudomap' &&\n    process.env.npm_lifecycle_script === 'test')\n  process.env.TEST_PSEUDOMAP = 'true'\n\nif (typeof Map === 'function' && !process.env.TEST_PSEUDOMAP) {\n  module.exports = Map\n} else {\n  module.exports = require('./pseudomap')\n}\n","var hasOwnProperty = Object.prototype.hasOwnProperty\n\nmodule.exports = PseudoMap\n\nfunction PseudoMap (set) {\n  if (!(this instanceof PseudoMap)) // whyyyyyyy\n    throw new TypeError(\"Constructor PseudoMap requires 'new'\")\n\n  this.clear()\n\n  if (set) {\n    if ((set instanceof PseudoMap) ||\n        (typeof Map === 'function' && set instanceof Map))\n      set.forEach(function (value, key) {\n        this.set(key, value)\n      }, this)\n    else if (Array.isArray(set))\n      set.forEach(function (kv) {\n        this.set(kv[0], kv[1])\n      }, this)\n    else\n      throw new TypeError('invalid argument')\n  }\n}\n\nPseudoMap.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  Object.keys(this._data).forEach(function (k) {\n    if (k !== 'size')\n      fn.call(thisp, this._data[k].value, this._data[k].key)\n  }, this)\n}\n\nPseudoMap.prototype.has = function (k) {\n  return !!find(this._data, k)\n}\n\nPseudoMap.prototype.get = function (k) {\n  var res = find(this._data, k)\n  return res && res.value\n}\n\nPseudoMap.prototype.set = function (k, v) {\n  set(this._data, k, v)\n}\n\nPseudoMap.prototype.delete = function (k) {\n  var res = find(this._data, k)\n  if (res) {\n    delete this._data[res._index]\n    this._data.size--\n  }\n}\n\nPseudoMap.prototype.clear = function () {\n  var data = Object.create(null)\n  data.size = 0\n\n  Object.defineProperty(this, '_data', {\n    value: data,\n    enumerable: false,\n    configurable: true,\n    writable: false\n  })\n}\n\nObject.defineProperty(PseudoMap.prototype, 'size', {\n  get: function () {\n    return this._data.size\n  },\n  set: function (n) {},\n  enumerable: true,\n  configurable: true\n})\n\nPseudoMap.prototype.values =\nPseudoMap.prototype.keys =\nPseudoMap.prototype.entries = function () {\n  throw new Error('iterators are not implemented in this version')\n}\n\n// Either identical, or both NaN\nfunction same (a, b) {\n  return a === b || a !== a && b !== b\n}\n\nfunction Entry (k, v, i) {\n  this.key = k\n  this.value = v\n  this._index = i\n}\n\nfunction find (data, k) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k))\n      return data[key]\n  }\n}\n\nfunction set (data, k, v) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k)) {\n      data[key].value = v\n      return\n    }\n  }\n  data.size++\n  data[key] = new Entry(k, v, key)\n}\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In node.js\n// this is pretty straight-forward - we use the crypto API.\n\nvar crypto = require('crypto');\n\nmodule.exports = function nodeRNG() {\n  return crypto.randomBytes(16);\n};\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) return target.slice(0, offset);\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (let i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = Buffer.from(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\ntry {\n  const bufferUtil = require('bufferutil');\n  const bu = bufferUtil.BufferUtil || bufferUtil;\n\n  module.exports = {\n    concat,\n    mask(source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bu.mask(source, mask, output, offset, length);\n    },\n    toArrayBuffer,\n    toBuffer,\n    unmask(buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bu.unmask(buffer, mask);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    concat,\n    mask: _mask,\n    toArrayBuffer,\n    toBuffer,\n    unmask: _unmask\n  };\n}\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  EMPTY_BUFFER: Buffer.alloc(0),\n  NOOP: () => {}\n};\n","'use strict';\n\n/**\n * Class representing an event.\n *\n * @private\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(type, target) {\n    this.target = target;\n    this.type = type;\n  }\n}\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n * @private\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The received data\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(data, target) {\n    super('message', target);\n\n    this.data = data;\n  }\n}\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n * @private\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {Number} code The status code explaining why the connection is being\n   *     closed\n   * @param {String} reason A human-readable string explaining why the\n   *     connection is closing\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(code, reason, target) {\n    super('close', target);\n\n    this.wasClean = target._closeFrameReceived && target._closeFrameSent;\n    this.reason = reason;\n    this.code = code;\n  }\n}\n\n/**\n * Class representing an open event.\n *\n * @extends Event\n * @private\n */\nclass OpenEvent extends Event {\n  /**\n   * Create a new `OpenEvent`.\n   *\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(target) {\n    super('open', target);\n  }\n}\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n * @private\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {Object} error The error that generated this event\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(error, target) {\n    super('error', target);\n\n    this.message = error.message;\n    this.error = error;\n  }\n}\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean`` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, listener, options) {\n    if (typeof listener !== 'function') return;\n\n    function onMessage(data) {\n      listener.call(this, new MessageEvent(data, this));\n    }\n\n    function onClose(code, message) {\n      listener.call(this, new CloseEvent(code, message, this));\n    }\n\n    function onError(error) {\n      listener.call(this, new ErrorEvent(error, this));\n    }\n\n    function onOpen() {\n      listener.call(this, new OpenEvent(this));\n    }\n\n    const method = options && options.once ? 'once' : 'on';\n\n    if (type === 'message') {\n      onMessage._listener = listener;\n      this[method](type, onMessage);\n    } else if (type === 'close') {\n      onClose._listener = listener;\n      this[method](type, onClose);\n    } else if (type === 'error') {\n      onError._listener = listener;\n      this[method](type, onError);\n    } else if (type === 'open') {\n      onOpen._listener = listener;\n      this[method](type, onOpen);\n    } else {\n      this[method](type, listener);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {Function} listener The listener to remove\n   * @public\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners(type);\n\n    for (let i = 0; i < listeners.length; i++) {\n      if (listeners[i] === listener || listeners[i]._listener === listener) {\n        this.removeListener(type, listeners[i]);\n      }\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n\n  if (header === undefined || header === '') return offers;\n\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 /* ' ' */ || code === 0x09 /* '\\t' */) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode, NOOP } = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      //\n      // An `'error'` event is emitted, only on Node.js < 10.0.0, if the\n      // `zlib.DeflateRaw` instance is closed while data is being processed.\n      // This can happen if `PerMessageDeflate#cleanup()` is called at the wrong\n      // time due to an abnormal WebSocket closure.\n      //\n      this._deflate.on('error', NOOP);\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {String} [binaryType=nodebuffer] The type for binary data\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Boolean} [isServer=false] Specifies whether to operate in client or\n   *     server mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(binaryType, extensions, isServer, maxPayload) {\n    super();\n\n    this._binaryType = binaryType || BINARY_TYPES[0];\n    this[kWebSocket] = undefined;\n    this._extensions = extensions || {};\n    this._isServer = !!isServer;\n    this._maxPayload = maxPayload | 0;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n      if (this._masked) unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its lenght is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(\n              RangeError,\n              'Max payload size exceeded',\n              false,\n              1009,\n              'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n            )\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!isValidUTF8(buf)) {\n          this._loop = false;\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('message', buf.toString());\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, '');\n        this.end();\n      } else if (data.length === 1) {\n        return error(\n          RangeError,\n          'invalid payload length 1',\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n        }\n\n        const buf = data.slice(2);\n\n        if (!isValidUTF8(buf)) {\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('conclude', code, buf.toString());\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @param {String} errorCode The exposed error code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode, errorCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err.code = errorCode;\n  err[kStatusCode] = statusCode;\n  return err;\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls$\" }] */\n\n'use strict';\n\nconst net = require('net');\nconst tls = require('tls');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst mask = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   */\n  constructor(socket, extensions) {\n    this._extensions = extensions || {};\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {Buffer} data The data to frame\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {Buffer[]} The framed data as a list of `Buffer` instances\n   * @public\n   */\n  static frame(data, options) {\n    const merge = options.mask && options.readOnly;\n    let offset = options.mask ? 6 : 2;\n    let payloadLength = data.length;\n\n    if (data.length >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (data.length > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? data.length + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(data.length, 2);\n    } else if (payloadLength === 127) {\n      target.writeUInt32BE(0, 2);\n      target.writeUInt32BE(data.length, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    randomFillSync(mask, 0, 4);\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, data.length);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, data.length);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {String} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || data === '') {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n      buf.write(data, 2);\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doClose, buf, mask, cb]);\n    } else {\n      this.doClose(buf, mask, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a close message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doClose(data, mask, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x08,\n        mask,\n        readOnly: false\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPing, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPing(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a ping message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPing(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x09,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPong, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPong(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a pong message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPong(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x0a,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const buf = toBuffer(data);\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (rsv1 && perMessageDeflate) {\n        rsv1 = buf.length >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        fin: options.fin,\n        rsv1,\n        opcode,\n        mask: options.mask,\n        readOnly: toBuffer.readOnly\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, buf, this._compress, opts, cb]);\n      } else {\n        this.dispatch(buf, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(buf, {\n          fin: options.fin,\n          rsv1: false,\n          opcode,\n          mask: options.mask,\n          readOnly: toBuffer.readOnly\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a data message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += data.length;\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const callback = this._queue[i][4];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= data.length;\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[1].length;\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[1].length;\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let resumeOnReceiverDrain = true;\n  let terminateOnDestroy = true;\n\n  function receiverOnDrain() {\n    if (resumeOnReceiverDrain) ws._socket.resume();\n  }\n\n  if (ws.readyState === ws.CONNECTING) {\n    ws.once('open', function open() {\n      ws._receiver.removeAllListeners('drain');\n      ws._receiver.on('drain', receiverOnDrain);\n    });\n  } else {\n    ws._receiver.removeAllListeners('drain');\n    ws._receiver.on('drain', receiverOnDrain);\n  }\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg) {\n    if (!duplex.push(msg)) {\n      resumeOnReceiverDrain = false;\n      ws._socket.pause();\n    }\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (\n      (ws.readyState === ws.OPEN || ws.readyState === ws.CLOSING) &&\n      !resumeOnReceiverDrain\n    ) {\n      resumeOnReceiverDrain = true;\n      if (!ws._receiver._writableState.needDrain) ws._socket.resume();\n    }\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\ntry {\n  let isValidUTF8 = require('utf-8-validate');\n\n  /* istanbul ignore if */\n  if (typeof isValidUTF8 === 'object') {\n    isValidUTF8 = isValidUTF8.Validation.isValidUTF8; // utf-8-validate@<3.0.0\n  }\n\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8(buf) {\n      return buf.length < 150 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8: _isValidUTF8\n  };\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls|https$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst https = require('https');\nconst net = require('net');\nconst tls = require('tls');\nconst { createHash } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst WebSocket = require('./websocket');\nconst { format, parse } = require('./extension');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) this.clients = new Set();\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Close the server.\n   *\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(cb) {\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSED) {\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    //\n    // Terminate all associated clients.\n    //\n    if (this.clients) {\n      for (const client of this.clients) client.terminate();\n    }\n\n    const server = this._server;\n\n    if (server) {\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // Close the http server if it was internally created.\n      //\n      if (this.options.port != null) {\n        server.close(emitClose.bind(undefined, this));\n        return;\n      }\n    }\n\n    process.nextTick(emitClose, this);\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key =\n      req.headers['sec-websocket-key'] !== undefined\n        ? req.headers['sec-websocket-key'].trim()\n        : false;\n    const upgrade = req.headers.upgrade;\n    const version = +req.headers['sec-websocket-version'];\n    const extensions = {};\n\n    if (\n      req.method !== 'GET' ||\n      upgrade === undefined ||\n      upgrade.toLowerCase() !== 'websocket' ||\n      !key ||\n      !keyRegex.test(key) ||\n      (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortHandshake(socket, 400);\n    }\n\n    if (this.options.perMessageDeflate) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = parse(req.headers['sec-websocket-extensions']);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(key, extensions, req, socket, head, cb);\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(key, extensions, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Object} extensions The accepted extensions\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(key, extensions, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new WebSocket(null);\n    let protocol = req.headers['sec-websocket-protocol'];\n\n    if (protocol) {\n      protocol = protocol.split(',').map(trim);\n\n      //\n      // Optionally call external protocol selection handler.\n      //\n      if (this.options.handleProtocols) {\n        protocol = this.options.handleProtocols(protocol, req);\n      } else {\n        protocol = protocol[0];\n      }\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, this.options.maxPayload);\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => this.clients.delete(ws));\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  if (socket.writable) {\n    message = message || http.STATUS_CODES[code];\n    headers = {\n      Connection: 'close',\n      'Content-Type': 'text/html',\n      'Content-Length': Buffer.byteLength(message),\n      ...headers\n    };\n\n    socket.write(\n      `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n        Object.keys(headers)\n          .map((h) => `${h}: ${headers[h]}`)\n          .join('\\r\\n') +\n        '\\r\\n\\r\\n' +\n        message\n    );\n  }\n\n  socket.removeListener('error', socketOnError);\n  socket.destroy();\n}\n\n/**\n * Remove whitespace characters from both ends of a string.\n *\n * @param {String} str The string\n * @return {String} A new string representing `str` stripped of whitespace\n *     characters from both its beginning and end\n * @private\n */\nfunction trim(str) {\n  return str.trim();\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Readable$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst { addEventListener, removeEventListener } = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = '';\n    this._closeTimer = null;\n    this._extensions = {};\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (Array.isArray(protocols)) {\n        protocols = protocols.join(', ');\n      } else if (typeof protocols === 'object' && protocols !== null) {\n        options = protocols;\n        protocols = undefined;\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onclose(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onerror(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onopen(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onmessage(listener) {}\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Number} [maxPayload=0] The maximum allowed message size\n   * @private\n   */\n  setSocket(socket, head, maxPayload) {\n    const receiver = new Receiver(\n      this.binaryType,\n      this._extensions,\n      this._isServer,\n      maxPayload\n    );\n\n    this._sender = new Sender(socket, this._extensions);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {String} [data] A string explaining why the connection is closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        if (listeners[i]._listener) return listeners[i]._listener;\n      }\n\n      return undefined;\n    },\n    set(listener) {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        //\n        // Remove only the listeners added via `addEventListener`.\n        //\n        if (listeners[i]._listener) this.removeListener(method, listeners[i]);\n      }\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {String} [protocols] The subprotocols\n * @param {Object} [options] Connection options\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: undefined,\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    parsedUrl = new URL(address);\n    websocket._url = address;\n  }\n\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n\n  if (!parsedUrl.host && (!isUnixSocket || !parsedUrl.pathname)) {\n    const err = new Error(`Invalid URL: ${websocket.url}`);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const isSecure =\n    parsedUrl.protocol === 'wss:' || parsedUrl.protocol === 'https:';\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const get = isSecure ? https.get : http.get;\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket',\n    ...opts.headers\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols) {\n    opts.headers['Sec-WebSocket-Protocol'] = protocols;\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalUnixSocket = isUnixSocket;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isUnixSocket\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else {\n      const isSameHost = isUnixSocket\n        ? websocket._originalUnixSocket\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalUnixSocket\n        ? false\n        : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n  }\n\n  let req = (websocket._req = get(opts));\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req.aborted) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (err) {\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the `upgrade`\n    // event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const upgrade = res.headers.upgrade;\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    const protList = (protocols || '').split(/, */);\n    let protError;\n\n    if (!protocols && serverProt) {\n      protError = 'Server sent a subprotocol but none was requested';\n    } else if (protocols && !serverProt) {\n      protError = 'Server sent no subprotocol';\n    } else if (serverProt && !protList.includes(serverProt)) {\n      protError = 'Server sent an invalid subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (extensionNames.length) {\n        if (\n          extensionNames.length !== 1 ||\n          extensionNames[0] !== PerMessageDeflate.extensionName\n        ) {\n          const message =\n            'Server indicated an extension that was not requested';\n          abortHandshake(websocket, socket, message);\n          return;\n        }\n\n        try {\n          perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n        } catch (err) {\n          const message = 'Invalid Sec-WebSocket-Extensions header';\n          abortHandshake(websocket, socket, message);\n          return;\n        }\n\n        websocket._extensions[PerMessageDeflate.extensionName] =\n          perMessageDeflate;\n      }\n    }\n\n    websocket.setSocket(socket, head, opts.maxPayload);\n  });\n}\n\n/**\n * Emit the `'error'` and `'close'` event.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    stream.once('abort', websocket.emitClose.bind(websocket));\n    websocket.emit('error', err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    cb(err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {String} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  this[kWebSocket]._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  websocket.emit('error', err);\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The message\n * @private\n */\nfunction receiverOnMessage(data) {\n  this[kWebSocket].emit('message', data);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","module.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n","module.exports = require(\"bufferutil\");","module.exports = require(\"utf-8-validate\");","module.exports = require(\"crypto\");","module.exports = require(\"events\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"stream\");","module.exports = require(\"tls\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"zlib\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport default class EventEmitter<Events: Object> {\n  listenersMap: Map<string, Array<Function>> = new Map();\n\n  addListener<Event: $Keys<Events>>(\n    event: Event,\n    listener: (...$ElementType<Events, Event>) => any,\n  ): void {\n    const listeners = this.listenersMap.get(event);\n    if (listeners === undefined) {\n      this.listenersMap.set(event, [listener]);\n    } else {\n      const index = listeners.indexOf(listener);\n      if (index < 0) {\n        listeners.push(listener);\n      }\n    }\n  }\n\n  emit<Event: $Keys<Events>>(\n    event: Event,\n    ...args: $ElementType<Events, Event>\n  ): void {\n    const listeners = this.listenersMap.get(event);\n    if (listeners !== undefined) {\n      if (listeners.length === 1) {\n        // No need to clone or try/catch\n        const listener = listeners[0];\n        listener.apply(null, args);\n      } else {\n        let didThrow = false;\n        let caughtError = null;\n\n        const clonedListeners = Array.from(listeners);\n        for (let i = 0; i < clonedListeners.length; i++) {\n          const listener = clonedListeners[i];\n          try {\n            listener.apply(null, args);\n          } catch (error) {\n            if (caughtError === null) {\n              didThrow = true;\n              caughtError = error;\n            }\n          }\n        }\n\n        if (didThrow) {\n          throw caughtError;\n        }\n      }\n    }\n  }\n\n  removeAllListeners(): void {\n    this.listenersMap.clear();\n  }\n\n  removeListener(event: $Keys<Events>, listener: Function): void {\n    const listeners = this.listenersMap.get(event);\n    if (listeners !== undefined) {\n      const index = listeners.indexOf(listener);\n      if (index >= 0) {\n        listeners.splice(index, 1);\n      }\n    }\n  }\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport EventEmitter from './events';\n\nimport type {ComponentFilter, Wall} from './frontend/types';\nimport type {\n  InspectedElementPayload,\n  OwnersList,\n  ProfilingDataBackend,\n  RendererID,\n  DevToolsHookSettings,\n  ProfilingSettings,\n} from 'react-devtools-shared/src/backend/types';\nimport type {StyleAndLayout as StyleAndLayoutPayload} from 'react-devtools-shared/src/backend/NativeStyleEditor/types';\n\n// This message specifies the version of the DevTools protocol currently supported by the backend,\n// as well as the earliest NPM version (e.g. \"4.13.0\") that protocol is supported by on the frontend.\n// This enables an older frontend to display an upgrade message to users for a newer, unsupported backend.\nexport type BridgeProtocol = {\n  // Version supported by the current frontend/backend.\n  version: number,\n\n  // NPM version range that also supports this version.\n  // Note that 'maxNpmVersion' is only set when the version is bumped.\n  minNpmVersion: string,\n  maxNpmVersion: string | null,\n};\n\n// Bump protocol version whenever a backwards breaking change is made\n// in the messages sent between BackendBridge and FrontendBridge.\n// This mapping is embedded in both frontend and backend builds.\n//\n// The backend protocol will always be the latest entry in the BRIDGE_PROTOCOL array.\n//\n// When an older frontend connects to a newer backend,\n// the backend can send the minNpmVersion and the frontend can display an NPM upgrade prompt.\n//\n// When a newer frontend connects with an older protocol version,\n// the frontend can use the embedded minNpmVersion/maxNpmVersion values to display a downgrade prompt.\nexport const BRIDGE_PROTOCOL: Array<BridgeProtocol> = [\n  // This version technically never existed,\n  // but a backwards breaking change was added in 4.11,\n  // so the safest guess to downgrade the frontend would be to version 4.10.\n  {\n    version: 0,\n    minNpmVersion: '\"<4.11.0\"',\n    maxNpmVersion: '\"<4.11.0\"',\n  },\n  // Versions 4.11.x – 4.12.x contained the backwards breaking change,\n  // but we didn't add the \"fix\" of checking the protocol version until 4.13,\n  // so we don't recommend downgrading to 4.11 or 4.12.\n  {\n    version: 1,\n    minNpmVersion: '4.13.0',\n    maxNpmVersion: '4.21.0',\n  },\n  // Version 2 adds a StrictMode-enabled and supports-StrictMode bits to add-root operation.\n  {\n    version: 2,\n    minNpmVersion: '4.22.0',\n    maxNpmVersion: null,\n  },\n];\n\nexport const currentBridgeProtocol: BridgeProtocol =\n  BRIDGE_PROTOCOL[BRIDGE_PROTOCOL.length - 1];\n\ntype ElementAndRendererID = {id: number, rendererID: RendererID};\n\ntype Message = {\n  event: string,\n  payload: any,\n};\n\ntype HighlightHostInstance = {\n  ...ElementAndRendererID,\n  displayName: string | null,\n  hideAfterTimeout: boolean,\n  openBuiltinElementsPanel: boolean,\n  scrollIntoView: boolean,\n};\n\ntype OverrideValue = {\n  ...ElementAndRendererID,\n  path: Array<string | number>,\n  wasForwarded?: boolean,\n  value: any,\n};\n\ntype OverrideHookState = {\n  ...OverrideValue,\n  hookID: number,\n};\n\ntype PathType = 'props' | 'hooks' | 'state' | 'context';\n\ntype DeletePath = {\n  ...ElementAndRendererID,\n  type: PathType,\n  hookID?: ?number,\n  path: Array<string | number>,\n};\n\ntype RenamePath = {\n  ...ElementAndRendererID,\n  type: PathType,\n  hookID?: ?number,\n  oldPath: Array<string | number>,\n  newPath: Array<string | number>,\n};\n\ntype OverrideValueAtPath = {\n  ...ElementAndRendererID,\n  type: PathType,\n  hookID?: ?number,\n  path: Array<string | number>,\n  value: any,\n};\n\ntype OverrideError = {\n  ...ElementAndRendererID,\n  forceError: boolean,\n};\n\ntype OverrideSuspense = {\n  ...ElementAndRendererID,\n  forceFallback: boolean,\n};\n\ntype CopyElementPathParams = {\n  ...ElementAndRendererID,\n  path: Array<string | number>,\n};\n\ntype ViewAttributeSourceParams = {\n  ...ElementAndRendererID,\n  path: Array<string | number>,\n};\n\ntype InspectElementParams = {\n  ...ElementAndRendererID,\n  forceFullData: boolean,\n  path: Array<number | string> | null,\n  requestID: number,\n};\n\ntype StoreAsGlobalParams = {\n  ...ElementAndRendererID,\n  count: number,\n  path: Array<string | number>,\n};\n\ntype NativeStyleEditor_RenameAttributeParams = {\n  ...ElementAndRendererID,\n  oldName: string,\n  newName: string,\n  value: string,\n};\n\ntype NativeStyleEditor_SetValueParams = {\n  ...ElementAndRendererID,\n  name: string,\n  value: string,\n};\n\ntype SavedPreferencesParams = {\n  componentFilters: Array<ComponentFilter>,\n};\n\nexport type BackendEvents = {\n  backendInitialized: [],\n  backendVersion: [string],\n  bridgeProtocol: [BridgeProtocol],\n  extensionBackendInitialized: [],\n  fastRefreshScheduled: [],\n  getSavedPreferences: [],\n  inspectedElement: [InspectedElementPayload],\n  isReloadAndProfileSupportedByBackend: [boolean],\n  operations: [Array<number>],\n  ownersList: [OwnersList],\n  overrideComponentFilters: [Array<ComponentFilter>],\n  environmentNames: [Array<string>],\n  profilingData: [ProfilingDataBackend],\n  profilingStatus: [boolean],\n  reloadAppForProfiling: [],\n  saveToClipboard: [string],\n  selectElement: [number],\n  shutdown: [],\n  stopInspectingHost: [boolean],\n  syncSelectionFromBuiltinElementsPanel: [],\n  syncSelectionToBuiltinElementsPanel: [],\n  unsupportedRendererVersion: [],\n\n  // React Native style editor plug-in.\n  isNativeStyleEditorSupported: [\n    {isSupported: boolean, validAttributes: ?$ReadOnlyArray<string>},\n  ],\n  NativeStyleEditor_styleAndLayout: [StyleAndLayoutPayload],\n\n  hookSettings: [$ReadOnly<DevToolsHookSettings>],\n};\n\ntype StartProfilingParams = ProfilingSettings;\ntype ReloadAndProfilingParams = ProfilingSettings;\n\ntype FrontendEvents = {\n  clearErrorsAndWarnings: [{rendererID: RendererID}],\n  clearErrorsForElementID: [ElementAndRendererID],\n  clearHostInstanceHighlight: [],\n  clearWarningsForElementID: [ElementAndRendererID],\n  copyElementPath: [CopyElementPathParams],\n  deletePath: [DeletePath],\n  getBackendVersion: [],\n  getBridgeProtocol: [],\n  getIfHasUnsupportedRendererVersion: [],\n  getOwnersList: [ElementAndRendererID],\n  getProfilingData: [{rendererID: RendererID}],\n  getProfilingStatus: [],\n  highlightHostInstance: [HighlightHostInstance],\n  inspectElement: [InspectElementParams],\n  logElementToConsole: [ElementAndRendererID],\n  overrideError: [OverrideError],\n  overrideSuspense: [OverrideSuspense],\n  overrideValueAtPath: [OverrideValueAtPath],\n  profilingData: [ProfilingDataBackend],\n  reloadAndProfile: [ReloadAndProfilingParams],\n  renamePath: [RenamePath],\n  savedPreferences: [SavedPreferencesParams],\n  setTraceUpdatesEnabled: [boolean],\n  shutdown: [],\n  startInspectingHost: [],\n  startProfiling: [StartProfilingParams],\n  stopInspectingHost: [boolean],\n  stopProfiling: [],\n  storeAsGlobal: [StoreAsGlobalParams],\n  updateComponentFilters: [Array<ComponentFilter>],\n  getEnvironmentNames: [],\n  updateHookSettings: [$ReadOnly<DevToolsHookSettings>],\n  viewAttributeSource: [ViewAttributeSourceParams],\n  viewElementSource: [ElementAndRendererID],\n\n  // React Native style editor plug-in.\n  NativeStyleEditor_measure: [ElementAndRendererID],\n  NativeStyleEditor_renameAttribute: [NativeStyleEditor_RenameAttributeParams],\n  NativeStyleEditor_setValue: [NativeStyleEditor_SetValueParams],\n\n  // Temporarily support newer standalone front-ends sending commands to older embedded backends.\n  // We do this because React Native embeds the React DevTools backend,\n  // but cannot control which version of the frontend users use.\n  //\n  // Note that nothing in the newer backend actually listens to these events,\n  // but the new frontend still dispatches them (in case older backends are listening to them instead).\n  //\n  // Note that this approach does no support the combination of a newer backend with an older frontend.\n  // It would be more work to support both approaches (and not run handlers twice)\n  // so I chose to support the more likely/common scenario (and the one more difficult for an end user to \"fix\").\n  overrideContext: [OverrideValue],\n  overrideHookState: [OverrideHookState],\n  overrideProps: [OverrideValue],\n  overrideState: [OverrideValue],\n\n  resumeElementPolling: [],\n  pauseElementPolling: [],\n\n  getHookSettings: [],\n};\n\nclass Bridge<\n  OutgoingEvents: Object,\n  IncomingEvents: Object,\n> extends EventEmitter<{\n  ...IncomingEvents,\n  ...OutgoingEvents,\n}> {\n  _isShutdown: boolean = false;\n  _messageQueue: Array<any> = [];\n  _scheduledFlush: boolean = false;\n  _wall: Wall;\n  _wallUnlisten: Function | null = null;\n\n  constructor(wall: Wall) {\n    super();\n\n    this._wall = wall;\n\n    this._wallUnlisten =\n      wall.listen((message: Message) => {\n        if (message && message.event) {\n          (this: any).emit(message.event, message.payload);\n        }\n      }) || null;\n\n    // Temporarily support older standalone front-ends sending commands to newer embedded backends.\n    // We do this because React Native embeds the React DevTools backend,\n    // but cannot control which version of the frontend users use.\n    this.addListener('overrideValueAtPath', this.overrideValueAtPath);\n  }\n\n  // Listening directly to the wall isn't advised.\n  // It can be used to listen for legacy (v3) messages (since they use a different format).\n  get wall(): Wall {\n    return this._wall;\n  }\n\n  send<EventName: $Keys<OutgoingEvents>>(\n    event: EventName,\n    ...payload: $ElementType<OutgoingEvents, EventName>\n  ) {\n    if (this._isShutdown) {\n      console.warn(\n        `Cannot send message \"${event}\" through a Bridge that has been shutdown.`,\n      );\n      return;\n    }\n\n    // When we receive a message:\n    // - we add it to our queue of messages to be sent\n    // - if there hasn't been a message recently, we set a timer for 0 ms in\n    //   the future, allowing all messages created in the same tick to be sent\n    //   together\n    // - if there *has* been a message flushed in the last BATCH_DURATION ms\n    //   (or we're waiting for our setTimeout-0 to fire), then _timeoutID will\n    //   be set, and we'll simply add to the queue and wait for that\n    this._messageQueue.push(event, payload);\n    if (!this._scheduledFlush) {\n      this._scheduledFlush = true;\n      // $FlowFixMe\n      if (typeof devtoolsJestTestScheduler === 'function') {\n        // This exists just for our own jest tests.\n        // They're written in such a way that we can neither mock queueMicrotask\n        // because then we break React DOM and we can't not mock it because then\n        // we can't synchronously flush it. So they need to be rewritten.\n        // $FlowFixMe\n        devtoolsJestTestScheduler(this._flush); // eslint-disable-line no-undef\n      } else {\n        queueMicrotask(this._flush);\n      }\n    }\n  }\n\n  shutdown() {\n    if (this._isShutdown) {\n      console.warn('Bridge was already shutdown.');\n      return;\n    }\n\n    // Queue the shutdown outgoing message for subscribers.\n    this.emit('shutdown');\n    this.send('shutdown');\n\n    // Mark this bridge as destroyed, i.e. disable its public API.\n    this._isShutdown = true;\n\n    // Disable the API inherited from EventEmitter that can add more listeners and send more messages.\n    // $FlowFixMe[cannot-write] This property is not writable.\n    this.addListener = function () {};\n    // $FlowFixMe[cannot-write] This property is not writable.\n    this.emit = function () {};\n    // NOTE: There's also EventEmitter API like `on` and `prependListener` that we didn't add to our Flow type of EventEmitter.\n\n    // Unsubscribe this bridge incoming message listeners to be sure, and so they don't have to do that.\n    this.removeAllListeners();\n\n    // Stop accepting and emitting incoming messages from the wall.\n    const wallUnlisten = this._wallUnlisten;\n    if (wallUnlisten) {\n      wallUnlisten();\n    }\n\n    // Synchronously flush all queued outgoing messages.\n    // At this step the subscribers' code may run in this call stack.\n    do {\n      this._flush();\n    } while (this._messageQueue.length);\n  }\n\n  _flush: () => void = () => {\n    // This method is used after the bridge is marked as destroyed in shutdown sequence,\n    // so we do not bail out if the bridge marked as destroyed.\n    // It is a private method that the bridge ensures is only called at the right times.\n    try {\n      if (this._messageQueue.length) {\n        for (let i = 0; i < this._messageQueue.length; i += 2) {\n          this._wall.send(this._messageQueue[i], ...this._messageQueue[i + 1]);\n        }\n        this._messageQueue.length = 0;\n      }\n    } finally {\n      // We set this at the end in case new messages are added synchronously above.\n      // They're already handled so they shouldn't queue more flushes.\n      this._scheduledFlush = false;\n    }\n  };\n\n  // Temporarily support older standalone backends by forwarding \"overrideValueAtPath\" commands\n  // to the older message types they may be listening to.\n  overrideValueAtPath: OverrideValueAtPath => void = ({\n    id,\n    path,\n    rendererID,\n    type,\n    value,\n  }: OverrideValueAtPath) => {\n    switch (type) {\n      case 'context':\n        this.send('overrideContext', {\n          id,\n          path,\n          rendererID,\n          wasForwarded: true,\n          value,\n        });\n        break;\n      case 'hooks':\n        this.send('overrideHookState', {\n          id,\n          path,\n          rendererID,\n          wasForwarded: true,\n          value,\n        });\n        break;\n      case 'props':\n        this.send('overrideProps', {\n          id,\n          path,\n          rendererID,\n          wasForwarded: true,\n          value,\n        });\n        break;\n      case 'state':\n        this.send('overrideState', {\n          id,\n          path,\n          rendererID,\n          wasForwarded: true,\n          value,\n        });\n        break;\n    }\n  };\n}\n\nexport type BackendBridge = Bridge<BackendEvents, FrontendEvents>;\nexport type FrontendBridge = Bridge<FrontendEvents, BackendEvents>;\n\nexport default Bridge;\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport const CHROME_WEBSTORE_EXTENSION_ID = 'fmkadmapgofadopljbjfkapdkoienihi';\nexport const INTERNAL_EXTENSION_ID = 'dnjnjgbfilfphmojnmhliehogmojhclc';\nexport const LOCAL_EXTENSION_ID = 'ikiahnapldjmdmpkmfhjdjilojjhgcbf';\n\n// Flip this flag to true to enable verbose console debug logging.\nexport const __DEBUG__ = false;\n\n// Flip this flag to true to enable performance.mark() and performance.measure() timings.\nexport const __PERFORMANCE_PROFILE__ = false;\n\nexport const TREE_OPERATION_ADD = 1;\nexport const TREE_OPERATION_REMOVE = 2;\nexport const TREE_OPERATION_REORDER_CHILDREN = 3;\nexport const TREE_OPERATION_UPDATE_TREE_BASE_DURATION = 4;\nexport const TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS = 5;\nexport const TREE_OPERATION_REMOVE_ROOT = 6;\nexport const TREE_OPERATION_SET_SUBTREE_MODE = 7;\n\nexport const PROFILING_FLAG_BASIC_SUPPORT = 0b01;\nexport const PROFILING_FLAG_TIMELINE_SUPPORT = 0b10;\n\nexport const LOCAL_STORAGE_DEFAULT_TAB_KEY = 'React::DevTools::defaultTab';\nexport const LOCAL_STORAGE_COMPONENT_FILTER_PREFERENCES_KEY =\n  'React::DevTools::componentFilters';\nexport const SESSION_STORAGE_LAST_SELECTION_KEY =\n  'React::DevTools::lastSelection';\nexport const LOCAL_STORAGE_OPEN_IN_EDITOR_URL =\n  'React::DevTools::openInEditorUrl';\nexport const LOCAL_STORAGE_OPEN_IN_EDITOR_URL_PRESET =\n  'React::DevTools::openInEditorUrlPreset';\nexport const LOCAL_STORAGE_PARSE_HOOK_NAMES_KEY =\n  'React::DevTools::parseHookNames';\nexport const SESSION_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY =\n  'React::DevTools::recordChangeDescriptions';\nexport const SESSION_STORAGE_RECORD_TIMELINE_KEY =\n  'React::DevTools::recordTimeline';\nexport const SESSION_STORAGE_RELOAD_AND_PROFILE_KEY =\n  'React::DevTools::reloadAndProfile';\nexport const LOCAL_STORAGE_BROWSER_THEME = 'React::DevTools::theme';\nexport const LOCAL_STORAGE_TRACE_UPDATES_ENABLED_KEY =\n  'React::DevTools::traceUpdatesEnabled';\nexport const LOCAL_STORAGE_SUPPORTS_PROFILING_KEY =\n  'React::DevTools::supportsProfiling';\n\nexport const PROFILER_EXPORT_VERSION = 5;\n\nexport const FIREFOX_CONSOLE_DIMMING_COLOR = 'color: rgba(124, 124, 124, 0.75)';\nexport const ANSI_STYLE_DIMMING_TEMPLATE = '\\x1b[2;38;2;124;124;124m%s\\x1b[0m';\nexport const ANSI_STYLE_DIMMING_TEMPLATE_WITH_COMPONENT_STACK =\n  '\\x1b[2;38;2;124;124;124m%s %o\\x1b[0m';\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n/**\n * WARNING:\n * This file contains types that are designed for React DevTools UI and how it interacts with the backend.\n * They might be used in different versions of DevTools backends.\n * Be mindful of backwards compatibility when making changes.\n */\n\nimport type {\n  Dehydrated,\n  Unserializable,\n} from 'react-devtools-shared/src/hydration';\nimport type {Source} from 'react-devtools-shared/src/shared/types';\n\nexport type BrowserTheme = 'dark' | 'light';\n\nexport type Wall = {\n  // `listen` returns the \"unlisten\" function.\n  listen: (fn: Function) => Function,\n  send: (event: string, payload: any, transferable?: Array<any>) => void,\n};\n\n// WARNING\n// The values below are referenced by ComponentFilters (which are saved via localStorage).\n// Do not change them or it will break previously saved user customizations.\n// If new element types are added, use new numbers rather than re-ordering existing ones.\n//\n// Changing these types is also a backwards breaking change for the standalone shell,\n// since the frontend and backend must share the same values-\n// and the backend is embedded in certain environments (like React Native).\nexport const ElementTypeClass = 1;\nexport const ElementTypeContext = 2;\nexport const ElementTypeFunction = 5;\nexport const ElementTypeForwardRef = 6;\nexport const ElementTypeHostComponent = 7;\nexport const ElementTypeMemo = 8;\nexport const ElementTypeOtherOrUnknown = 9;\nexport const ElementTypeProfiler = 10;\nexport const ElementTypeRoot = 11;\nexport const ElementTypeSuspense = 12;\nexport const ElementTypeSuspenseList = 13;\nexport const ElementTypeTracingMarker = 14;\nexport const ElementTypeVirtual = 15;\nexport const ElementTypeViewTransition = 16;\n\n// Different types of elements displayed in the Elements tree.\n// These types may be used to visually distinguish types,\n// or to enable/disable certain functionality.\nexport type ElementType =\n  | 1\n  | 2\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | 11\n  | 12\n  | 13\n  | 14\n  | 15\n  | 16;\n\n// WARNING\n// The values below are referenced by ComponentFilters (which are saved via localStorage).\n// Do not change them or it will break previously saved user customizations.\n// If new filter types are added, use new numbers rather than re-ordering existing ones.\nexport const ComponentFilterElementType = 1;\nexport const ComponentFilterDisplayName = 2;\nexport const ComponentFilterLocation = 3;\nexport const ComponentFilterHOC = 4;\nexport const ComponentFilterEnvironmentName = 5;\n\nexport type ComponentFilterType = 1 | 2 | 3 | 4 | 5;\n\n// Hide all elements of types in this Set.\n// We hide host components only by default.\nexport type ElementTypeComponentFilter = {\n  isEnabled: boolean,\n  type: 1,\n  value: ElementType,\n};\n\n// Hide all elements with displayNames or paths matching one or more of the RegExps in this Set.\n// Path filters are only used when elements include debug source location.\nexport type RegExpComponentFilter = {\n  isEnabled: boolean,\n  isValid: boolean,\n  type: 2 | 3,\n  value: string,\n};\n\nexport type BooleanComponentFilter = {\n  isEnabled: boolean,\n  isValid: boolean,\n  type: 4,\n};\n\nexport type EnvironmentNameComponentFilter = {\n  isEnabled: boolean,\n  isValid: boolean,\n  type: 5,\n  value: string,\n};\n\nexport type ComponentFilter =\n  | BooleanComponentFilter\n  | ElementTypeComponentFilter\n  | RegExpComponentFilter\n  | EnvironmentNameComponentFilter;\n\nexport type HookName = string | null;\n// Map of hook source (\"<filename>:<line-number>:<column-number>\") to name.\n// Hook source is used instead of the hook itself because the latter is not stable between element inspections.\n// We use a Map rather than an Array because of nested hooks and traversal ordering.\nexport type HookSourceLocationKey = string;\nexport type HookNames = Map<HookSourceLocationKey, HookName>;\n\nexport type LRUCache<K, V> = {\n  del: (key: K) => void,\n  get: (key: K) => V,\n  has: (key: K) => boolean,\n  reset: () => void,\n  set: (key: K, value: V) => void,\n};\n\nexport type StyleXPlugin = {\n  sources: Array<string>,\n  resolvedStyles: Object,\n};\n\nexport type Plugins = {\n  stylex: StyleXPlugin | null,\n};\n\nexport const StrictMode = 1;\n\n// Each element on the frontend corresponds to an ElementID (e.g. a Fiber) on the backend.\n// Some of its information (e.g. id, type, displayName) come from the backend.\n// Other bits (e.g. weight and depth) are computed on the frontend for windowing and display purposes.\n// Elements are updated on a push basis– meaning the backend pushes updates to the frontend when needed.\nexport type Element = {\n  id: number,\n  parentID: number,\n  children: Array<number>,\n  type: ElementType,\n  displayName: string | null,\n  key: number | string | null,\n\n  hocDisplayNames: null | Array<string>,\n\n  // Should the elements children be visible in the tree?\n  isCollapsed: boolean,\n\n  // Owner (if available)\n  ownerID: number,\n\n  // How many levels deep within the tree is this element?\n  // This determines how much indentation (left padding) should be used in the Elements tree.\n  depth: number,\n\n  // How many nodes (including itself) are below this Element within the tree.\n  // This property is used to quickly determine the total number of Elements,\n  // and the Element at any given index (for windowing purposes).\n  weight: number,\n\n  // This element is not in a StrictMode compliant subtree.\n  // Only true for React versions supporting StrictMode.\n  isStrictModeNonCompliant: boolean,\n\n  // If component is compiled with Forget, the backend will send its name as Forget(...)\n  // Later, on the frontend side, we will strip HOC names and Forget prefix.\n  compiledWithForget: boolean,\n};\n\nexport type SerializedElement = {\n  displayName: string | null,\n  id: number,\n  key: number | string | null,\n  hocDisplayNames: Array<string> | null,\n  compiledWithForget: boolean,\n  type: ElementType,\n};\n\nexport type OwnersList = {\n  id: number,\n  owners: Array<SerializedElement> | null,\n};\n\nexport type InspectedElementResponseType =\n  | 'error'\n  | 'full-data'\n  | 'hydrated-path'\n  | 'no-change'\n  | 'not-found';\n\nexport type InspectedElementPath = Array<string | number>;\n\nexport type InspectedElement = {\n  id: number,\n\n  // Does the current renderer support editable hooks and function props?\n  canEditHooks: boolean,\n  canEditFunctionProps: boolean,\n\n  // Does the current renderer support advanced editing interface?\n  canEditHooksAndDeletePaths: boolean,\n  canEditHooksAndRenamePaths: boolean,\n  canEditFunctionPropsDeletePaths: boolean,\n  canEditFunctionPropsRenamePaths: boolean,\n\n  // Is this Error, and can its value be overridden now?\n  isErrored: boolean,\n  canToggleError: boolean,\n\n  // Is this Suspense, and can its value be overridden now?\n  canToggleSuspense: boolean,\n\n  // Can view component source location.\n  canViewSource: boolean,\n\n  // Does the component have legacy context attached to it.\n  hasLegacyContext: boolean,\n\n  // Inspectable properties.\n  context: Object | null,\n  hooks: Object | null,\n  props: Object | null,\n  state: Object | null,\n  key: number | string | null,\n  errors: Array<[string, number]>,\n  warnings: Array<[string, number]>,\n\n  // List of owners\n  owners: Array<SerializedElement> | null,\n\n  // Location of component in source code.\n  source: Source | null,\n\n  type: ElementType,\n\n  // Meta information about the root this element belongs to.\n  rootType: string | null,\n\n  // Meta information about the renderer that created this element.\n  rendererPackageName: string | null,\n  rendererVersion: string | null,\n\n  // UI plugins/visualizations for the inspected element.\n  plugins: Plugins,\n};\n\n// TODO: Add profiling type\n\ntype Data =\n  | string\n  | Dehydrated\n  | Unserializable\n  | Array<Dehydrated>\n  | Array<Unserializable>\n  | {[string]: Data};\n\nexport type DehydratedData = {\n  cleaned: Array<Array<string | number>>,\n  data: Data,\n  unserializable: Array<Array<string | number>>,\n};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport function localStorageGetItem(key: string): any {\n  try {\n    return localStorage.getItem(key);\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function localStorageRemoveItem(key: string): void {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {}\n}\n\nexport function localStorageSetItem(key: string, value: any): void {\n  try {\n    return localStorage.setItem(key, value);\n  } catch (error) {}\n}\n\nexport function sessionStorageGetItem(key: string): any {\n  try {\n    return sessionStorage.getItem(key);\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function sessionStorageRemoveItem(key: string): void {\n  try {\n    sessionStorage.removeItem(key);\n  } catch (error) {}\n}\n\nexport function sessionStorageSetItem(key: string, value: any): void {\n  try {\n    return sessionStorage.setItem(key, value);\n  } catch (error) {}\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport LRU from 'lru-cache';\nimport {\n  REACT_CONSUMER_TYPE,\n  REACT_CONTEXT_TYPE,\n  REACT_FORWARD_REF_TYPE,\n  REACT_FRAGMENT_TYPE,\n  REACT_LAZY_TYPE,\n  REACT_ELEMENT_TYPE,\n  REACT_LEGACY_ELEMENT_TYPE,\n  REACT_MEMO_TYPE,\n  REACT_PORTAL_TYPE,\n  REACT_PROFILER_TYPE,\n  REACT_PROVIDER_TYPE,\n  REACT_STRICT_MODE_TYPE,\n  REACT_SUSPENSE_LIST_TYPE,\n  REACT_SUSPENSE_TYPE,\n  REACT_TRACING_MARKER_TYPE,\n  REACT_VIEW_TRANSITION_TYPE,\n} from 'shared/ReactSymbols';\nimport {enableRenderableContext} from 'shared/ReactFeatureFlags';\nimport {\n  TREE_OPERATION_ADD,\n  TREE_OPERATION_REMOVE,\n  TREE_OPERATION_REMOVE_ROOT,\n  TREE_OPERATION_REORDER_CHILDREN,\n  TREE_OPERATION_SET_SUBTREE_MODE,\n  TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS,\n  TREE_OPERATION_UPDATE_TREE_BASE_DURATION,\n  LOCAL_STORAGE_COMPONENT_FILTER_PREFERENCES_KEY,\n  LOCAL_STORAGE_OPEN_IN_EDITOR_URL,\n  SESSION_STORAGE_RELOAD_AND_PROFILE_KEY,\n  SESSION_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY,\n  SESSION_STORAGE_RECORD_TIMELINE_KEY,\n} from './constants';\nimport {\n  ComponentFilterElementType,\n  ComponentFilterLocation,\n  ElementTypeHostComponent,\n} from './frontend/types';\nimport {\n  ElementTypeRoot,\n  ElementTypeClass,\n  ElementTypeForwardRef,\n  ElementTypeFunction,\n  ElementTypeMemo,\n  ElementTypeVirtual,\n} from 'react-devtools-shared/src/frontend/types';\nimport {\n  localStorageGetItem,\n  localStorageSetItem,\n  sessionStorageGetItem,\n  sessionStorageRemoveItem,\n  sessionStorageSetItem,\n} from 'react-devtools-shared/src/storage';\nimport {meta} from './hydration';\nimport isArray from './isArray';\n\nimport type {\n  ComponentFilter,\n  ElementType,\n  SerializedElement as SerializedElementFrontend,\n  LRUCache,\n} from 'react-devtools-shared/src/frontend/types';\nimport type {\n  ProfilingSettings,\n  SerializedElement as SerializedElementBackend,\n} from 'react-devtools-shared/src/backend/types';\nimport {isSynchronousXHRSupported} from './backend/utils';\n\n// $FlowFixMe[method-unbinding]\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nconst cachedDisplayNames: WeakMap<Function, string> = new WeakMap();\n\n// On large trees, encoding takes significant time.\n// Try to reuse the already encoded strings.\nconst encodedStringCache: LRUCache<string, Array<number>> = new LRU({\n  max: 1000,\n});\n\nexport function alphaSortKeys(\n  a: string | number | symbol,\n  b: string | number | symbol,\n): number {\n  if (a.toString() > b.toString()) {\n    return 1;\n  } else if (b.toString() > a.toString()) {\n    return -1;\n  } else {\n    return 0;\n  }\n}\n\nexport function getAllEnumerableKeys(\n  obj: Object,\n): Set<string | number | symbol> {\n  const keys = new Set<string | number | symbol>();\n  let current = obj;\n  while (current != null) {\n    const currentKeys = [\n      ...Object.keys(current),\n      ...Object.getOwnPropertySymbols(current),\n    ];\n    const descriptors = Object.getOwnPropertyDescriptors(current);\n    currentKeys.forEach(key => {\n      // $FlowFixMe[incompatible-type]: key can be a Symbol https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor\n      if (descriptors[key].enumerable) {\n        keys.add(key);\n      }\n    });\n    current = Object.getPrototypeOf(current);\n  }\n  return keys;\n}\n\n// Mirror https://github.com/facebook/react/blob/7c21bf72ace77094fd1910cc350a548287ef8350/packages/shared/getComponentName.js#L27-L37\nexport function getWrappedDisplayName(\n  outerType: mixed,\n  innerType: any,\n  wrapperName: string,\n  fallbackName?: string,\n): string {\n  const displayName = (outerType: any)?.displayName;\n  return (\n    displayName || `${wrapperName}(${getDisplayName(innerType, fallbackName)})`\n  );\n}\n\nexport function getDisplayName(\n  type: Function,\n  fallbackName: string = 'Anonymous',\n): string {\n  const nameFromCache = cachedDisplayNames.get(type);\n  if (nameFromCache != null) {\n    return nameFromCache;\n  }\n\n  let displayName = fallbackName;\n\n  // The displayName property is not guaranteed to be a string.\n  // It's only safe to use for our purposes if it's a string.\n  // github.com/facebook/react-devtools/issues/803\n  if (typeof type.displayName === 'string') {\n    displayName = type.displayName;\n  } else if (typeof type.name === 'string' && type.name !== '') {\n    displayName = type.name;\n  }\n\n  cachedDisplayNames.set(type, displayName);\n  return displayName;\n}\n\nlet uidCounter: number = 0;\n\nexport function getUID(): number {\n  return ++uidCounter;\n}\n\nexport function utfDecodeStringWithRanges(\n  array: Array<number>,\n  left: number,\n  right: number,\n): string {\n  let string = '';\n  for (let i = left; i <= right; i++) {\n    string += String.fromCodePoint(array[i]);\n  }\n  return string;\n}\n\nfunction surrogatePairToCodePoint(\n  charCode1: number,\n  charCode2: number,\n): number {\n  return ((charCode1 & 0x3ff) << 10) + (charCode2 & 0x3ff) + 0x10000;\n}\n\n// Credit for this encoding approach goes to Tim Down:\n// https://stackoverflow.com/questions/4877326/how-can-i-tell-if-a-string-contains-multibyte-characters-in-javascript\nexport function utfEncodeString(string: string): Array<number> {\n  const cached = encodedStringCache.get(string);\n  if (cached !== undefined) {\n    return cached;\n  }\n\n  const encoded = [];\n  let i = 0;\n  let charCode;\n  while (i < string.length) {\n    charCode = string.charCodeAt(i);\n    // Handle multibyte unicode characters (like emoji).\n    if ((charCode & 0xf800) === 0xd800) {\n      encoded.push(surrogatePairToCodePoint(charCode, string.charCodeAt(++i)));\n    } else {\n      encoded.push(charCode);\n    }\n    ++i;\n  }\n\n  encodedStringCache.set(string, encoded);\n\n  return encoded;\n}\n\nexport function printOperationsArray(operations: Array<number>) {\n  // The first two values are always rendererID and rootID\n  const rendererID = operations[0];\n  const rootID = operations[1];\n\n  const logs = [`operations for renderer:${rendererID} and root:${rootID}`];\n\n  let i = 2;\n\n  // Reassemble the string table.\n  const stringTable: Array<null | string> = [\n    null, // ID = 0 corresponds to the null string.\n  ];\n  const stringTableSize = operations[i++];\n  const stringTableEnd = i + stringTableSize;\n  while (i < stringTableEnd) {\n    const nextLength = operations[i++];\n    const nextString = utfDecodeStringWithRanges(\n      operations,\n      i,\n      i + nextLength - 1,\n    );\n    stringTable.push(nextString);\n    i += nextLength;\n  }\n\n  while (i < operations.length) {\n    const operation = operations[i];\n\n    switch (operation) {\n      case TREE_OPERATION_ADD: {\n        const id = ((operations[i + 1]: any): number);\n        const type = ((operations[i + 2]: any): ElementType);\n\n        i += 3;\n\n        if (type === ElementTypeRoot) {\n          logs.push(`Add new root node ${id}`);\n\n          i++; // isStrictModeCompliant\n          i++; // supportsProfiling\n          i++; // supportsStrictMode\n          i++; // hasOwnerMetadata\n        } else {\n          const parentID = ((operations[i]: any): number);\n          i++;\n\n          i++; // ownerID\n\n          const displayNameStringID = operations[i];\n          const displayName = stringTable[displayNameStringID];\n          i++;\n\n          i++; // key\n\n          logs.push(\n            `Add node ${id} (${displayName || 'null'}) as child of ${parentID}`,\n          );\n        }\n        break;\n      }\n      case TREE_OPERATION_REMOVE: {\n        const removeLength = ((operations[i + 1]: any): number);\n        i += 2;\n\n        for (let removeIndex = 0; removeIndex < removeLength; removeIndex++) {\n          const id = ((operations[i]: any): number);\n          i += 1;\n\n          logs.push(`Remove node ${id}`);\n        }\n        break;\n      }\n      case TREE_OPERATION_REMOVE_ROOT: {\n        i += 1;\n\n        logs.push(`Remove root ${rootID}`);\n        break;\n      }\n      case TREE_OPERATION_SET_SUBTREE_MODE: {\n        const id = operations[i + 1];\n        const mode = operations[i + 1];\n\n        i += 3;\n\n        logs.push(`Mode ${mode} set for subtree with root ${id}`);\n        break;\n      }\n      case TREE_OPERATION_REORDER_CHILDREN: {\n        const id = ((operations[i + 1]: any): number);\n        const numChildren = ((operations[i + 2]: any): number);\n        i += 3;\n        const children = operations.slice(i, i + numChildren);\n        i += numChildren;\n\n        logs.push(`Re-order node ${id} children ${children.join(',')}`);\n        break;\n      }\n      case TREE_OPERATION_UPDATE_TREE_BASE_DURATION:\n        // Base duration updates are only sent while profiling is in progress.\n        // We can ignore them at this point.\n        // The profiler UI uses them lazily in order to generate the tree.\n        i += 3;\n        break;\n      case TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS:\n        const id = operations[i + 1];\n        const numErrors = operations[i + 2];\n        const numWarnings = operations[i + 3];\n\n        i += 4;\n\n        logs.push(\n          `Node ${id} has ${numErrors} errors and ${numWarnings} warnings`,\n        );\n        break;\n      default:\n        throw Error(`Unsupported Bridge operation \"${operation}\"`);\n    }\n  }\n\n  console.log(logs.join('\\n  '));\n}\n\nexport function getDefaultComponentFilters(): Array<ComponentFilter> {\n  return [\n    {\n      type: ComponentFilterElementType,\n      value: ElementTypeHostComponent,\n      isEnabled: true,\n    },\n  ];\n}\n\nexport function getSavedComponentFilters(): Array<ComponentFilter> {\n  try {\n    const raw = localStorageGetItem(\n      LOCAL_STORAGE_COMPONENT_FILTER_PREFERENCES_KEY,\n    );\n    if (raw != null) {\n      const parsedFilters: Array<ComponentFilter> = JSON.parse(raw);\n      return filterOutLocationComponentFilters(parsedFilters);\n    }\n  } catch (error) {}\n  return getDefaultComponentFilters();\n}\n\nexport function setSavedComponentFilters(\n  componentFilters: Array<ComponentFilter>,\n): void {\n  localStorageSetItem(\n    LOCAL_STORAGE_COMPONENT_FILTER_PREFERENCES_KEY,\n    JSON.stringify(filterOutLocationComponentFilters(componentFilters)),\n  );\n}\n\n// Following __debugSource removal from Fiber, the new approach for finding the source location\n// of a component, represented by the Fiber, is based on lazily generating and parsing component stack frames\n// To find the original location, React DevTools will perform symbolication, source maps are required for that.\n// In order to start filtering Fibers, we need to find location for all of them, which can't be done lazily.\n// Eager symbolication can become quite expensive for large applications.\nexport function filterOutLocationComponentFilters(\n  componentFilters: Array<ComponentFilter>,\n): Array<ComponentFilter> {\n  // This is just an additional check to preserve the previous state\n  // Filters can be stored on the backend side or in user land (in a window object)\n  if (!Array.isArray(componentFilters)) {\n    return componentFilters;\n  }\n\n  return componentFilters.filter(f => f.type !== ComponentFilterLocation);\n}\n\nexport function getDefaultOpenInEditorURL(): string {\n  return typeof process.env.EDITOR_URL === 'string'\n    ? process.env.EDITOR_URL\n    : '';\n}\n\nexport function getOpenInEditorURL(): string {\n  try {\n    const raw = localStorageGetItem(LOCAL_STORAGE_OPEN_IN_EDITOR_URL);\n    if (raw != null) {\n      return JSON.parse(raw);\n    }\n  } catch (error) {}\n  return getDefaultOpenInEditorURL();\n}\n\ntype ParseElementDisplayNameFromBackendReturn = {\n  formattedDisplayName: string | null,\n  hocDisplayNames: Array<string> | null,\n  compiledWithForget: boolean,\n};\nexport function parseElementDisplayNameFromBackend(\n  displayName: string | null,\n  type: ElementType,\n): ParseElementDisplayNameFromBackendReturn {\n  if (displayName === null) {\n    return {\n      formattedDisplayName: null,\n      hocDisplayNames: null,\n      compiledWithForget: false,\n    };\n  }\n\n  if (displayName.startsWith('Forget(')) {\n    const displayNameWithoutForgetWrapper = displayName.slice(\n      7,\n      displayName.length - 1,\n    );\n\n    const {formattedDisplayName, hocDisplayNames} =\n      parseElementDisplayNameFromBackend(displayNameWithoutForgetWrapper, type);\n    return {formattedDisplayName, hocDisplayNames, compiledWithForget: true};\n  }\n\n  let hocDisplayNames = null;\n  switch (type) {\n    case ElementTypeClass:\n    case ElementTypeForwardRef:\n    case ElementTypeFunction:\n    case ElementTypeMemo:\n    case ElementTypeVirtual:\n      if (displayName.indexOf('(') >= 0) {\n        const matches = displayName.match(/[^()]+/g);\n        if (matches != null) {\n          // $FlowFixMe[incompatible-type]\n          displayName = matches.pop();\n          hocDisplayNames = matches;\n        }\n      }\n      break;\n    default:\n      break;\n  }\n\n  return {\n    // $FlowFixMe[incompatible-return]\n    formattedDisplayName: displayName,\n    hocDisplayNames,\n    compiledWithForget: false,\n  };\n}\n\n// Pulled from react-compat\n// https://github.com/developit/preact-compat/blob/7c5de00e7c85e2ffd011bf3af02899b63f699d3a/src/index.js#L349\nexport function shallowDiffers(prev: Object, next: Object): boolean {\n  for (const attribute in prev) {\n    if (!(attribute in next)) {\n      return true;\n    }\n  }\n  for (const attribute in next) {\n    if (prev[attribute] !== next[attribute]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function getInObject(object: Object, path: Array<string | number>): any {\n  return path.reduce((reduced: Object, attr: any): any => {\n    if (reduced) {\n      if (hasOwnProperty.call(reduced, attr)) {\n        return reduced[attr];\n      }\n      if (typeof reduced[Symbol.iterator] === 'function') {\n        // Convert iterable to array and return array[index]\n        //\n        // TRICKY\n        // Don't use [...spread] syntax for this purpose.\n        // This project uses @babel/plugin-transform-spread in \"loose\" mode which only works with Array values.\n        // Other types (e.g. typed arrays, Sets) will not spread correctly.\n        return Array.from(reduced)[attr];\n      }\n    }\n\n    return null;\n  }, object);\n}\n\nexport function deletePathInObject(\n  object: Object,\n  path: Array<string | number>,\n) {\n  const length = path.length;\n  const last = path[length - 1];\n  if (object != null) {\n    const parent = getInObject(object, path.slice(0, length - 1));\n    if (parent) {\n      if (isArray(parent)) {\n        parent.splice(((last: any): number), 1);\n      } else {\n        delete parent[last];\n      }\n    }\n  }\n}\n\nexport function renamePathInObject(\n  object: Object,\n  oldPath: Array<string | number>,\n  newPath: Array<string | number>,\n) {\n  const length = oldPath.length;\n  if (object != null) {\n    const parent = getInObject(object, oldPath.slice(0, length - 1));\n    if (parent) {\n      const lastOld = oldPath[length - 1];\n      const lastNew = newPath[length - 1];\n      parent[lastNew] = parent[lastOld];\n      if (isArray(parent)) {\n        parent.splice(((lastOld: any): number), 1);\n      } else {\n        delete parent[lastOld];\n      }\n    }\n  }\n}\n\nexport function setInObject(\n  object: Object,\n  path: Array<string | number>,\n  value: any,\n) {\n  const length = path.length;\n  const last = path[length - 1];\n  if (object != null) {\n    const parent = getInObject(object, path.slice(0, length - 1));\n    if (parent) {\n      parent[last] = value;\n    }\n  }\n}\n\nexport type DataType =\n  | 'array'\n  | 'array_buffer'\n  | 'bigint'\n  | 'boolean'\n  | 'class_instance'\n  | 'data_view'\n  | 'date'\n  | 'function'\n  | 'html_all_collection'\n  | 'html_element'\n  | 'infinity'\n  | 'iterator'\n  | 'opaque_iterator'\n  | 'nan'\n  | 'null'\n  | 'number'\n  | 'object'\n  | 'react_element'\n  | 'regexp'\n  | 'string'\n  | 'symbol'\n  | 'typed_array'\n  | 'undefined'\n  | 'unknown';\n\n/**\n * Get a enhanced/artificial type string based on the object instance\n */\nexport function getDataType(data: Object): DataType {\n  if (data === null) {\n    return 'null';\n  } else if (data === undefined) {\n    return 'undefined';\n  }\n\n  if (typeof HTMLElement !== 'undefined' && data instanceof HTMLElement) {\n    return 'html_element';\n  }\n\n  const type = typeof data;\n  switch (type) {\n    case 'bigint':\n      return 'bigint';\n    case 'boolean':\n      return 'boolean';\n    case 'function':\n      return 'function';\n    case 'number':\n      if (Number.isNaN(data)) {\n        return 'nan';\n      } else if (!Number.isFinite(data)) {\n        return 'infinity';\n      } else {\n        return 'number';\n      }\n    case 'object':\n      if (\n        data.$$typeof === REACT_ELEMENT_TYPE ||\n        data.$$typeof === REACT_LEGACY_ELEMENT_TYPE\n      ) {\n        return 'react_element';\n      }\n      if (isArray(data)) {\n        return 'array';\n      } else if (ArrayBuffer.isView(data)) {\n        return hasOwnProperty.call(data.constructor, 'BYTES_PER_ELEMENT')\n          ? 'typed_array'\n          : 'data_view';\n      } else if (data.constructor && data.constructor.name === 'ArrayBuffer') {\n        // HACK This ArrayBuffer check is gross; is there a better way?\n        // We could try to create a new DataView with the value.\n        // If it doesn't error, we know it's an ArrayBuffer,\n        // but this seems kind of awkward and expensive.\n        return 'array_buffer';\n      } else if (typeof data[Symbol.iterator] === 'function') {\n        const iterator = data[Symbol.iterator]();\n        if (!iterator) {\n          // Proxies might break assumptoins about iterators.\n          // See github.com/facebook/react/issues/21654\n        } else {\n          return iterator === data ? 'opaque_iterator' : 'iterator';\n        }\n      } else if (data.constructor && data.constructor.name === 'RegExp') {\n        return 'regexp';\n      } else {\n        // $FlowFixMe[method-unbinding]\n        const toStringValue = Object.prototype.toString.call(data);\n        if (toStringValue === '[object Date]') {\n          return 'date';\n        } else if (toStringValue === '[object HTMLAllCollection]') {\n          return 'html_all_collection';\n        }\n      }\n\n      if (!isPlainObject(data)) {\n        return 'class_instance';\n      }\n\n      return 'object';\n    case 'string':\n      return 'string';\n    case 'symbol':\n      return 'symbol';\n    case 'undefined':\n      if (\n        // $FlowFixMe[method-unbinding]\n        Object.prototype.toString.call(data) === '[object HTMLAllCollection]'\n      ) {\n        return 'html_all_collection';\n      }\n      return 'undefined';\n    default:\n      return 'unknown';\n  }\n}\n\n// Fork of packages/react-is/src/ReactIs.js:30, but with legacy element type\n// Which has been changed in https://github.com/facebook/react/pull/28813\nfunction typeOfWithLegacyElementSymbol(object: any): mixed {\n  if (typeof object === 'object' && object !== null) {\n    const $$typeof = object.$$typeof;\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n      case REACT_LEGACY_ELEMENT_TYPE:\n        const type = object.type;\n\n        switch (type) {\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n          case REACT_SUSPENSE_LIST_TYPE:\n          case REACT_VIEW_TRANSITION_TYPE:\n            return type;\n          default:\n            const $$typeofType = type && type.$$typeof;\n\n            switch ($$typeofType) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n                return $$typeofType;\n              case REACT_CONSUMER_TYPE:\n                if (enableRenderableContext) {\n                  return $$typeofType;\n                }\n              // Fall through\n              case REACT_PROVIDER_TYPE:\n                if (!enableRenderableContext) {\n                  return $$typeofType;\n                }\n              // Fall through\n              default:\n                return $$typeof;\n            }\n        }\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n\n  return undefined;\n}\n\nexport function getDisplayNameForReactElement(\n  element: React$Element<any>,\n): string | null {\n  const elementType = typeOfWithLegacyElementSymbol(element);\n  switch (elementType) {\n    case REACT_CONSUMER_TYPE:\n      return 'ContextConsumer';\n    case REACT_PROVIDER_TYPE:\n      return 'ContextProvider';\n    case REACT_CONTEXT_TYPE:\n      return 'Context';\n    case REACT_FORWARD_REF_TYPE:\n      return 'ForwardRef';\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n    case REACT_LAZY_TYPE:\n      return 'Lazy';\n    case REACT_MEMO_TYPE:\n      return 'Memo';\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n    case REACT_VIEW_TRANSITION_TYPE:\n      return 'ViewTransition';\n    case REACT_TRACING_MARKER_TYPE:\n      return 'TracingMarker';\n    default:\n      const {type} = element;\n      if (typeof type === 'string') {\n        return type;\n      } else if (typeof type === 'function') {\n        return getDisplayName(type, 'Anonymous');\n      } else if (type != null) {\n        return 'NotImplementedInDevtools';\n      } else {\n        return 'Element';\n      }\n  }\n}\n\nconst MAX_PREVIEW_STRING_LENGTH = 50;\n\nfunction truncateForDisplay(\n  string: string,\n  length: number = MAX_PREVIEW_STRING_LENGTH,\n) {\n  if (string.length > length) {\n    return string.slice(0, length) + '…';\n  } else {\n    return string;\n  }\n}\n\n// Attempts to mimic Chrome's inline preview for values.\n// For example, the following value...\n//   {\n//      foo: 123,\n//      bar: \"abc\",\n//      baz: [true, false],\n//      qux: { ab: 1, cd: 2 }\n//   };\n//\n// Would show a preview of...\n//   {foo: 123, bar: \"abc\", baz: Array(2), qux: {…}}\n//\n// And the following value...\n//   [\n//     123,\n//     \"abc\",\n//     [true, false],\n//     { foo: 123, bar: \"abc\" }\n//   ];\n//\n// Would show a preview of...\n//   [123, \"abc\", Array(2), {…}]\nexport function formatDataForPreview(\n  data: any,\n  showFormattedValue: boolean,\n): string {\n  if (data != null && hasOwnProperty.call(data, meta.type)) {\n    return showFormattedValue\n      ? data[meta.preview_long]\n      : data[meta.preview_short];\n  }\n\n  const type = getDataType(data);\n\n  switch (type) {\n    case 'html_element':\n      return `<${truncateForDisplay(data.tagName.toLowerCase())} />`;\n    case 'function':\n      if (typeof data.name === 'function' || data.name === '') {\n        return '() => {}';\n      }\n      return `${truncateForDisplay(data.name)}() {}`;\n    case 'string':\n      return `\"${data}\"`;\n    case 'bigint':\n      return truncateForDisplay(data.toString() + 'n');\n    case 'regexp':\n      return truncateForDisplay(data.toString());\n    case 'symbol':\n      return truncateForDisplay(data.toString());\n    case 'react_element':\n      return `<${truncateForDisplay(\n        getDisplayNameForReactElement(data) || 'Unknown',\n      )} />`;\n    case 'array_buffer':\n      return `ArrayBuffer(${data.byteLength})`;\n    case 'data_view':\n      return `DataView(${data.buffer.byteLength})`;\n    case 'array':\n      if (showFormattedValue) {\n        let formatted = '';\n        for (let i = 0; i < data.length; i++) {\n          if (i > 0) {\n            formatted += ', ';\n          }\n          formatted += formatDataForPreview(data[i], false);\n          if (formatted.length > MAX_PREVIEW_STRING_LENGTH) {\n            // Prevent doing a lot of unnecessary iteration...\n            break;\n          }\n        }\n        return `[${truncateForDisplay(formatted)}]`;\n      } else {\n        const length = hasOwnProperty.call(data, meta.size)\n          ? data[meta.size]\n          : data.length;\n        return `Array(${length})`;\n      }\n    case 'typed_array':\n      const shortName = `${data.constructor.name}(${data.length})`;\n      if (showFormattedValue) {\n        let formatted = '';\n        for (let i = 0; i < data.length; i++) {\n          if (i > 0) {\n            formatted += ', ';\n          }\n          formatted += data[i];\n          if (formatted.length > MAX_PREVIEW_STRING_LENGTH) {\n            // Prevent doing a lot of unnecessary iteration...\n            break;\n          }\n        }\n        return `${shortName} [${truncateForDisplay(formatted)}]`;\n      } else {\n        return shortName;\n      }\n    case 'iterator':\n      const name = data.constructor.name;\n\n      if (showFormattedValue) {\n        // TRICKY\n        // Don't use [...spread] syntax for this purpose.\n        // This project uses @babel/plugin-transform-spread in \"loose\" mode which only works with Array values.\n        // Other types (e.g. typed arrays, Sets) will not spread correctly.\n        const array = Array.from(data);\n\n        let formatted = '';\n        for (let i = 0; i < array.length; i++) {\n          const entryOrEntries = array[i];\n\n          if (i > 0) {\n            formatted += ', ';\n          }\n\n          // TRICKY\n          // Browsers display Maps and Sets differently.\n          // To mimic their behavior, detect if we've been given an entries tuple.\n          //   Map(2) {\"abc\" => 123, \"def\" => 123}\n          //   Set(2) {\"abc\", 123}\n          if (isArray(entryOrEntries)) {\n            const key = formatDataForPreview(entryOrEntries[0], true);\n            const value = formatDataForPreview(entryOrEntries[1], false);\n            formatted += `${key} => ${value}`;\n          } else {\n            formatted += formatDataForPreview(entryOrEntries, false);\n          }\n\n          if (formatted.length > MAX_PREVIEW_STRING_LENGTH) {\n            // Prevent doing a lot of unnecessary iteration...\n            break;\n          }\n        }\n\n        return `${name}(${data.size}) {${truncateForDisplay(formatted)}}`;\n      } else {\n        return `${name}(${data.size})`;\n      }\n    case 'opaque_iterator': {\n      return data[Symbol.toStringTag];\n    }\n    case 'date':\n      return data.toString();\n    case 'class_instance':\n      return data.constructor.name;\n    case 'object':\n      if (showFormattedValue) {\n        const keys = Array.from(getAllEnumerableKeys(data)).sort(alphaSortKeys);\n\n        let formatted = '';\n        for (let i = 0; i < keys.length; i++) {\n          const key = keys[i];\n          if (i > 0) {\n            formatted += ', ';\n          }\n          formatted += `${key.toString()}: ${formatDataForPreview(\n            data[key],\n            false,\n          )}`;\n          if (formatted.length > MAX_PREVIEW_STRING_LENGTH) {\n            // Prevent doing a lot of unnecessary iteration...\n            break;\n          }\n        }\n        return `{${truncateForDisplay(formatted)}}`;\n      } else {\n        return '{…}';\n      }\n    case 'boolean':\n    case 'number':\n    case 'infinity':\n    case 'nan':\n    case 'null':\n    case 'undefined':\n      return data;\n    default:\n      try {\n        return truncateForDisplay(String(data));\n      } catch (error) {\n        return 'unserializable';\n      }\n  }\n}\n\n// Basically checking that the object only has Object in its prototype chain\nexport const isPlainObject = (object: Object): boolean => {\n  const objectPrototype = Object.getPrototypeOf(object);\n  if (!objectPrototype) return true;\n\n  const objectParentPrototype = Object.getPrototypeOf(objectPrototype);\n  return !objectParentPrototype;\n};\n\nexport function backendToFrontendSerializedElementMapper(\n  element: SerializedElementBackend,\n): SerializedElementFrontend {\n  const {formattedDisplayName, hocDisplayNames, compiledWithForget} =\n    parseElementDisplayNameFromBackend(element.displayName, element.type);\n\n  return {\n    ...element,\n    displayName: formattedDisplayName,\n    hocDisplayNames,\n    compiledWithForget,\n  };\n}\n\n// Chrome normalizes urls like webpack-internals:// but new URL don't, so cannot use new URL here.\nexport function normalizeUrl(url: string): string {\n  return url.replace('/./', '/');\n}\n\nexport function getIsReloadAndProfileSupported(): boolean {\n  // Notify the frontend if the backend supports the Storage API (e.g. localStorage).\n  // If not, features like reload-and-profile will not work correctly and must be disabled.\n  let isBackendStorageAPISupported = false;\n  try {\n    localStorage.getItem('test');\n    isBackendStorageAPISupported = true;\n  } catch (error) {}\n\n  return isBackendStorageAPISupported && isSynchronousXHRSupported();\n}\n\n// Expected to be used only by browser extension and react-devtools-inline\nexport function getIfReloadedAndProfiling(): boolean {\n  return (\n    sessionStorageGetItem(SESSION_STORAGE_RELOAD_AND_PROFILE_KEY) === 'true'\n  );\n}\n\nexport function getProfilingSettings(): ProfilingSettings {\n  return {\n    recordChangeDescriptions:\n      sessionStorageGetItem(SESSION_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY) ===\n      'true',\n    recordTimeline:\n      sessionStorageGetItem(SESSION_STORAGE_RECORD_TIMELINE_KEY) === 'true',\n  };\n}\n\nexport function onReloadAndProfile(\n  recordChangeDescriptions: boolean,\n  recordTimeline: boolean,\n): void {\n  sessionStorageSetItem(SESSION_STORAGE_RELOAD_AND_PROFILE_KEY, 'true');\n  sessionStorageSetItem(\n    SESSION_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY,\n    recordChangeDescriptions ? 'true' : 'false',\n  );\n  sessionStorageSetItem(\n    SESSION_STORAGE_RECORD_TIMELINE_KEY,\n    recordTimeline ? 'true' : 'false',\n  );\n}\n\nexport function onReloadAndProfileFlagsReset(): void {\n  sessionStorageRemoveItem(SESSION_STORAGE_RELOAD_AND_PROFILE_KEY);\n  sessionStorageRemoveItem(SESSION_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY);\n  sessionStorageRemoveItem(SESSION_STORAGE_RECORD_TIMELINE_KEY);\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {renameElementSymbol} from 'shared/ReactFeatureFlags';\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n\n// The Symbol used to tag the ReactElement-like types.\nexport const REACT_LEGACY_ELEMENT_TYPE: symbol = Symbol.for('react.element');\nexport const REACT_ELEMENT_TYPE: symbol = renameElementSymbol\n  ? Symbol.for('react.transitional.element')\n  : REACT_LEGACY_ELEMENT_TYPE;\nexport const REACT_PORTAL_TYPE: symbol = Symbol.for('react.portal');\nexport const REACT_FRAGMENT_TYPE: symbol = Symbol.for('react.fragment');\nexport const REACT_STRICT_MODE_TYPE: symbol = Symbol.for('react.strict_mode');\nexport const REACT_PROFILER_TYPE: symbol = Symbol.for('react.profiler');\nexport const REACT_PROVIDER_TYPE: symbol = Symbol.for('react.provider'); // TODO: Delete with enableRenderableContext\nexport const REACT_CONSUMER_TYPE: symbol = Symbol.for('react.consumer');\nexport const REACT_CONTEXT_TYPE: symbol = Symbol.for('react.context');\nexport const REACT_FORWARD_REF_TYPE: symbol = Symbol.for('react.forward_ref');\nexport const REACT_SUSPENSE_TYPE: symbol = Symbol.for('react.suspense');\nexport const REACT_SUSPENSE_LIST_TYPE: symbol = Symbol.for(\n  'react.suspense_list',\n);\nexport const REACT_MEMO_TYPE: symbol = Symbol.for('react.memo');\nexport const REACT_LAZY_TYPE: symbol = Symbol.for('react.lazy');\nexport const REACT_SCOPE_TYPE: symbol = Symbol.for('react.scope');\nexport const REACT_OFFSCREEN_TYPE: symbol = Symbol.for('react.offscreen');\nexport const REACT_LEGACY_HIDDEN_TYPE: symbol = Symbol.for(\n  'react.legacy_hidden',\n);\nexport const REACT_TRACING_MARKER_TYPE: symbol = Symbol.for(\n  'react.tracing_marker',\n);\n\nexport const REACT_MEMO_CACHE_SENTINEL: symbol = Symbol.for(\n  'react.memo_cache_sentinel',\n);\n\nexport const REACT_POSTPONE_TYPE: symbol = Symbol.for('react.postpone');\n\nexport const REACT_VIEW_TRANSITION_TYPE: symbol = Symbol.for(\n  'react.view_transition',\n);\n\nconst MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nconst FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nexport function getIteratorFn(maybeIterable: ?any): ?() => ?Iterator<any> {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n  const maybeIterator =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[FAUX_ITERATOR_SYMBOL];\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n  return null;\n}\n\nexport const ASYNC_ITERATOR = Symbol.asyncIterator;\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {\n  getDataType,\n  getDisplayNameForReactElement,\n  getAllEnumerableKeys,\n  getInObject,\n  formatDataForPreview,\n  setInObject,\n} from 'react-devtools-shared/src/utils';\n\nimport type {\n  DehydratedData,\n  InspectedElementPath,\n} from 'react-devtools-shared/src/frontend/types';\n\nexport const meta = {\n  inspectable: (Symbol('inspectable'): symbol),\n  inspected: (Symbol('inspected'): symbol),\n  name: (Symbol('name'): symbol),\n  preview_long: (Symbol('preview_long'): symbol),\n  preview_short: (Symbol('preview_short'): symbol),\n  readonly: (Symbol('readonly'): symbol),\n  size: (Symbol('size'): symbol),\n  type: (Symbol('type'): symbol),\n  unserializable: (Symbol('unserializable'): symbol),\n};\n\nexport type Dehydrated = {\n  inspectable: boolean,\n  name: string | null,\n  preview_long: string | null,\n  preview_short: string | null,\n  readonly?: boolean,\n  size?: number,\n  type: string,\n};\n\n// Typed arrays and other complex iteratable objects (e.g. Map, Set, ImmutableJS) need special handling.\n// These objects can't be serialized without losing type information,\n// so a \"Unserializable\" type wrapper is used (with meta-data keys) to send nested values-\n// while preserving the original type and name.\nexport type Unserializable = {\n  name: string | null,\n  preview_long: string | null,\n  preview_short: string | null,\n  readonly?: boolean,\n  size?: number,\n  type: string,\n  unserializable: boolean,\n  [string | number]: any,\n};\n\n// This threshold determines the depth at which the bridge \"dehydrates\" nested data.\n// Dehydration means that we don't serialize the data for e.g. postMessage or stringify,\n// unless the frontend explicitly requests it (e.g. a user clicks to expand a props object).\n//\n// Reducing this threshold will improve the speed of initial component inspection,\n// but may decrease the responsiveness of expanding objects/arrays to inspect further.\nconst LEVEL_THRESHOLD = 2;\n\n/**\n * Generate the dehydrated metadata for complex object instances\n */\nfunction createDehydrated(\n  type: string,\n  inspectable: boolean,\n  data: Object,\n  cleaned: Array<Array<string | number>>,\n  path: Array<string | number>,\n): Dehydrated {\n  cleaned.push(path);\n\n  const dehydrated: Dehydrated = {\n    inspectable,\n    type,\n    preview_long: formatDataForPreview(data, true),\n    preview_short: formatDataForPreview(data, false),\n    name:\n      typeof data.constructor !== 'function' ||\n      typeof data.constructor.name !== 'string' ||\n      data.constructor.name === 'Object'\n        ? ''\n        : data.constructor.name,\n  };\n\n  if (type === 'array' || type === 'typed_array') {\n    dehydrated.size = data.length;\n  } else if (type === 'object') {\n    dehydrated.size = Object.keys(data).length;\n  }\n\n  if (type === 'iterator' || type === 'typed_array') {\n    dehydrated.readonly = true;\n  }\n\n  return dehydrated;\n}\n\n/**\n * Strip out complex data (instances, functions, and data nested > LEVEL_THRESHOLD levels deep).\n * The paths of the stripped out objects are appended to the `cleaned` list.\n * On the other side of the barrier, the cleaned list is used to \"re-hydrate\" the cleaned representation into\n * an object with symbols as attributes, so that a sanitized object can be distinguished from a normal object.\n *\n * Input: {\"some\": {\"attr\": fn()}, \"other\": AnInstance}\n * Output: {\n *   \"some\": {\n *     \"attr\": {\"name\": the fn.name, type: \"function\"}\n *   },\n *   \"other\": {\n *     \"name\": \"AnInstance\",\n *     \"type\": \"object\",\n *   },\n * }\n * and cleaned = [[\"some\", \"attr\"], [\"other\"]]\n */\nexport function dehydrate(\n  data: Object,\n  cleaned: Array<Array<string | number>>,\n  unserializable: Array<Array<string | number>>,\n  path: Array<string | number>,\n  isPathAllowed: (path: Array<string | number>) => boolean,\n  level: number = 0,\n): $PropertyType<DehydratedData, 'data'> {\n  const type = getDataType(data);\n\n  let isPathAllowedCheck;\n\n  switch (type) {\n    case 'html_element':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: data.tagName,\n        type,\n      };\n\n    case 'function':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name:\n          typeof data.name === 'function' || !data.name\n            ? 'function'\n            : data.name,\n        type,\n      };\n\n    case 'string':\n      isPathAllowedCheck = isPathAllowed(path);\n      if (isPathAllowedCheck) {\n        return data;\n      } else {\n        return data.length <= 500 ? data : data.slice(0, 500) + '...';\n      }\n\n    case 'bigint':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: data.toString(),\n        type,\n      };\n\n    case 'symbol':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: data.toString(),\n        type,\n      };\n\n    // React Elements aren't very inspector-friendly,\n    // and often contain private fields or circular references.\n    case 'react_element':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: getDisplayNameForReactElement(data) || 'Unknown',\n        type,\n      };\n\n    // ArrayBuffers error if you try to inspect them.\n    case 'array_buffer':\n    case 'data_view':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: type === 'data_view' ? 'DataView' : 'ArrayBuffer',\n        size: data.byteLength,\n        type,\n      };\n\n    case 'array':\n      isPathAllowedCheck = isPathAllowed(path);\n      if (level >= LEVEL_THRESHOLD && !isPathAllowedCheck) {\n        return createDehydrated(type, true, data, cleaned, path);\n      }\n      const arr: Array<Object> = [];\n      for (let i = 0; i < data.length; i++) {\n        arr[i] = dehydrateKey(\n          data,\n          i,\n          cleaned,\n          unserializable,\n          path.concat([i]),\n          isPathAllowed,\n          isPathAllowedCheck ? 1 : level + 1,\n        );\n      }\n      return arr;\n\n    case 'html_all_collection':\n    case 'typed_array':\n    case 'iterator':\n      isPathAllowedCheck = isPathAllowed(path);\n      if (level >= LEVEL_THRESHOLD && !isPathAllowedCheck) {\n        return createDehydrated(type, true, data, cleaned, path);\n      } else {\n        const unserializableValue: Unserializable = {\n          unserializable: true,\n          type: type,\n          readonly: true,\n          size: type === 'typed_array' ? data.length : undefined,\n          preview_short: formatDataForPreview(data, false),\n          preview_long: formatDataForPreview(data, true),\n          name:\n            typeof data.constructor !== 'function' ||\n            typeof data.constructor.name !== 'string' ||\n            data.constructor.name === 'Object'\n              ? ''\n              : data.constructor.name,\n        };\n\n        // TRICKY\n        // Don't use [...spread] syntax for this purpose.\n        // This project uses @babel/plugin-transform-spread in \"loose\" mode which only works with Array values.\n        // Other types (e.g. typed arrays, Sets) will not spread correctly.\n        Array.from(data).forEach(\n          (item, i) =>\n            (unserializableValue[i] = dehydrate(\n              item,\n              cleaned,\n              unserializable,\n              path.concat([i]),\n              isPathAllowed,\n              isPathAllowedCheck ? 1 : level + 1,\n            )),\n        );\n\n        unserializable.push(path);\n\n        return unserializableValue;\n      }\n\n    case 'opaque_iterator':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: data[Symbol.toStringTag],\n        type,\n      };\n\n    case 'date':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: data.toString(),\n        type,\n      };\n\n    case 'regexp':\n      cleaned.push(path);\n      return {\n        inspectable: false,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name: data.toString(),\n        type,\n      };\n\n    case 'object':\n      isPathAllowedCheck = isPathAllowed(path);\n\n      if (level >= LEVEL_THRESHOLD && !isPathAllowedCheck) {\n        return createDehydrated(type, true, data, cleaned, path);\n      } else {\n        const object: {\n          [string]: $PropertyType<DehydratedData, 'data'>,\n        } = {};\n        getAllEnumerableKeys(data).forEach(key => {\n          const name = key.toString();\n          object[name] = dehydrateKey(\n            data,\n            key,\n            cleaned,\n            unserializable,\n            path.concat([name]),\n            isPathAllowed,\n            isPathAllowedCheck ? 1 : level + 1,\n          );\n        });\n        return object;\n      }\n\n    case 'class_instance':\n      isPathAllowedCheck = isPathAllowed(path);\n\n      if (level >= LEVEL_THRESHOLD && !isPathAllowedCheck) {\n        return createDehydrated(type, true, data, cleaned, path);\n      }\n\n      const value: Unserializable = {\n        unserializable: true,\n        type,\n        readonly: true,\n        preview_short: formatDataForPreview(data, false),\n        preview_long: formatDataForPreview(data, true),\n        name:\n          typeof data.constructor !== 'function' ||\n          typeof data.constructor.name !== 'string'\n            ? ''\n            : data.constructor.name,\n      };\n\n      getAllEnumerableKeys(data).forEach(key => {\n        const keyAsString = key.toString();\n\n        value[keyAsString] = dehydrate(\n          data[key],\n          cleaned,\n          unserializable,\n          path.concat([keyAsString]),\n          isPathAllowed,\n          isPathAllowedCheck ? 1 : level + 1,\n        );\n      });\n\n      unserializable.push(path);\n\n      return value;\n\n    case 'infinity':\n    case 'nan':\n    case 'undefined':\n      // Some values are lossy when sent through a WebSocket.\n      // We dehydrate+rehydrate them to preserve their type.\n      cleaned.push(path);\n      return {type};\n\n    default:\n      return data;\n  }\n}\n\nfunction dehydrateKey(\n  parent: Object,\n  key: number | string | symbol,\n  cleaned: Array<Array<string | number>>,\n  unserializable: Array<Array<string | number>>,\n  path: Array<string | number>,\n  isPathAllowed: (path: Array<string | number>) => boolean,\n  level: number = 0,\n): $PropertyType<DehydratedData, 'data'> {\n  try {\n    return dehydrate(\n      parent[key],\n      cleaned,\n      unserializable,\n      path,\n      isPathAllowed,\n      level,\n    );\n  } catch (error) {\n    let preview = '';\n    if (\n      typeof error === 'object' &&\n      error !== null &&\n      typeof error.stack === 'string'\n    ) {\n      preview = error.stack;\n    } else if (typeof error === 'string') {\n      preview = error;\n    }\n    cleaned.push(path);\n    return {\n      inspectable: false,\n      preview_short: '[Exception]',\n      preview_long: preview ? '[Exception: ' + preview + ']' : '[Exception]',\n      name: preview,\n      type: 'unknown',\n    };\n  }\n}\n\nexport function fillInPath(\n  object: Object,\n  data: DehydratedData,\n  path: InspectedElementPath,\n  value: any,\n) {\n  const target = getInObject(object, path);\n  if (target != null) {\n    if (!target[meta.unserializable]) {\n      delete target[meta.inspectable];\n      delete target[meta.inspected];\n      delete target[meta.name];\n      delete target[meta.preview_long];\n      delete target[meta.preview_short];\n      delete target[meta.readonly];\n      delete target[meta.size];\n      delete target[meta.type];\n    }\n  }\n\n  if (value !== null && data.unserializable.length > 0) {\n    const unserializablePath = data.unserializable[0];\n    let isMatch = unserializablePath.length === path.length;\n    for (let i = 0; i < path.length; i++) {\n      if (path[i] !== unserializablePath[i]) {\n        isMatch = false;\n        break;\n      }\n    }\n    if (isMatch) {\n      upgradeUnserializable(value, value);\n    }\n  }\n\n  setInObject(object, path, value);\n}\n\nexport function hydrate(\n  object: any,\n  cleaned: Array<Array<string | number>>,\n  unserializable: Array<Array<string | number>>,\n): Object {\n  cleaned.forEach((path: Array<string | number>) => {\n    const length = path.length;\n    const last = path[length - 1];\n    const parent = getInObject(object, path.slice(0, length - 1));\n    if (!parent || !parent.hasOwnProperty(last)) {\n      return;\n    }\n\n    const value = parent[last];\n\n    if (!value) {\n      return;\n    } else if (value.type === 'infinity') {\n      parent[last] = Infinity;\n    } else if (value.type === 'nan') {\n      parent[last] = NaN;\n    } else if (value.type === 'undefined') {\n      parent[last] = undefined;\n    } else {\n      // Replace the string keys with Symbols so they're non-enumerable.\n      const replaced: {[key: symbol]: boolean | string} = {};\n      replaced[meta.inspectable] = !!value.inspectable;\n      replaced[meta.inspected] = false;\n      replaced[meta.name] = value.name;\n      replaced[meta.preview_long] = value.preview_long;\n      replaced[meta.preview_short] = value.preview_short;\n      replaced[meta.size] = value.size;\n      replaced[meta.readonly] = !!value.readonly;\n      replaced[meta.type] = value.type;\n\n      parent[last] = replaced;\n    }\n  });\n  unserializable.forEach((path: Array<string | number>) => {\n    const length = path.length;\n    const last = path[length - 1];\n    const parent = getInObject(object, path.slice(0, length - 1));\n    if (!parent || !parent.hasOwnProperty(last)) {\n      return;\n    }\n\n    const node = parent[last];\n\n    const replacement = {\n      ...node,\n    };\n\n    upgradeUnserializable(replacement, node);\n\n    parent[last] = replacement;\n  });\n  return object;\n}\n\nfunction upgradeUnserializable(destination: Object, source: Object) {\n  Object.defineProperties(destination, {\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.inspected]: {\n      configurable: true,\n      enumerable: false,\n      value: !!source.inspected,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.name]: {\n      configurable: true,\n      enumerable: false,\n      value: source.name,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.preview_long]: {\n      configurable: true,\n      enumerable: false,\n      value: source.preview_long,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.preview_short]: {\n      configurable: true,\n      enumerable: false,\n      value: source.preview_short,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.size]: {\n      configurable: true,\n      enumerable: false,\n      value: source.size,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.readonly]: {\n      configurable: true,\n      enumerable: false,\n      value: !!source.readonly,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.type]: {\n      configurable: true,\n      enumerable: false,\n      value: source.type,\n    },\n    // $FlowFixMe[invalid-computed-prop]\n    [meta.unserializable]: {\n      configurable: true,\n      enumerable: false,\n      value: !!source.unserializable,\n    },\n  });\n\n  delete destination.inspected;\n  delete destination.name;\n  delete destination.preview_long;\n  delete destination.preview_short;\n  delete destination.size;\n  delete destination.readonly;\n  delete destination.type;\n  delete destination.unserializable;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nconst isArray = Array.isArray;\n\nexport default isArray;\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\ndeclare function isArray(a: mixed): boolean %checks(Array.isArray(a));\n\nconst isArrayImpl = Array.isArray;\n\nfunction isArray(a: mixed): boolean {\n  return isArrayImpl(a);\n}\n\nexport default isArray;\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {PROFILER_EXPORT_VERSION} from 'react-devtools-shared/src/constants';\nimport {backendToFrontendSerializedElementMapper} from 'react-devtools-shared/src/utils';\n\nimport type {ProfilingDataBackend} from 'react-devtools-shared/src/backend/types';\nimport type {\n  ProfilingDataExport,\n  ProfilingDataForRootExport,\n  ProfilingDataForRootFrontend,\n  ProfilingDataFrontend,\n  SnapshotNode,\n} from './types';\nimport type {\n  TimelineData,\n  TimelineDataExport,\n} from 'react-devtools-timeline/src/types';\n\nconst commitGradient = [\n  'var(--color-commit-gradient-0)',\n  'var(--color-commit-gradient-1)',\n  'var(--color-commit-gradient-2)',\n  'var(--color-commit-gradient-3)',\n  'var(--color-commit-gradient-4)',\n  'var(--color-commit-gradient-5)',\n  'var(--color-commit-gradient-6)',\n  'var(--color-commit-gradient-7)',\n  'var(--color-commit-gradient-8)',\n  'var(--color-commit-gradient-9)',\n];\n\n// Combines info from the Store (frontend) and renderer interfaces (backend) into the format required by the Profiler UI.\n// This format can then be quickly exported (and re-imported).\nexport function prepareProfilingDataFrontendFromBackendAndStore(\n  dataBackends: Array<ProfilingDataBackend>,\n  operationsByRootID: Map<number, Array<Array<number>>>,\n  snapshotsByRootID: Map<number, Map<number, SnapshotNode>>,\n): ProfilingDataFrontend {\n  const dataForRoots: Map<number, ProfilingDataForRootFrontend> = new Map();\n\n  const timelineDataArray = [];\n\n  dataBackends.forEach(dataBackend => {\n    const {timelineData} = dataBackend;\n    if (timelineData != null) {\n      const {\n        batchUIDToMeasuresKeyValueArray,\n        internalModuleSourceToRanges,\n        laneToLabelKeyValueArray,\n        laneToReactMeasureKeyValueArray,\n        ...rest\n      } = timelineData;\n\n      timelineDataArray.push({\n        ...rest,\n\n        // Most of the data is safe to parse as-is,\n        // but we need to convert the nested Arrays back to Maps.\n        batchUIDToMeasuresMap: new Map(batchUIDToMeasuresKeyValueArray),\n        internalModuleSourceToRanges: new Map(internalModuleSourceToRanges),\n        laneToLabelMap: new Map(laneToLabelKeyValueArray),\n        laneToReactMeasureMap: new Map(laneToReactMeasureKeyValueArray),\n      });\n    }\n\n    dataBackend.dataForRoots.forEach(\n      ({commitData, displayName, initialTreeBaseDurations, rootID}) => {\n        const operations = operationsByRootID.get(rootID);\n        if (operations == null) {\n          throw Error(\n            `Could not find profiling operations for root \"${rootID}\"`,\n          );\n        }\n\n        const snapshots = snapshotsByRootID.get(rootID);\n        if (snapshots == null) {\n          throw Error(\n            `Could not find profiling snapshots for root \"${rootID}\"`,\n          );\n        }\n\n        // Do not filter empty commits from the profiler data!\n        // Hiding \"empty\" commits might cause confusion too.\n        // A commit *did happen* even if none of the components the Profiler is showing were involved.\n        const convertedCommitData = commitData.map(\n          (commitDataBackend, commitIndex) => ({\n            changeDescriptions:\n              commitDataBackend.changeDescriptions != null\n                ? new Map(commitDataBackend.changeDescriptions)\n                : null,\n            duration: commitDataBackend.duration,\n            effectDuration: commitDataBackend.effectDuration,\n            fiberActualDurations: new Map(\n              commitDataBackend.fiberActualDurations,\n            ),\n            fiberSelfDurations: new Map(commitDataBackend.fiberSelfDurations),\n            passiveEffectDuration: commitDataBackend.passiveEffectDuration,\n            priorityLevel: commitDataBackend.priorityLevel,\n            timestamp: commitDataBackend.timestamp,\n            updaters:\n              commitDataBackend.updaters !== null\n                ? commitDataBackend.updaters.map(\n                    backendToFrontendSerializedElementMapper,\n                  )\n                : null,\n          }),\n        );\n\n        dataForRoots.set(rootID, {\n          commitData: convertedCommitData,\n          displayName,\n          initialTreeBaseDurations: new Map(initialTreeBaseDurations),\n          operations,\n          rootID,\n          snapshots,\n        });\n      },\n    );\n  });\n\n  return {dataForRoots, imported: false, timelineData: timelineDataArray};\n}\n\n// Converts a Profiling data export into the format required by the Store.\nexport function prepareProfilingDataFrontendFromExport(\n  profilingDataExport: ProfilingDataExport,\n): ProfilingDataFrontend {\n  const {version} = profilingDataExport;\n\n  if (version !== PROFILER_EXPORT_VERSION) {\n    throw Error(\n      `Unsupported profile export version \"${version}\". Supported version is \"${PROFILER_EXPORT_VERSION}\".`,\n    );\n  }\n\n  const timelineData: Array<TimelineData> = profilingDataExport.timelineData\n    ? profilingDataExport.timelineData.map(\n        ({\n          batchUIDToMeasuresKeyValueArray,\n          componentMeasures,\n          duration,\n          flamechart,\n          internalModuleSourceToRanges,\n          laneToLabelKeyValueArray,\n          laneToReactMeasureKeyValueArray,\n          nativeEvents,\n          networkMeasures,\n          otherUserTimingMarks,\n          reactVersion,\n          schedulingEvents,\n          snapshots,\n          snapshotHeight,\n          startTime,\n          suspenseEvents,\n          thrownErrors,\n        }) => ({\n          // Most of the data is safe to parse as-is,\n          // but we need to convert the nested Arrays back to Maps.\n          batchUIDToMeasuresMap: new Map(batchUIDToMeasuresKeyValueArray),\n          componentMeasures,\n          duration,\n          flamechart,\n          internalModuleSourceToRanges: new Map(internalModuleSourceToRanges),\n          laneToLabelMap: new Map(laneToLabelKeyValueArray),\n          laneToReactMeasureMap: new Map(laneToReactMeasureKeyValueArray),\n          nativeEvents,\n          networkMeasures,\n          otherUserTimingMarks,\n          reactVersion,\n          schedulingEvents,\n          snapshots,\n          snapshotHeight,\n          startTime,\n          suspenseEvents,\n          thrownErrors,\n        }),\n      )\n    : [];\n\n  const dataForRoots: Map<number, ProfilingDataForRootFrontend> = new Map();\n  profilingDataExport.dataForRoots.forEach(\n    ({\n      commitData,\n      displayName,\n      initialTreeBaseDurations,\n      operations,\n      rootID,\n      snapshots,\n    }) => {\n      dataForRoots.set(rootID, {\n        commitData: commitData.map(\n          ({\n            changeDescriptions,\n            duration,\n            effectDuration,\n            fiberActualDurations,\n            fiberSelfDurations,\n            passiveEffectDuration,\n            priorityLevel,\n            timestamp,\n            updaters,\n          }) => ({\n            changeDescriptions:\n              changeDescriptions != null ? new Map(changeDescriptions) : null,\n            duration,\n            effectDuration,\n            fiberActualDurations: new Map(fiberActualDurations),\n            fiberSelfDurations: new Map(fiberSelfDurations),\n            passiveEffectDuration,\n            priorityLevel,\n            timestamp,\n            updaters,\n          }),\n        ),\n        displayName,\n        initialTreeBaseDurations: new Map(initialTreeBaseDurations),\n        operations,\n        rootID,\n        snapshots: new Map(snapshots),\n      });\n    },\n  );\n\n  return {\n    dataForRoots,\n    imported: true,\n    timelineData,\n  };\n}\n\n// Converts a Store Profiling data into a format that can be safely (JSON) serialized for export.\nexport function prepareProfilingDataExport(\n  profilingDataFrontend: ProfilingDataFrontend,\n): ProfilingDataExport {\n  const timelineData: Array<TimelineDataExport> =\n    profilingDataFrontend.timelineData.map(\n      ({\n        batchUIDToMeasuresMap,\n        componentMeasures,\n        duration,\n        flamechart,\n        internalModuleSourceToRanges,\n        laneToLabelMap,\n        laneToReactMeasureMap,\n        nativeEvents,\n        networkMeasures,\n        otherUserTimingMarks,\n        reactVersion,\n        schedulingEvents,\n        snapshots,\n        snapshotHeight,\n        startTime,\n        suspenseEvents,\n        thrownErrors,\n      }) => ({\n        // Most of the data is safe to serialize as-is,\n        // but we need to convert the Maps to nested Arrays.\n        batchUIDToMeasuresKeyValueArray: Array.from(\n          batchUIDToMeasuresMap.entries(),\n        ),\n        componentMeasures: componentMeasures,\n        duration,\n        flamechart,\n        internalModuleSourceToRanges: Array.from(\n          internalModuleSourceToRanges.entries(),\n        ),\n        laneToLabelKeyValueArray: Array.from(laneToLabelMap.entries()),\n        laneToReactMeasureKeyValueArray: Array.from(\n          laneToReactMeasureMap.entries(),\n        ),\n        nativeEvents,\n        networkMeasures,\n        otherUserTimingMarks,\n        reactVersion,\n        schedulingEvents,\n        snapshots,\n        snapshotHeight,\n        startTime,\n        suspenseEvents,\n        thrownErrors,\n      }),\n    );\n\n  const dataForRoots: Array<ProfilingDataForRootExport> = [];\n  profilingDataFrontend.dataForRoots.forEach(\n    ({\n      commitData,\n      displayName,\n      initialTreeBaseDurations,\n      operations,\n      rootID,\n      snapshots,\n    }) => {\n      dataForRoots.push({\n        commitData: commitData.map(\n          ({\n            changeDescriptions,\n            duration,\n            effectDuration,\n            fiberActualDurations,\n            fiberSelfDurations,\n            passiveEffectDuration,\n            priorityLevel,\n            timestamp,\n            updaters,\n          }) => ({\n            changeDescriptions:\n              changeDescriptions != null\n                ? Array.from(changeDescriptions.entries())\n                : null,\n            duration,\n            effectDuration,\n            fiberActualDurations: Array.from(fiberActualDurations.entries()),\n            fiberSelfDurations: Array.from(fiberSelfDurations.entries()),\n            passiveEffectDuration,\n            priorityLevel,\n            timestamp,\n            updaters,\n          }),\n        ),\n        displayName,\n        initialTreeBaseDurations: Array.from(\n          initialTreeBaseDurations.entries(),\n        ),\n        operations,\n        rootID,\n        snapshots: Array.from(snapshots.entries()),\n      });\n    },\n  );\n\n  return {\n    version: PROFILER_EXPORT_VERSION,\n    dataForRoots,\n    timelineData,\n  };\n}\n\nexport const getGradientColor = (value: number): string => {\n  const maxIndex = commitGradient.length - 1;\n  let index;\n  if (Number.isNaN(value)) {\n    index = 0;\n  } else if (!Number.isFinite(value)) {\n    index = maxIndex;\n  } else {\n    index = Math.max(0, Math.min(maxIndex, value)) * maxIndex;\n  }\n  return commitGradient[Math.round(index)];\n};\n\nexport const formatDuration = (duration: number): number | string =>\n  Math.round(duration * 10) / 10 || '<0.1';\nexport const formatPercentage = (percentage: number): number =>\n  Math.round(percentage * 100);\nexport const formatTime = (timestamp: number): number =>\n  Math.round(Math.round(timestamp) / 100) / 10;\n\nexport const scale =\n  (\n    minValue: number,\n    maxValue: number,\n    minRange: number,\n    maxRange: number,\n  ): ((value: number, fallbackValue: number) => number) =>\n  (value: number, fallbackValue: number) =>\n    maxValue - minValue === 0\n      ? fallbackValue\n      : ((value - minValue) / (maxValue - minValue)) * (maxRange - minRange);\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {\n  __DEBUG__,\n  TREE_OPERATION_ADD,\n  TREE_OPERATION_REMOVE,\n  TREE_OPERATION_REMOVE_ROOT,\n  TREE_OPERATION_REORDER_CHILDREN,\n  TREE_OPERATION_SET_SUBTREE_MODE,\n  TREE_OPERATION_UPDATE_TREE_BASE_DURATION,\n  TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS,\n} from 'react-devtools-shared/src/constants';\nimport {\n  parseElementDisplayNameFromBackend,\n  utfDecodeStringWithRanges,\n} from 'react-devtools-shared/src/utils';\nimport {ElementTypeRoot} from 'react-devtools-shared/src/frontend/types';\nimport ProfilerStore from 'react-devtools-shared/src/devtools/ProfilerStore';\n\nimport type {ElementType} from 'react-devtools-shared/src/frontend/types';\nimport type {\n  CommitTree,\n  CommitTreeNode,\n  ProfilingDataForRootFrontend,\n} from 'react-devtools-shared/src/devtools/views/Profiler/types';\n\nconst debug = (methodName: string, ...args: Array<string>) => {\n  if (__DEBUG__) {\n    console.log(\n      `%cCommitTreeBuilder %c${methodName}`,\n      'color: pink; font-weight: bold;',\n      'font-weight: bold;',\n      ...args,\n    );\n  }\n};\n\nconst rootToCommitTreeMap: Map<number, Array<CommitTree>> = new Map();\n\nexport function getCommitTree({\n  commitIndex,\n  profilerStore,\n  rootID,\n}: {\n  commitIndex: number,\n  profilerStore: ProfilerStore,\n  rootID: number,\n}): CommitTree {\n  if (!rootToCommitTreeMap.has(rootID)) {\n    rootToCommitTreeMap.set(rootID, []);\n  }\n\n  const commitTrees = ((rootToCommitTreeMap.get(\n    rootID,\n  ): any): Array<CommitTree>);\n  if (commitIndex < commitTrees.length) {\n    return commitTrees[commitIndex];\n  }\n\n  const {profilingData} = profilerStore;\n  if (profilingData === null) {\n    throw Error(`No profiling data available`);\n  }\n\n  const dataForRoot = profilingData.dataForRoots.get(rootID);\n  if (dataForRoot == null) {\n    throw Error(`Could not find profiling data for root \"${rootID}\"`);\n  }\n\n  const {operations} = dataForRoot;\n  if (operations.length <= commitIndex) {\n    throw Error(\n      `getCommitTree(): Invalid commit \"${commitIndex}\" for root \"${rootID}\". There are only \"${operations.length}\" commits.`,\n    );\n  }\n\n  let commitTree: CommitTree = ((null: any): CommitTree);\n  for (let index = commitTrees.length; index <= commitIndex; index++) {\n    // Commits are generated sequentially and cached.\n    // If this is the very first commit, start with the cached snapshot and apply the first mutation.\n    // Otherwise load (or generate) the previous commit and append a mutation to it.\n    if (index === 0) {\n      const nodes = new Map<number, CommitTreeNode>();\n\n      // Construct the initial tree.\n      recursivelyInitializeTree(rootID, 0, nodes, dataForRoot);\n\n      // Mutate the tree\n      if (operations != null && index < operations.length) {\n        commitTree = updateTree({nodes, rootID}, operations[index]);\n\n        if (__DEBUG__) {\n          __printTree(commitTree);\n        }\n\n        commitTrees.push(commitTree);\n      }\n    } else {\n      const previousCommitTree = commitTrees[index - 1];\n      commitTree = updateTree(previousCommitTree, operations[index]);\n\n      if (__DEBUG__) {\n        __printTree(commitTree);\n      }\n\n      commitTrees.push(commitTree);\n    }\n  }\n\n  return commitTree;\n}\n\nfunction recursivelyInitializeTree(\n  id: number,\n  parentID: number,\n  nodes: Map<number, CommitTreeNode>,\n  dataForRoot: ProfilingDataForRootFrontend,\n): void {\n  const node = dataForRoot.snapshots.get(id);\n  if (node != null) {\n    nodes.set(id, {\n      id,\n      children: node.children,\n      displayName: node.displayName,\n      hocDisplayNames: node.hocDisplayNames,\n      key: node.key,\n      parentID,\n      treeBaseDuration: ((dataForRoot.initialTreeBaseDurations.get(\n        id,\n      ): any): number),\n      type: node.type,\n      compiledWithForget: node.compiledWithForget,\n    });\n\n    node.children.forEach(childID =>\n      recursivelyInitializeTree(childID, id, nodes, dataForRoot),\n    );\n  }\n}\n\nfunction updateTree(\n  commitTree: CommitTree,\n  operations: Array<number>,\n): CommitTree {\n  // Clone the original tree so edits don't affect it.\n  const nodes = new Map(commitTree.nodes);\n\n  // Clone nodes before mutating them so edits don't affect them.\n  const getClonedNode = (id: number): CommitTreeNode => {\n    // $FlowFixMe[prop-missing] - recommended fix is to use object spread operator\n    const clonedNode = ((Object.assign(\n      {},\n      nodes.get(id),\n    ): any): CommitTreeNode);\n    nodes.set(id, clonedNode);\n    return clonedNode;\n  };\n\n  let i = 2;\n  let id: number = ((null: any): number);\n\n  // Reassemble the string table.\n  const stringTable: Array<null | string> = [\n    null, // ID = 0 corresponds to the null string.\n  ];\n  const stringTableSize = operations[i++];\n  const stringTableEnd = i + stringTableSize;\n  while (i < stringTableEnd) {\n    const nextLength = operations[i++];\n    const nextString = utfDecodeStringWithRanges(\n      operations,\n      i,\n      i + nextLength - 1,\n    );\n    stringTable.push(nextString);\n    i += nextLength;\n  }\n\n  while (i < operations.length) {\n    const operation = operations[i];\n\n    switch (operation) {\n      case TREE_OPERATION_ADD: {\n        id = ((operations[i + 1]: any): number);\n        const type = ((operations[i + 2]: any): ElementType);\n\n        i += 3;\n\n        if (nodes.has(id)) {\n          throw new Error(\n            `Commit tree already contains fiber \"${id}\". This is a bug in React DevTools.`,\n          );\n        }\n\n        if (type === ElementTypeRoot) {\n          i++; // isStrictModeCompliant\n          i++; // Profiling flag\n          i++; // supportsStrictMode flag\n          i++; // hasOwnerMetadata flag\n\n          if (__DEBUG__) {\n            debug('Add', `new root fiber ${id}`);\n          }\n\n          const node: CommitTreeNode = {\n            children: [],\n            displayName: null,\n            hocDisplayNames: null,\n            id,\n            key: null,\n            parentID: 0,\n            treeBaseDuration: 0, // This will be updated by a subsequent operation\n            type,\n            compiledWithForget: false,\n          };\n\n          nodes.set(id, node);\n        } else {\n          const parentID = ((operations[i]: any): number);\n          i++;\n\n          i++; // ownerID\n\n          const displayNameStringID = operations[i];\n          const displayName = stringTable[displayNameStringID];\n          i++;\n\n          const keyStringID = operations[i];\n          const key = stringTable[keyStringID];\n          i++;\n\n          if (__DEBUG__) {\n            debug(\n              'Add',\n              `fiber ${id} (${displayName || 'null'}) as child of ${parentID}`,\n            );\n          }\n\n          const parentNode = getClonedNode(parentID);\n          parentNode.children = parentNode.children.concat(id);\n\n          const {formattedDisplayName, hocDisplayNames, compiledWithForget} =\n            parseElementDisplayNameFromBackend(displayName, type);\n\n          const node: CommitTreeNode = {\n            children: [],\n            displayName: formattedDisplayName,\n            hocDisplayNames: hocDisplayNames,\n            id,\n            key,\n            parentID,\n            treeBaseDuration: 0, // This will be updated by a subsequent operation\n            type,\n            compiledWithForget,\n          };\n\n          nodes.set(id, node);\n        }\n\n        break;\n      }\n      case TREE_OPERATION_REMOVE: {\n        const removeLength = ((operations[i + 1]: any): number);\n        i += 2;\n\n        for (let removeIndex = 0; removeIndex < removeLength; removeIndex++) {\n          id = ((operations[i]: any): number);\n          i++;\n\n          if (!nodes.has(id)) {\n            throw new Error(\n              `Commit tree does not contain fiber \"${id}\". This is a bug in React DevTools.`,\n            );\n          }\n\n          const node = getClonedNode(id);\n          const parentID = node.parentID;\n\n          nodes.delete(id);\n\n          if (!nodes.has(parentID)) {\n            // No-op\n          } else {\n            const parentNode = getClonedNode(parentID);\n\n            if (__DEBUG__) {\n              debug('Remove', `fiber ${id} from parent ${parentID}`);\n            }\n\n            parentNode.children = parentNode.children.filter(\n              childID => childID !== id,\n            );\n          }\n        }\n        break;\n      }\n      case TREE_OPERATION_REMOVE_ROOT: {\n        throw Error('Operation REMOVE_ROOT is not supported while profiling.');\n      }\n      case TREE_OPERATION_REORDER_CHILDREN: {\n        id = ((operations[i + 1]: any): number);\n        const numChildren = ((operations[i + 2]: any): number);\n        const children = ((operations.slice(\n          i + 3,\n          i + 3 + numChildren,\n        ): any): Array<number>);\n\n        i = i + 3 + numChildren;\n\n        if (__DEBUG__) {\n          debug('Re-order', `fiber ${id} children ${children.join(',')}`);\n        }\n\n        const node = getClonedNode(id);\n        node.children = Array.from(children);\n\n        break;\n      }\n      case TREE_OPERATION_SET_SUBTREE_MODE: {\n        id = operations[i + 1];\n        const mode = operations[i + 1];\n\n        i += 3;\n\n        if (__DEBUG__) {\n          debug('Subtree mode', `Subtree with root ${id} set to mode ${mode}`);\n        }\n        break;\n      }\n      case TREE_OPERATION_UPDATE_TREE_BASE_DURATION: {\n        id = operations[i + 1];\n\n        const node = getClonedNode(id);\n        node.treeBaseDuration = operations[i + 2] / 1000; // Convert microseconds back to milliseconds;\n\n        if (__DEBUG__) {\n          debug(\n            'Update',\n            `fiber ${id} treeBaseDuration to ${node.treeBaseDuration}`,\n          );\n        }\n\n        i += 3;\n        break;\n      }\n      case TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS: {\n        id = operations[i + 1];\n        const numErrors = operations[i + 2];\n        const numWarnings = operations[i + 3];\n\n        i += 4;\n\n        if (__DEBUG__) {\n          debug(\n            'Warnings and Errors update',\n            `fiber ${id} has ${numErrors} errors and ${numWarnings} warnings`,\n          );\n        }\n        break;\n      }\n\n      default:\n        throw Error(`Unsupported Bridge operation \"${operation}\"`);\n    }\n  }\n\n  return {\n    nodes,\n    rootID: commitTree.rootID,\n  };\n}\n\nexport function invalidateCommitTrees(): void {\n  rootToCommitTreeMap.clear();\n}\n\n// DEBUG\nconst __printTree = (commitTree: CommitTree) => {\n  if (__DEBUG__) {\n    const {nodes, rootID} = commitTree;\n    console.group('__printTree()');\n    const queue = [rootID, 0];\n    while (queue.length > 0) {\n      const id = queue.shift();\n      const depth = queue.shift();\n\n      // $FlowFixMe[incompatible-call]\n      const node = nodes.get(id);\n      if (node == null) {\n        // $FlowFixMe[incompatible-type]\n        throw Error(`Could not find node with id \"${id}\" in commit tree`);\n      }\n\n      console.log(\n        // $FlowFixMe[incompatible-call]\n        `${'•'.repeat(depth)}${node.id}:${node.displayName || ''} ${\n          node.key ? `key:\"${node.key}\"` : ''\n        } (${node.treeBaseDuration})`,\n      );\n\n      node.children.forEach(childID => {\n        // $FlowFixMe[unsafe-addition]\n        queue.push(childID, depth + 1);\n      });\n    }\n    console.groupEnd();\n  }\n};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {formatDuration} from './utils';\nimport ProfilerStore from 'react-devtools-shared/src/devtools/ProfilerStore';\n\nimport type {CommitTree} from './types';\n\nexport type ChartNode = {\n  actualDuration: number,\n  didRender: boolean,\n  id: number,\n  label: string,\n  name: string,\n  offset: number,\n  selfDuration: number,\n  treeBaseDuration: number,\n};\n\nexport type ChartData = {\n  baseDuration: number,\n  depth: number,\n  idToDepthMap: Map<number, number>,\n  maxSelfDuration: number,\n  renderPathNodes: Set<number>,\n  rows: Array<Array<ChartNode>>,\n};\n\nconst cachedChartData: Map<string, ChartData> = new Map();\n\nexport function getChartData({\n  commitIndex,\n  commitTree,\n  profilerStore,\n  rootID,\n}: {\n  commitIndex: number,\n  commitTree: CommitTree,\n  profilerStore: ProfilerStore,\n  rootID: number,\n}): ChartData {\n  const commitDatum = profilerStore.getCommitData(rootID, commitIndex);\n\n  const {fiberActualDurations, fiberSelfDurations} = commitDatum;\n  const {nodes} = commitTree;\n\n  const chartDataKey = `${rootID}-${commitIndex}`;\n  if (cachedChartData.has(chartDataKey)) {\n    return ((cachedChartData.get(chartDataKey): any): ChartData);\n  }\n\n  const idToDepthMap: Map<number, number> = new Map();\n  const renderPathNodes: Set<number> = new Set();\n  const rows: Array<Array<ChartNode>> = [];\n\n  let maxDepth = 0;\n  let maxSelfDuration = 0;\n\n  // Generate flame graph structure using tree base durations.\n  const walkTree = (\n    id: number,\n    rightOffset: number,\n    currentDepth: number,\n  ): ChartNode => {\n    idToDepthMap.set(id, currentDepth);\n\n    const node = nodes.get(id);\n    if (node == null) {\n      throw Error(`Could not find node with id \"${id}\" in commit tree`);\n    }\n\n    const {\n      children,\n      displayName,\n      hocDisplayNames,\n      key,\n      treeBaseDuration,\n      compiledWithForget,\n    } = node;\n\n    const actualDuration = fiberActualDurations.get(id) || 0;\n    const selfDuration = fiberSelfDurations.get(id) || 0;\n    const didRender = fiberActualDurations.has(id);\n\n    const name = displayName || 'Anonymous';\n    const maybeKey = key !== null ? ` key=\"${key}\"` : '';\n\n    let maybeBadge = '';\n    const maybeForgetBadge = compiledWithForget ? '✨ ' : '';\n\n    if (hocDisplayNames !== null && hocDisplayNames.length > 0) {\n      maybeBadge = ` (${hocDisplayNames[0]})`;\n    }\n\n    let label = `${maybeForgetBadge}${name}${maybeBadge}${maybeKey}`;\n    if (didRender) {\n      label += ` (${formatDuration(selfDuration)}ms of ${formatDuration(\n        actualDuration,\n      )}ms)`;\n    }\n\n    maxDepth = Math.max(maxDepth, currentDepth);\n    maxSelfDuration = Math.max(maxSelfDuration, selfDuration);\n\n    const chartNode: ChartNode = {\n      actualDuration,\n      didRender,\n      id,\n      label,\n      name,\n      offset: rightOffset - treeBaseDuration,\n      selfDuration,\n      treeBaseDuration,\n    };\n\n    if (currentDepth > rows.length) {\n      rows.push([chartNode]);\n    } else {\n      rows[currentDepth - 1].push(chartNode);\n    }\n\n    for (let i = children.length - 1; i >= 0; i--) {\n      const childID = children[i];\n      const childChartNode: $FlowFixMe = walkTree(\n        childID,\n        rightOffset,\n        currentDepth + 1,\n      );\n      rightOffset -= childChartNode.treeBaseDuration;\n    }\n\n    return chartNode;\n  };\n\n  let baseDuration = 0;\n\n  // Special case to handle unmounted roots.\n  if (nodes.size > 0) {\n    // Skip over the root; we don't want to show it in the flamegraph.\n    const root = nodes.get(rootID);\n    if (root == null) {\n      throw Error(\n        `Could not find root node with id \"${rootID}\" in commit tree`,\n      );\n    }\n\n    // Don't assume a single root.\n    // Component filters or Fragments might lead to multiple \"roots\" in a flame graph.\n    for (let i = root.children.length - 1; i >= 0; i--) {\n      const id = root.children[i];\n      const node = nodes.get(id);\n      if (node == null) {\n        throw Error(`Could not find node with id \"${id}\" in commit tree`);\n      }\n      baseDuration += node.treeBaseDuration;\n      walkTree(id, baseDuration, 1);\n    }\n\n    fiberActualDurations.forEach((duration, id) => {\n      let node = nodes.get(id);\n      if (node != null) {\n        let currentID = node.parentID;\n        while (currentID !== 0) {\n          if (renderPathNodes.has(currentID)) {\n            // We've already walked this path; we can skip it.\n            break;\n          } else {\n            renderPathNodes.add(currentID);\n          }\n\n          node = nodes.get(currentID);\n          currentID = node != null ? node.parentID : 0;\n        }\n      }\n    });\n  }\n\n  const chartData = {\n    baseDuration,\n    depth: maxDepth,\n    idToDepthMap,\n    maxSelfDuration,\n    renderPathNodes,\n    rows,\n  };\n\n  cachedChartData.set(chartDataKey, chartData);\n\n  return chartData;\n}\n\nexport function invalidateChartData(): void {\n  cachedChartData.clear();\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {\n  ElementTypeForwardRef,\n  ElementTypeMemo,\n} from 'react-devtools-shared/src/frontend/types';\nimport {formatDuration} from './utils';\nimport ProfilerStore from 'react-devtools-shared/src/devtools/ProfilerStore';\n\nimport type {CommitTree} from './types';\n\nexport type ChartNode = {\n  id: number,\n  label: string,\n  name: string,\n  value: number,\n};\n\nexport type ChartData = {\n  maxValue: number,\n  nodes: Array<ChartNode>,\n};\n\nconst cachedChartData: Map<string, ChartData> = new Map();\n\nexport function getChartData({\n  commitIndex,\n  commitTree,\n  profilerStore,\n  rootID,\n}: {\n  commitIndex: number,\n  commitTree: CommitTree,\n  profilerStore: ProfilerStore,\n  rootID: number,\n}): ChartData {\n  const commitDatum = profilerStore.getCommitData(rootID, commitIndex);\n\n  const {fiberActualDurations, fiberSelfDurations} = commitDatum;\n  const {nodes} = commitTree;\n\n  const chartDataKey = `${rootID}-${commitIndex}`;\n  if (cachedChartData.has(chartDataKey)) {\n    return ((cachedChartData.get(chartDataKey): any): ChartData);\n  }\n\n  let maxSelfDuration = 0;\n\n  const chartNodes: Array<ChartNode> = [];\n  fiberActualDurations.forEach((actualDuration, id) => {\n    const node = nodes.get(id);\n\n    if (node == null) {\n      throw Error(`Could not find node with id \"${id}\" in commit tree`);\n    }\n\n    const {displayName, key, parentID, type, compiledWithForget} = node;\n\n    // Don't show the root node in this chart.\n    if (parentID === 0) {\n      return;\n    }\n    const selfDuration = fiberSelfDurations.get(id) || 0;\n    maxSelfDuration = Math.max(maxSelfDuration, selfDuration);\n\n    const name = displayName || 'Anonymous';\n    const maybeKey = key !== null ? ` key=\"${key}\"` : '';\n    const maybeForgetBadge = compiledWithForget ? '✨ ' : '';\n\n    let maybeBadge = '';\n    if (type === ElementTypeForwardRef) {\n      maybeBadge = ' (ForwardRef)';\n    } else if (type === ElementTypeMemo) {\n      maybeBadge = ' (Memo)';\n    }\n\n    const label = `${maybeForgetBadge}${name}${maybeBadge}${maybeKey} (${formatDuration(\n      selfDuration,\n    )}ms)`;\n    chartNodes.push({\n      id,\n      label,\n      name,\n      value: selfDuration,\n    });\n  });\n\n  const chartData = {\n    maxValue: maxSelfDuration,\n    nodes: chartNodes.sort((a, b) => b.value - a.value),\n  };\n\n  cachedChartData.set(chartDataKey, chartData);\n\n  return chartData;\n}\n\nexport function invalidateChartData(): void {\n  cachedChartData.clear();\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport ProfilerStore from './ProfilerStore';\nimport {\n  getCommitTree,\n  invalidateCommitTrees,\n} from 'react-devtools-shared/src/devtools/views/Profiler/CommitTreeBuilder';\nimport {\n  getChartData as getFlamegraphChartData,\n  invalidateChartData as invalidateFlamegraphChartData,\n} from 'react-devtools-shared/src/devtools/views/Profiler/FlamegraphChartBuilder';\nimport {\n  getChartData as getRankedChartData,\n  invalidateChartData as invalidateRankedChartData,\n} from 'react-devtools-shared/src/devtools/views/Profiler/RankedChartBuilder';\n\nimport type {CommitTree} from 'react-devtools-shared/src/devtools/views/Profiler/types';\nimport type {ChartData as FlamegraphChartData} from 'react-devtools-shared/src/devtools/views/Profiler/FlamegraphChartBuilder';\nimport type {ChartData as RankedChartData} from 'react-devtools-shared/src/devtools/views/Profiler/RankedChartBuilder';\n\nexport default class ProfilingCache {\n  _fiberCommits: Map<number, Array<number>> = new Map();\n  _profilerStore: ProfilerStore;\n\n  constructor(profilerStore: ProfilerStore) {\n    this._profilerStore = profilerStore;\n  }\n\n  getCommitTree: ({commitIndex: number, rootID: number}) => CommitTree = ({\n    commitIndex,\n    rootID,\n  }) =>\n    getCommitTree({\n      commitIndex,\n      profilerStore: this._profilerStore,\n      rootID,\n    });\n\n  getFiberCommits: ({fiberID: number, rootID: number}) => Array<number> = ({\n    fiberID,\n    rootID,\n  }) => {\n    const cachedFiberCommits = this._fiberCommits.get(fiberID);\n    if (cachedFiberCommits != null) {\n      return cachedFiberCommits;\n    }\n\n    const fiberCommits = [];\n    const dataForRoot = this._profilerStore.getDataForRoot(rootID);\n    dataForRoot.commitData.forEach((commitDatum, commitIndex) => {\n      if (commitDatum.fiberActualDurations.has(fiberID)) {\n        fiberCommits.push(commitIndex);\n      }\n    });\n\n    this._fiberCommits.set(fiberID, fiberCommits);\n\n    return fiberCommits;\n  };\n\n  getFlamegraphChartData: ({\n    commitIndex: number,\n    commitTree: CommitTree,\n    rootID: number,\n  }) => FlamegraphChartData = ({commitIndex, commitTree, rootID}) =>\n    getFlamegraphChartData({\n      commitIndex,\n      commitTree,\n      profilerStore: this._profilerStore,\n      rootID,\n    });\n\n  getRankedChartData: ({\n    commitIndex: number,\n    commitTree: CommitTree,\n    rootID: number,\n  }) => RankedChartData = ({commitIndex, commitTree, rootID}) =>\n    getRankedChartData({\n      commitIndex,\n      commitTree,\n      profilerStore: this._profilerStore,\n      rootID,\n    });\n\n  invalidate() {\n    this._fiberCommits.clear();\n\n    invalidateCommitTrees();\n    invalidateFlamegraphChartData();\n    invalidateRankedChartData();\n  }\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n */\n\nimport {enableLogger} from 'react-devtools-feature-flags';\n\nexport type LoggerEvent =\n  | {\n      +event_name: 'loaded-dev-tools',\n    }\n  | {\n      +event_name: 'error',\n      +error_message: string | null,\n      +error_stack: string | null,\n      +error_component_stack: string | null,\n    }\n  | {\n      +event_name: 'selected-components-tab',\n    }\n  | {\n      +event_name: 'selected-profiler-tab',\n    }\n  | {\n      +event_name: 'load-hook-names',\n      +event_status: 'success' | 'error' | 'timeout' | 'unknown',\n      +duration_ms: number,\n      +inspected_element_display_name: string | null,\n      +inspected_element_number_of_hooks: number | null,\n    }\n  | {\n      +event_name: 'select-element',\n      +metadata: {\n        +source: string,\n      },\n    }\n  | {\n      +event_name: 'inspect-element-button-clicked',\n    }\n  | {\n      +event_name: 'profiling-start',\n      +metadata: {\n        +current_tab: string,\n      },\n    }\n  | {\n      +event_name: 'profiler-tab-changed',\n      +metadata: {\n        +tabId: string,\n      },\n    }\n  | {\n      +event_name: 'settings-changed',\n      +metadata: {\n        +key: string,\n        +value: any,\n        ...\n      },\n    };\n\nexport type LogFunction = LoggerEvent => void | Promise<void>;\n\nlet logFunctions: Array<LogFunction> = [];\nexport const logEvent: LogFunction =\n  enableLogger === true\n    ? function logEvent(event: LoggerEvent): void {\n        logFunctions.forEach(log => {\n          log(event);\n        });\n      }\n    : function logEvent() {};\n\nexport const registerEventLogger: (logFunction: LogFunction) => () => void =\n  enableLogger === true\n    ? function registerEventLogger(logFunction: LogFunction): () => void {\n        if (enableLogger) {\n          logFunctions.push(logFunction);\n          return function unregisterEventLogger() {\n            logFunctions = logFunctions.filter(log => log !== logFunction);\n          };\n        }\n        return () => {};\n      }\n    : function registerEventLogger(logFunction: LogFunction) {\n        return () => {};\n      };\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport EventEmitter from '../events';\nimport {prepareProfilingDataFrontendFromBackendAndStore} from './views/Profiler/utils';\nimport ProfilingCache from './ProfilingCache';\nimport Store from './store';\nimport {logEvent} from 'react-devtools-shared/src/Logger';\n\nimport type {FrontendBridge} from 'react-devtools-shared/src/bridge';\nimport type {ProfilingDataBackend} from 'react-devtools-shared/src/backend/types';\nimport type {\n  CommitDataFrontend,\n  ProfilingDataForRootFrontend,\n  ProfilingDataFrontend,\n  SnapshotNode,\n} from './views/Profiler/types';\n\nexport default class ProfilerStore extends EventEmitter<{\n  isProcessingData: [],\n  isProfiling: [],\n  profilingData: [],\n}> {\n  _bridge: FrontendBridge;\n\n  // Suspense cache for lazily calculating derived profiling data.\n  _cache: ProfilingCache;\n\n  // Temporary store of profiling data from the backend renderer(s).\n  // This data will be converted to the ProfilingDataFrontend format after being collected from all renderers.\n  _dataBackends: Array<ProfilingDataBackend> = [];\n\n  // Data from the most recently completed profiling session,\n  // or data that has been imported from a previously exported session.\n  // This object contains all necessary data to drive the Profiler UI interface,\n  // even though some of it is lazily parsed/derived via the ProfilingCache.\n  _dataFrontend: ProfilingDataFrontend | null = null;\n\n  // Snapshot of all attached renderer IDs.\n  // Once profiling is finished, this snapshot will be used to query renderers for profiling data.\n  //\n  // This map is initialized when profiling starts and updated when a new root is added while profiling;\n  // Upon completion, it is converted into the exportable ProfilingDataFrontend format.\n  _initialRendererIDs: Set<number> = new Set();\n\n  // Snapshot of the state of the main Store (including all roots) when profiling started.\n  // Once profiling is finished, this snapshot can be used along with \"operations\" messages emitted during profiling,\n  // to reconstruct the state of each root for each commit.\n  // It's okay to use a single root to store this information because node IDs are unique across all roots.\n  //\n  // This map is initialized when profiling starts and updated when a new root is added while profiling;\n  // Upon completion, it is converted into the exportable ProfilingDataFrontend format.\n  _initialSnapshotsByRootID: Map<number, Map<number, SnapshotNode>> = new Map();\n\n  // Map of root (id) to a list of tree mutation that occur during profiling.\n  // Once profiling is finished, these mutations can be used, along with the initial tree snapshots,\n  // to reconstruct the state of each root for each commit.\n  //\n  // This map is only updated while profiling is in progress;\n  // Upon completion, it is converted into the exportable ProfilingDataFrontend format.\n  _inProgressOperationsByRootID: Map<number, Array<Array<number>>> = new Map();\n\n  // The backend is currently profiling.\n  // When profiling is in progress, operations are stored so that we can later reconstruct past commit trees.\n  _isBackendProfiling: boolean = false;\n\n  // Mainly used for optimistic UI.\n  // This could be false, but at the same time _isBackendProfiling could be true\n  // for cases when Backend is busy serializing a chunky payload.\n  _isProfilingBasedOnUserInput: boolean = false;\n\n  // Tracks whether a specific renderer logged any profiling data during the most recent session.\n  _rendererIDsThatReportedProfilingData: Set<number> = new Set();\n\n  // After profiling, data is requested from each attached renderer using this queue.\n  // So long as this queue is not empty, the store is retrieving and processing profiling data from the backend.\n  _rendererQueue: Set<number> = new Set();\n\n  _store: Store;\n\n  constructor(\n    bridge: FrontendBridge,\n    store: Store,\n    defaultIsProfiling: boolean,\n  ) {\n    super();\n\n    this._bridge = bridge;\n    this._isBackendProfiling = defaultIsProfiling;\n    this._isProfilingBasedOnUserInput = defaultIsProfiling;\n    this._store = store;\n\n    bridge.addListener('operations', this.onBridgeOperations);\n    bridge.addListener('profilingData', this.onBridgeProfilingData);\n    bridge.addListener('profilingStatus', this.onProfilingStatus);\n    bridge.addListener('shutdown', this.onBridgeShutdown);\n\n    // It's possible that profiling has already started (e.g. \"reload and start profiling\")\n    // so the frontend needs to ask the backend for its status after mounting.\n    bridge.send('getProfilingStatus');\n\n    this._cache = new ProfilingCache(this);\n  }\n\n  getCommitData(rootID: number, commitIndex: number): CommitDataFrontend {\n    if (this._dataFrontend !== null) {\n      const dataForRoot = this._dataFrontend.dataForRoots.get(rootID);\n      if (dataForRoot != null) {\n        const commitDatum = dataForRoot.commitData[commitIndex];\n        if (commitDatum != null) {\n          return commitDatum;\n        }\n      }\n    }\n\n    throw Error(\n      `Could not find commit data for root \"${rootID}\" and commit \"${commitIndex}\"`,\n    );\n  }\n\n  getDataForRoot(rootID: number): ProfilingDataForRootFrontend {\n    if (this._dataFrontend !== null) {\n      const dataForRoot = this._dataFrontend.dataForRoots.get(rootID);\n      if (dataForRoot != null) {\n        return dataForRoot;\n      }\n    }\n\n    throw Error(`Could not find commit data for root \"${rootID}\"`);\n  }\n\n  // Profiling data has been recorded for at least one root.\n  get didRecordCommits(): boolean {\n    return (\n      this._dataFrontend !== null && this._dataFrontend.dataForRoots.size > 0\n    );\n  }\n\n  get isProcessingData(): boolean {\n    return this._rendererQueue.size > 0 || this._dataBackends.length > 0;\n  }\n\n  get isProfilingBasedOnUserInput(): boolean {\n    return this._isProfilingBasedOnUserInput;\n  }\n\n  get profilingCache(): ProfilingCache {\n    return this._cache;\n  }\n\n  get profilingData(): ProfilingDataFrontend | null {\n    return this._dataFrontend;\n  }\n  set profilingData(value: ProfilingDataFrontend | null): void {\n    if (this._isBackendProfiling) {\n      console.warn(\n        'Profiling data cannot be updated while profiling is in progress.',\n      );\n      return;\n    }\n\n    this._dataBackends.splice(0);\n    this._dataFrontend = value;\n    this._initialRendererIDs.clear();\n    this._initialSnapshotsByRootID.clear();\n    this._inProgressOperationsByRootID.clear();\n    this._cache.invalidate();\n\n    this.emit('profilingData');\n  }\n\n  clear(): void {\n    this._dataBackends.splice(0);\n    this._dataFrontend = null;\n    this._initialRendererIDs.clear();\n    this._initialSnapshotsByRootID.clear();\n    this._inProgressOperationsByRootID.clear();\n    this._rendererQueue.clear();\n\n    // Invalidate suspense cache if profiling data is being (re-)recorded.\n    // Note that we clear now because any existing data is \"stale\".\n    this._cache.invalidate();\n\n    this.emit('profilingData');\n  }\n\n  startProfiling(): void {\n    this._bridge.send('startProfiling', {\n      recordChangeDescriptions: this._store.recordChangeDescriptions,\n      recordTimeline: this._store.supportsTimeline,\n    });\n\n    this._isProfilingBasedOnUserInput = true;\n    this.emit('isProfiling');\n\n    // Don't actually update the local profiling boolean yet!\n    // Wait for onProfilingStatus() to confirm the status has changed.\n    // This ensures the frontend and backend are in sync wrt which commits were profiled.\n    // We do this to avoid mismatches on e.g. CommitTreeBuilder that would cause errors.\n  }\n\n  stopProfiling(): void {\n    this._bridge.send('stopProfiling');\n\n    // Backend might be busy serializing the payload, so we are going to display\n    // optimistic UI to the user that profiling is stopping.\n    this._isProfilingBasedOnUserInput = false;\n    this.emit('isProfiling');\n\n    // Wait for onProfilingStatus() to confirm the status has changed, this will update _isBackendProfiling.\n    // This ensures the frontend and backend are in sync wrt which commits were profiled.\n    // We do this to avoid mismatches on e.g. CommitTreeBuilder that would cause errors.\n  }\n\n  _takeProfilingSnapshotRecursive: (\n    elementID: number,\n    profilingSnapshots: Map<number, SnapshotNode>,\n  ) => void = (elementID, profilingSnapshots) => {\n    const element = this._store.getElementByID(elementID);\n    if (element !== null) {\n      const snapshotNode: SnapshotNode = {\n        id: elementID,\n        children: element.children.slice(0),\n        displayName: element.displayName,\n        hocDisplayNames: element.hocDisplayNames,\n        key: element.key,\n        type: element.type,\n        compiledWithForget: element.compiledWithForget,\n      };\n      profilingSnapshots.set(elementID, snapshotNode);\n\n      element.children.forEach(childID =>\n        this._takeProfilingSnapshotRecursive(childID, profilingSnapshots),\n      );\n    }\n  };\n\n  onBridgeOperations: (operations: Array<number>) => void = operations => {\n    // The first two values are always rendererID and rootID\n    const rendererID = operations[0];\n    const rootID = operations[1];\n\n    if (this._isBackendProfiling) {\n      let profilingOperations = this._inProgressOperationsByRootID.get(rootID);\n      if (profilingOperations == null) {\n        profilingOperations = [operations];\n        this._inProgressOperationsByRootID.set(rootID, profilingOperations);\n      } else {\n        profilingOperations.push(operations);\n      }\n\n      if (!this._initialRendererIDs.has(rendererID)) {\n        this._initialRendererIDs.add(rendererID);\n      }\n\n      if (!this._initialSnapshotsByRootID.has(rootID)) {\n        this._initialSnapshotsByRootID.set(rootID, new Map());\n      }\n\n      this._rendererIDsThatReportedProfilingData.add(rendererID);\n    }\n  };\n\n  onBridgeProfilingData: (dataBackend: ProfilingDataBackend) => void =\n    dataBackend => {\n      if (this._isBackendProfiling) {\n        // This should never happen, but if it does, then ignore previous profiling data.\n        return;\n      }\n\n      const {rendererID} = dataBackend;\n\n      if (!this._rendererQueue.has(rendererID)) {\n        throw Error(\n          `Unexpected profiling data update from renderer \"${rendererID}\"`,\n        );\n      }\n\n      this._dataBackends.push(dataBackend);\n      this._rendererQueue.delete(rendererID);\n\n      if (this._rendererQueue.size === 0) {\n        this._dataFrontend = prepareProfilingDataFrontendFromBackendAndStore(\n          this._dataBackends,\n          this._inProgressOperationsByRootID,\n          this._initialSnapshotsByRootID,\n        );\n\n        this._dataBackends.splice(0);\n\n        this.emit('isProcessingData');\n      }\n    };\n\n  onBridgeShutdown: () => void = () => {\n    this._bridge.removeListener('operations', this.onBridgeOperations);\n    this._bridge.removeListener('profilingData', this.onBridgeProfilingData);\n    this._bridge.removeListener('profilingStatus', this.onProfilingStatus);\n    this._bridge.removeListener('shutdown', this.onBridgeShutdown);\n  };\n\n  onProfilingStatus: (isProfiling: boolean) => void = isProfiling => {\n    if (this._isBackendProfiling === isProfiling) {\n      return;\n    }\n\n    if (isProfiling) {\n      this._dataBackends.splice(0);\n      this._dataFrontend = null;\n      this._initialRendererIDs.clear();\n      this._initialSnapshotsByRootID.clear();\n      this._inProgressOperationsByRootID.clear();\n      this._rendererIDsThatReportedProfilingData.clear();\n      this._rendererQueue.clear();\n\n      // Record all renderer IDs initially too (in case of unmount)\n      // eslint-disable-next-line no-for-of-loops/no-for-of-loops\n      for (const rendererID of this._store.rootIDToRendererID.values()) {\n        if (!this._initialRendererIDs.has(rendererID)) {\n          this._initialRendererIDs.add(rendererID);\n        }\n      }\n\n      // Record snapshot of tree at the time profiling is started.\n      // This info is required to handle cases of e.g. nodes being removed during profiling.\n      this._store.roots.forEach(rootID => {\n        const profilingSnapshots = new Map<number, SnapshotNode>();\n        this._initialSnapshotsByRootID.set(rootID, profilingSnapshots);\n        this._takeProfilingSnapshotRecursive(rootID, profilingSnapshots);\n      });\n    }\n\n    this._isBackendProfiling = isProfiling;\n    // _isProfilingBasedOnUserInput should already be updated from startProfiling, stopProfiling, or constructor.\n    if (this._isProfilingBasedOnUserInput !== isProfiling) {\n      logEvent({\n        event_name: 'error',\n        error_message: `Unexpected profiling status. Expected ${this._isProfilingBasedOnUserInput.toString()}, but received ${isProfiling.toString()}.`,\n        error_stack: new Error().stack,\n        error_component_stack: null,\n      });\n\n      // If happened, fallback to displaying the value from Backend\n      this._isProfilingBasedOnUserInput = isProfiling;\n    }\n\n    // Invalidate suspense cache if profiling data is being (re-)recorded.\n    // Note that we clear again, in case any views read from the cache while profiling.\n    // (That would have resolved a now-stale value without any profiling data.)\n    this._cache.invalidate();\n\n    // If we've just finished a profiling session, we need to fetch data stored in each renderer interface\n    // and re-assemble it on the front-end into a format (ProfilingDataFrontend) that can power the Profiler UI.\n    // During this time, DevTools UI should probably not be interactive.\n    if (!isProfiling) {\n      this._dataBackends.splice(0);\n      this._rendererQueue.clear();\n\n      // Only request data from renderers that actually logged it.\n      // This avoids unnecessary bridge requests and also avoids edge case mixed renderer bugs.\n      // (e.g. when v15 and v16 are both present)\n      this._rendererIDsThatReportedProfilingData.forEach(rendererID => {\n        if (!this._rendererQueue.has(rendererID)) {\n          this._rendererQueue.add(rendererID);\n\n          this._bridge.send('getProfilingData', {rendererID});\n        }\n      });\n\n      this.emit('isProcessingData');\n    }\n  };\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport default class UnsupportedBridgeOperationError extends Error {\n  constructor(message: string) {\n    super(message);\n\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, UnsupportedBridgeOperationError);\n    }\n\n    this.name = 'UnsupportedBridgeOperationError';\n  }\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {copy} from 'clipboard-js';\nimport EventEmitter from '../events';\nimport {inspect} from 'util';\nimport {\n  PROFILING_FLAG_BASIC_SUPPORT,\n  PROFILING_FLAG_TIMELINE_SUPPORT,\n  TREE_OPERATION_ADD,\n  TREE_OPERATION_REMOVE,\n  TREE_OPERATION_REMOVE_ROOT,\n  TREE_OPERATION_REORDER_CHILDREN,\n  TREE_OPERATION_SET_SUBTREE_MODE,\n  TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS,\n  TREE_OPERATION_UPDATE_TREE_BASE_DURATION,\n} from '../constants';\nimport {ElementTypeRoot} from '../frontend/types';\nimport {\n  getSavedComponentFilters,\n  setSavedComponentFilters,\n  shallowDiffers,\n  utfDecodeStringWithRanges,\n  parseElementDisplayNameFromBackend,\n} from '../utils';\nimport {localStorageGetItem, localStorageSetItem} from '../storage';\nimport {__DEBUG__} from '../constants';\nimport {printStore} from './utils';\nimport ProfilerStore from './ProfilerStore';\nimport {\n  BRIDGE_PROTOCOL,\n  currentBridgeProtocol,\n} from 'react-devtools-shared/src/bridge';\nimport {StrictMode} from 'react-devtools-shared/src/frontend/types';\n\nimport type {\n  Element,\n  ComponentFilter,\n  ElementType,\n} from 'react-devtools-shared/src/frontend/types';\nimport type {\n  FrontendBridge,\n  BridgeProtocol,\n} from 'react-devtools-shared/src/bridge';\nimport UnsupportedBridgeOperationError from 'react-devtools-shared/src/UnsupportedBridgeOperationError';\nimport type {DevToolsHookSettings} from '../backend/types';\n\nconst debug = (methodName: string, ...args: Array<string>) => {\n  if (__DEBUG__) {\n    console.log(\n      `%cStore %c${methodName}`,\n      'color: green; font-weight: bold;',\n      'font-weight: bold;',\n      ...args,\n    );\n  }\n};\n\nconst LOCAL_STORAGE_COLLAPSE_ROOTS_BY_DEFAULT_KEY =\n  'React::DevTools::collapseNodesByDefault';\nconst LOCAL_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY =\n  'React::DevTools::recordChangeDescriptions';\n\ntype ErrorAndWarningTuples = Array<{id: number, index: number}>;\n\nexport type Config = {\n  checkBridgeProtocolCompatibility?: boolean,\n  isProfiling?: boolean,\n  supportsInspectMatchingDOMElement?: boolean,\n  supportsClickToInspect?: boolean,\n  supportsReloadAndProfile?: boolean,\n  supportsTimeline?: boolean,\n  supportsTraceUpdates?: boolean,\n};\n\nexport type Capabilities = {\n  supportsBasicProfiling: boolean,\n  hasOwnerMetadata: boolean,\n  supportsStrictMode: boolean,\n  supportsTimeline: boolean,\n};\n\n/**\n * The store is the single source of truth for updates from the backend.\n * ContextProviders can subscribe to the Store for specific things they want to provide.\n */\nexport default class Store extends EventEmitter<{\n  backendVersion: [],\n  collapseNodesByDefault: [],\n  componentFilters: [],\n  error: [Error],\n  hookSettings: [$ReadOnly<DevToolsHookSettings>],\n  hostInstanceSelected: [Element['id']],\n  settingsUpdated: [$ReadOnly<DevToolsHookSettings>],\n  mutated: [[Array<number>, Map<number, number>]],\n  recordChangeDescriptions: [],\n  roots: [],\n  rootSupportsBasicProfiling: [],\n  rootSupportsTimelineProfiling: [],\n  supportsNativeStyleEditor: [],\n  supportsReloadAndProfile: [],\n  unsupportedBridgeProtocolDetected: [],\n  unsupportedRendererVersionDetected: [],\n}> {\n  // If the backend version is new enough to report its (NPM) version, this is it.\n  // This version may be displayed by the frontend for debugging purposes.\n  _backendVersion: string | null = null;\n\n  _bridge: FrontendBridge;\n\n  // Computed whenever _errorsAndWarnings Map changes.\n  _cachedComponentWithErrorCount: number = 0;\n  _cachedComponentWithWarningCount: number = 0;\n  _cachedErrorAndWarningTuples: ErrorAndWarningTuples | null = null;\n\n  // Should new nodes be collapsed by default when added to the tree?\n  _collapseNodesByDefault: boolean = true;\n\n  _componentFilters: Array<ComponentFilter>;\n\n  // Map of ID to number of recorded error and warning message IDs.\n  _errorsAndWarnings: Map<number, {errorCount: number, warningCount: number}> =\n    new Map();\n\n  // At least one of the injected renderers contains (DEV only) owner metadata.\n  _hasOwnerMetadata: boolean = false;\n\n  // Map of ID to (mutable) Element.\n  // Elements are mutated to avoid excessive cloning during tree updates.\n  // The InspectedElement Suspense cache also relies on this mutability for its WeakMap usage.\n  _idToElement: Map<number, Element> = new Map();\n\n  // Should the React Native style editor panel be shown?\n  _isNativeStyleEditorSupported: boolean = false;\n\n  _nativeStyleEditorValidAttributes: $ReadOnlyArray<string> | null = null;\n\n  // Older backends don't support an explicit bridge protocol,\n  // so we should timeout eventually and show a downgrade message.\n  _onBridgeProtocolTimeoutID: TimeoutID | null = null;\n\n  // Map of element (id) to the set of elements (ids) it owns.\n  // This map enables getOwnersListForElement() to avoid traversing the entire tree.\n  _ownersMap: Map<number, Set<number>> = new Map();\n\n  _profilerStore: ProfilerStore;\n\n  _recordChangeDescriptions: boolean = false;\n\n  // Incremented each time the store is mutated.\n  // This enables a passive effect to detect a mutation between render and commit phase.\n  _revision: number = 0;\n\n  // This Array must be treated as immutable!\n  // Passive effects will check it for changes between render and mount.\n  _roots: $ReadOnlyArray<number> = [];\n\n  _rootIDToCapabilities: Map<number, Capabilities> = new Map();\n\n  // Renderer ID is needed to support inspection fiber props, state, and hooks.\n  _rootIDToRendererID: Map<number, number> = new Map();\n\n  // These options may be initially set by a configuration option when constructing the Store.\n  _supportsInspectMatchingDOMElement: boolean = false;\n  _supportsClickToInspect: boolean = false;\n  _supportsTimeline: boolean = false;\n  _supportsTraceUpdates: boolean = false;\n\n  _isReloadAndProfileFrontendSupported: boolean = false;\n  _isReloadAndProfileBackendSupported: boolean = false;\n\n  // These options default to false but may be updated as roots are added and removed.\n  _rootSupportsBasicProfiling: boolean = false;\n  _rootSupportsTimelineProfiling: boolean = false;\n\n  _bridgeProtocol: BridgeProtocol | null = null;\n  _unsupportedBridgeProtocolDetected: boolean = false;\n  _unsupportedRendererVersionDetected: boolean = false;\n\n  // Total number of visible elements (within all roots).\n  // Used for windowing purposes.\n  _weightAcrossRoots: number = 0;\n\n  _shouldCheckBridgeProtocolCompatibility: boolean = false;\n  _hookSettings: $ReadOnly<DevToolsHookSettings> | null = null;\n  _shouldShowWarningsAndErrors: boolean = false;\n\n  // Only used in browser extension for synchronization with built-in Elements panel.\n  _lastSelectedHostInstanceElementId: Element['id'] | null = null;\n\n  constructor(bridge: FrontendBridge, config?: Config) {\n    super();\n\n    if (__DEBUG__) {\n      debug('constructor', 'subscribing to Bridge');\n    }\n\n    this._collapseNodesByDefault =\n      localStorageGetItem(LOCAL_STORAGE_COLLAPSE_ROOTS_BY_DEFAULT_KEY) ===\n      'true';\n\n    this._recordChangeDescriptions =\n      localStorageGetItem(LOCAL_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY) ===\n      'true';\n\n    this._componentFilters = getSavedComponentFilters();\n\n    let isProfiling = false;\n    if (config != null) {\n      isProfiling = config.isProfiling === true;\n\n      const {\n        supportsInspectMatchingDOMElement,\n        supportsClickToInspect,\n        supportsReloadAndProfile,\n        supportsTimeline,\n        supportsTraceUpdates,\n        checkBridgeProtocolCompatibility,\n      } = config;\n      if (supportsInspectMatchingDOMElement) {\n        this._supportsInspectMatchingDOMElement = true;\n      }\n      if (supportsClickToInspect) {\n        this._supportsClickToInspect = true;\n      }\n      if (supportsReloadAndProfile) {\n        this._isReloadAndProfileFrontendSupported = true;\n      }\n      if (supportsTimeline) {\n        this._supportsTimeline = true;\n      }\n      if (supportsTraceUpdates) {\n        this._supportsTraceUpdates = true;\n      }\n      if (checkBridgeProtocolCompatibility) {\n        this._shouldCheckBridgeProtocolCompatibility = true;\n      }\n    }\n\n    this._bridge = bridge;\n    bridge.addListener('operations', this.onBridgeOperations);\n    bridge.addListener(\n      'overrideComponentFilters',\n      this.onBridgeOverrideComponentFilters,\n    );\n    bridge.addListener('shutdown', this.onBridgeShutdown);\n    bridge.addListener(\n      'isReloadAndProfileSupportedByBackend',\n      this.onBackendReloadAndProfileSupported,\n    );\n    bridge.addListener(\n      'isNativeStyleEditorSupported',\n      this.onBridgeNativeStyleEditorSupported,\n    );\n    bridge.addListener(\n      'unsupportedRendererVersion',\n      this.onBridgeUnsupportedRendererVersion,\n    );\n\n    this._profilerStore = new ProfilerStore(bridge, this, isProfiling);\n\n    bridge.addListener('backendVersion', this.onBridgeBackendVersion);\n    bridge.addListener('saveToClipboard', this.onSaveToClipboard);\n    bridge.addListener('hookSettings', this.onHookSettings);\n    bridge.addListener('backendInitialized', this.onBackendInitialized);\n    bridge.addListener('selectElement', this.onHostInstanceSelected);\n  }\n\n  // This is only used in tests to avoid memory leaks.\n  assertExpectedRootMapSizes() {\n    if (this.roots.length === 0) {\n      // The only safe time to assert these maps are empty is when the store is empty.\n      this.assertMapSizeMatchesRootCount(this._idToElement, '_idToElement');\n      this.assertMapSizeMatchesRootCount(this._ownersMap, '_ownersMap');\n    }\n\n    // These maps should always be the same size as the number of roots\n    this.assertMapSizeMatchesRootCount(\n      this._rootIDToCapabilities,\n      '_rootIDToCapabilities',\n    );\n    this.assertMapSizeMatchesRootCount(\n      this._rootIDToRendererID,\n      '_rootIDToRendererID',\n    );\n  }\n\n  // This is only used in tests to avoid memory leaks.\n  assertMapSizeMatchesRootCount(map: Map<any, any>, mapName: string) {\n    const expectedSize = this.roots.length;\n    if (map.size !== expectedSize) {\n      this._throwAndEmitError(\n        Error(\n          `Expected ${mapName} to contain ${expectedSize} items, but it contains ${\n            map.size\n          } items\\n\\n${inspect(map, {\n            depth: 20,\n          })}`,\n        ),\n      );\n    }\n  }\n\n  get backendVersion(): string | null {\n    return this._backendVersion;\n  }\n\n  get collapseNodesByDefault(): boolean {\n    return this._collapseNodesByDefault;\n  }\n  set collapseNodesByDefault(value: boolean): void {\n    this._collapseNodesByDefault = value;\n\n    localStorageSetItem(\n      LOCAL_STORAGE_COLLAPSE_ROOTS_BY_DEFAULT_KEY,\n      value ? 'true' : 'false',\n    );\n\n    this.emit('collapseNodesByDefault');\n  }\n\n  get componentFilters(): Array<ComponentFilter> {\n    return this._componentFilters;\n  }\n  set componentFilters(value: Array<ComponentFilter>): void {\n    if (this._profilerStore.isProfilingBasedOnUserInput) {\n      // Re-mounting a tree while profiling is in progress might break a lot of assumptions.\n      // If necessary, we could support this- but it doesn't seem like a necessary use case.\n      this._throwAndEmitError(\n        Error('Cannot modify filter preferences while profiling'),\n      );\n    }\n\n    // Filter updates are expensive to apply (since they impact the entire tree).\n    // Let's determine if they've changed and avoid doing this work if they haven't.\n    const prevEnabledComponentFilters = this._componentFilters.filter(\n      filter => filter.isEnabled,\n    );\n    const nextEnabledComponentFilters = value.filter(\n      filter => filter.isEnabled,\n    );\n    let haveEnabledFiltersChanged =\n      prevEnabledComponentFilters.length !== nextEnabledComponentFilters.length;\n    if (!haveEnabledFiltersChanged) {\n      for (let i = 0; i < nextEnabledComponentFilters.length; i++) {\n        const prevFilter = prevEnabledComponentFilters[i];\n        const nextFilter = nextEnabledComponentFilters[i];\n        if (shallowDiffers(prevFilter, nextFilter)) {\n          haveEnabledFiltersChanged = true;\n          break;\n        }\n      }\n    }\n\n    this._componentFilters = value;\n\n    // Update persisted filter preferences stored in localStorage.\n    setSavedComponentFilters(value);\n\n    // Notify the renderer that filter preferences have changed.\n    // This is an expensive operation; it unmounts and remounts the entire tree,\n    // so only do it if the set of enabled component filters has changed.\n    if (haveEnabledFiltersChanged) {\n      this._bridge.send('updateComponentFilters', value);\n    }\n\n    this.emit('componentFilters');\n  }\n\n  get bridgeProtocol(): BridgeProtocol | null {\n    return this._bridgeProtocol;\n  }\n\n  get componentWithErrorCount(): number {\n    if (!this._shouldShowWarningsAndErrors) {\n      return 0;\n    }\n\n    return this._cachedComponentWithErrorCount;\n  }\n\n  get componentWithWarningCount(): number {\n    if (!this._shouldShowWarningsAndErrors) {\n      return 0;\n    }\n\n    return this._cachedComponentWithWarningCount;\n  }\n\n  get displayingErrorsAndWarningsEnabled(): boolean {\n    return this._shouldShowWarningsAndErrors;\n  }\n\n  get hasOwnerMetadata(): boolean {\n    return this._hasOwnerMetadata;\n  }\n\n  get nativeStyleEditorValidAttributes(): $ReadOnlyArray<string> | null {\n    return this._nativeStyleEditorValidAttributes;\n  }\n\n  get numElements(): number {\n    return this._weightAcrossRoots;\n  }\n\n  get profilerStore(): ProfilerStore {\n    return this._profilerStore;\n  }\n\n  get recordChangeDescriptions(): boolean {\n    return this._recordChangeDescriptions;\n  }\n  set recordChangeDescriptions(value: boolean): void {\n    this._recordChangeDescriptions = value;\n\n    localStorageSetItem(\n      LOCAL_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY,\n      value ? 'true' : 'false',\n    );\n\n    this.emit('recordChangeDescriptions');\n  }\n\n  get revision(): number {\n    return this._revision;\n  }\n\n  get rootIDToRendererID(): Map<number, number> {\n    return this._rootIDToRendererID;\n  }\n\n  get roots(): $ReadOnlyArray<number> {\n    return this._roots;\n  }\n\n  // At least one of the currently mounted roots support the Legacy profiler.\n  get rootSupportsBasicProfiling(): boolean {\n    return this._rootSupportsBasicProfiling;\n  }\n\n  // At least one of the currently mounted roots support the Timeline profiler.\n  get rootSupportsTimelineProfiling(): boolean {\n    return this._rootSupportsTimelineProfiling;\n  }\n\n  get supportsInspectMatchingDOMElement(): boolean {\n    return this._supportsInspectMatchingDOMElement;\n  }\n\n  get supportsClickToInspect(): boolean {\n    return this._supportsClickToInspect;\n  }\n\n  get supportsNativeStyleEditor(): boolean {\n    return this._isNativeStyleEditorSupported;\n  }\n\n  get supportsReloadAndProfile(): boolean {\n    return (\n      this._isReloadAndProfileFrontendSupported &&\n      this._isReloadAndProfileBackendSupported\n    );\n  }\n\n  // This build of DevTools supports the Timeline profiler.\n  // This is a static flag, controlled by the Store config.\n  get supportsTimeline(): boolean {\n    return this._supportsTimeline;\n  }\n\n  get supportsTraceUpdates(): boolean {\n    return this._supportsTraceUpdates;\n  }\n\n  get unsupportedBridgeProtocolDetected(): boolean {\n    return this._unsupportedBridgeProtocolDetected;\n  }\n\n  get unsupportedRendererVersionDetected(): boolean {\n    return this._unsupportedRendererVersionDetected;\n  }\n\n  get lastSelectedHostInstanceElementId(): Element['id'] | null {\n    return this._lastSelectedHostInstanceElementId;\n  }\n\n  containsElement(id: number): boolean {\n    return this._idToElement.has(id);\n  }\n\n  getElementAtIndex(index: number): Element | null {\n    if (index < 0 || index >= this.numElements) {\n      console.warn(\n        `Invalid index ${index} specified; store contains ${this.numElements} items.`,\n      );\n\n      return null;\n    }\n\n    // Find which root this element is in...\n    let root;\n    let rootWeight = 0;\n    for (let i = 0; i < this._roots.length; i++) {\n      const rootID = this._roots[i];\n      root = this._idToElement.get(rootID);\n\n      if (root === undefined) {\n        this._throwAndEmitError(\n          Error(\n            `Couldn't find root with id \"${rootID}\": no matching node was found in the Store.`,\n          ),\n        );\n\n        return null;\n      }\n\n      if (root.children.length === 0) {\n        continue;\n      }\n\n      if (rootWeight + root.weight > index) {\n        break;\n      } else {\n        rootWeight += root.weight;\n      }\n    }\n\n    if (root === undefined) {\n      return null;\n    }\n\n    // Find the element in the tree using the weight of each node...\n    // Skip over the root itself, because roots aren't visible in the Elements tree.\n    let currentElement: Element = root;\n    let currentWeight = rootWeight - 1;\n\n    while (index !== currentWeight) {\n      const numChildren = currentElement.children.length;\n      for (let i = 0; i < numChildren; i++) {\n        const childID = currentElement.children[i];\n        const child = this._idToElement.get(childID);\n\n        if (child === undefined) {\n          this._throwAndEmitError(\n            Error(\n              `Couldn't child element with id \"${childID}\": no matching node was found in the Store.`,\n            ),\n          );\n\n          return null;\n        }\n\n        const childWeight = child.isCollapsed ? 1 : child.weight;\n\n        if (index <= currentWeight + childWeight) {\n          currentWeight++;\n          currentElement = child;\n          break;\n        } else {\n          currentWeight += childWeight;\n        }\n      }\n    }\n\n    return currentElement || null;\n  }\n\n  getElementIDAtIndex(index: number): number | null {\n    const element = this.getElementAtIndex(index);\n    return element === null ? null : element.id;\n  }\n\n  getElementByID(id: number): Element | null {\n    const element = this._idToElement.get(id);\n    if (element === undefined) {\n      console.warn(`No element found with id \"${id}\"`);\n      return null;\n    }\n\n    return element;\n  }\n\n  // Returns a tuple of [id, index]\n  getElementsWithErrorsAndWarnings(): ErrorAndWarningTuples {\n    if (!this._shouldShowWarningsAndErrors) {\n      return [];\n    }\n\n    if (this._cachedErrorAndWarningTuples !== null) {\n      return this._cachedErrorAndWarningTuples;\n    }\n\n    const errorAndWarningTuples: ErrorAndWarningTuples = [];\n\n    this._errorsAndWarnings.forEach((_, id) => {\n      const index = this.getIndexOfElementID(id);\n      if (index !== null) {\n        let low = 0;\n        let high = errorAndWarningTuples.length;\n        while (low < high) {\n          const mid = (low + high) >> 1;\n          if (errorAndWarningTuples[mid].index > index) {\n            high = mid;\n          } else {\n            low = mid + 1;\n          }\n        }\n\n        errorAndWarningTuples.splice(low, 0, {id, index});\n      }\n    });\n\n    // Cache for later (at least until the tree changes again).\n    this._cachedErrorAndWarningTuples = errorAndWarningTuples;\n    return errorAndWarningTuples;\n  }\n\n  getErrorAndWarningCountForElementID(id: number): {\n    errorCount: number,\n    warningCount: number,\n  } {\n    if (!this._shouldShowWarningsAndErrors) {\n      return {errorCount: 0, warningCount: 0};\n    }\n\n    return this._errorsAndWarnings.get(id) || {errorCount: 0, warningCount: 0};\n  }\n\n  getIndexOfElementID(id: number): number | null {\n    const element = this.getElementByID(id);\n\n    if (element === null || element.parentID === 0) {\n      return null;\n    }\n\n    // Walk up the tree to the root.\n    // Increment the index by one for each node we encounter,\n    // and by the weight of all nodes to the left of the current one.\n    // This should be a relatively fast way of determining the index of a node within the tree.\n    let previousID = id;\n    let currentID = element.parentID;\n    let index = 0;\n    while (true) {\n      const current = this._idToElement.get(currentID);\n      if (current === undefined) {\n        return null;\n      }\n\n      const {children} = current;\n      for (let i = 0; i < children.length; i++) {\n        const childID = children[i];\n        if (childID === previousID) {\n          break;\n        }\n\n        const child = this._idToElement.get(childID);\n        if (child === undefined) {\n          return null;\n        }\n\n        index += child.isCollapsed ? 1 : child.weight;\n      }\n\n      if (current.parentID === 0) {\n        // We found the root; stop crawling.\n        break;\n      }\n\n      index++;\n\n      previousID = current.id;\n      currentID = current.parentID;\n    }\n\n    // At this point, the current ID is a root (from the previous loop).\n    // We also need to offset the index by previous root weights.\n    for (let i = 0; i < this._roots.length; i++) {\n      const rootID = this._roots[i];\n      if (rootID === currentID) {\n        break;\n      }\n\n      const root = this._idToElement.get(rootID);\n      if (root === undefined) {\n        return null;\n      }\n\n      index += root.weight;\n    }\n\n    return index;\n  }\n\n  getOwnersListForElement(ownerID: number): Array<Element> {\n    const list: Array<Element> = [];\n    const element = this._idToElement.get(ownerID);\n    if (element !== undefined) {\n      list.push({\n        ...element,\n        depth: 0,\n      });\n\n      const unsortedIDs = this._ownersMap.get(ownerID);\n      if (unsortedIDs !== undefined) {\n        const depthMap: Map<number, number> = new Map([[ownerID, 0]]);\n\n        // Items in a set are ordered based on insertion.\n        // This does not correlate with their order in the tree.\n        // So first we need to order them.\n        // I wish we could avoid this sorting operation; we could sort at insertion time,\n        // but then we'd have to pay sorting costs even if the owners list was never used.\n        // Seems better to defer the cost, since the set of ids is probably pretty small.\n        const sortedIDs = Array.from(unsortedIDs).sort(\n          (idA, idB) =>\n            (this.getIndexOfElementID(idA) || 0) -\n            (this.getIndexOfElementID(idB) || 0),\n        );\n\n        // Next we need to determine the appropriate depth for each element in the list.\n        // The depth in the list may not correspond to the depth in the tree,\n        // because the list has been filtered to remove intermediate components.\n        // Perhaps the easiest way to do this is to walk up the tree until we reach either:\n        // (1) another node that's already in the tree, or (2) the root (owner)\n        // at which point, our depth is just the depth of that node plus one.\n        sortedIDs.forEach(id => {\n          const innerElement = this._idToElement.get(id);\n          if (innerElement !== undefined) {\n            let parentID = innerElement.parentID;\n\n            let depth = 0;\n            while (parentID > 0) {\n              if (parentID === ownerID || unsortedIDs.has(parentID)) {\n                // $FlowFixMe[unsafe-addition] addition with possible null/undefined value\n                depth = depthMap.get(parentID) + 1;\n                depthMap.set(id, depth);\n                break;\n              }\n              const parent = this._idToElement.get(parentID);\n              if (parent === undefined) {\n                break;\n              }\n              parentID = parent.parentID;\n            }\n\n            if (depth === 0) {\n              this._throwAndEmitError(Error('Invalid owners list'));\n            }\n\n            list.push({...innerElement, depth});\n          }\n        });\n      }\n    }\n\n    return list;\n  }\n\n  getRendererIDForElement(id: number): number | null {\n    let current = this._idToElement.get(id);\n    while (current !== undefined) {\n      if (current.parentID === 0) {\n        const rendererID = this._rootIDToRendererID.get(current.id);\n        return rendererID == null ? null : rendererID;\n      } else {\n        current = this._idToElement.get(current.parentID);\n      }\n    }\n    return null;\n  }\n\n  getRootIDForElement(id: number): number | null {\n    let current = this._idToElement.get(id);\n    while (current !== undefined) {\n      if (current.parentID === 0) {\n        return current.id;\n      } else {\n        current = this._idToElement.get(current.parentID);\n      }\n    }\n    return null;\n  }\n\n  isInsideCollapsedSubTree(id: number): boolean {\n    let current = this._idToElement.get(id);\n    while (current != null) {\n      if (current.parentID === 0) {\n        return false;\n      } else {\n        current = this._idToElement.get(current.parentID);\n        if (current != null && current.isCollapsed) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  // TODO Maybe split this into two methods: expand() and collapse()\n  toggleIsCollapsed(id: number, isCollapsed: boolean): void {\n    let didMutate = false;\n\n    const element = this.getElementByID(id);\n    if (element !== null) {\n      if (isCollapsed) {\n        if (element.type === ElementTypeRoot) {\n          this._throwAndEmitError(Error('Root nodes cannot be collapsed'));\n        }\n\n        if (!element.isCollapsed) {\n          didMutate = true;\n          element.isCollapsed = true;\n\n          const weightDelta = 1 - element.weight;\n\n          let parentElement = this._idToElement.get(element.parentID);\n          while (parentElement !== undefined) {\n            // We don't need to break on a collapsed parent in the same way as the expand case below.\n            // That's because collapsing a node doesn't \"bubble\" and affect its parents.\n            parentElement.weight += weightDelta;\n            parentElement = this._idToElement.get(parentElement.parentID);\n          }\n        }\n      } else {\n        let currentElement: ?Element = element;\n        while (currentElement != null) {\n          const oldWeight = currentElement.isCollapsed\n            ? 1\n            : currentElement.weight;\n\n          if (currentElement.isCollapsed) {\n            didMutate = true;\n            currentElement.isCollapsed = false;\n\n            const newWeight = currentElement.isCollapsed\n              ? 1\n              : currentElement.weight;\n            const weightDelta = newWeight - oldWeight;\n\n            let parentElement = this._idToElement.get(currentElement.parentID);\n            while (parentElement !== undefined) {\n              parentElement.weight += weightDelta;\n              if (parentElement.isCollapsed) {\n                // It's important to break on a collapsed parent when expanding nodes.\n                // That's because expanding a node \"bubbles\" up and expands all parents as well.\n                // Breaking in this case prevents us from over-incrementing the expanded weights.\n                break;\n              }\n              parentElement = this._idToElement.get(parentElement.parentID);\n            }\n          }\n\n          currentElement =\n            currentElement.parentID !== 0\n              ? this.getElementByID(currentElement.parentID)\n              : null;\n        }\n      }\n\n      // Only re-calculate weights and emit an \"update\" event if the store was mutated.\n      if (didMutate) {\n        let weightAcrossRoots = 0;\n        this._roots.forEach(rootID => {\n          const {weight} = ((this.getElementByID(rootID): any): Element);\n          weightAcrossRoots += weight;\n        });\n        this._weightAcrossRoots = weightAcrossRoots;\n\n        // The Tree context's search reducer expects an explicit list of ids for nodes that were added or removed.\n        // In this  case, we can pass it empty arrays since nodes in a collapsed tree are still there (just hidden).\n        // Updating the selected search index later may require auto-expanding a collapsed subtree though.\n        this.emit('mutated', [[], new Map()]);\n      }\n    }\n  }\n\n  _adjustParentTreeWeight: (\n    parentElement: ?Element,\n    weightDelta: number,\n  ) => void = (parentElement, weightDelta) => {\n    let isInsideCollapsedSubTree = false;\n\n    while (parentElement != null) {\n      parentElement.weight += weightDelta;\n\n      // Additions and deletions within a collapsed subtree should not bubble beyond the collapsed parent.\n      // Their weight will bubble up when the parent is expanded.\n      if (parentElement.isCollapsed) {\n        isInsideCollapsedSubTree = true;\n        break;\n      }\n\n      parentElement = this._idToElement.get(parentElement.parentID);\n    }\n\n    // Additions and deletions within a collapsed subtree should not affect the overall number of elements.\n    if (!isInsideCollapsedSubTree) {\n      this._weightAcrossRoots += weightDelta;\n    }\n  };\n\n  _recursivelyUpdateSubtree(\n    id: number,\n    callback: (element: Element) => void,\n  ): void {\n    const element = this._idToElement.get(id);\n    if (element) {\n      callback(element);\n\n      element.children.forEach(child =>\n        this._recursivelyUpdateSubtree(child, callback),\n      );\n    }\n  }\n\n  onBridgeNativeStyleEditorSupported: ({\n    isSupported: boolean,\n    validAttributes: ?$ReadOnlyArray<string>,\n  }) => void = ({isSupported, validAttributes}) => {\n    this._isNativeStyleEditorSupported = isSupported;\n    this._nativeStyleEditorValidAttributes = validAttributes || null;\n\n    this.emit('supportsNativeStyleEditor');\n  };\n\n  onBridgeOperations: (operations: Array<number>) => void = operations => {\n    if (__DEBUG__) {\n      console.groupCollapsed('onBridgeOperations');\n      debug('onBridgeOperations', operations.join(','));\n    }\n\n    let haveRootsChanged = false;\n    let haveErrorsOrWarningsChanged = false;\n\n    // The first two values are always rendererID and rootID\n    const rendererID = operations[0];\n\n    const addedElementIDs: Array<number> = [];\n    // This is a mapping of removed ID -> parent ID:\n    const removedElementIDs: Map<number, number> = new Map();\n    // We'll use the parent ID to adjust selection if it gets deleted.\n\n    let i = 2;\n\n    // Reassemble the string table.\n    const stringTable: Array<string | null> = [\n      null, // ID = 0 corresponds to the null string.\n    ];\n    const stringTableSize = operations[i];\n    i++;\n\n    const stringTableEnd = i + stringTableSize;\n\n    while (i < stringTableEnd) {\n      const nextLength = operations[i];\n      i++;\n\n      const nextString = utfDecodeStringWithRanges(\n        operations,\n        i,\n        i + nextLength - 1,\n      );\n      stringTable.push(nextString);\n      i += nextLength;\n    }\n\n    while (i < operations.length) {\n      const operation = operations[i];\n      switch (operation) {\n        case TREE_OPERATION_ADD: {\n          const id = operations[i + 1];\n          const type = ((operations[i + 2]: any): ElementType);\n\n          i += 3;\n\n          if (this._idToElement.has(id)) {\n            this._throwAndEmitError(\n              Error(\n                `Cannot add node \"${id}\" because a node with that id is already in the Store.`,\n              ),\n            );\n          }\n\n          if (type === ElementTypeRoot) {\n            if (__DEBUG__) {\n              debug('Add', `new root node ${id}`);\n            }\n\n            const isStrictModeCompliant = operations[i] > 0;\n            i++;\n\n            const supportsBasicProfiling =\n              (operations[i] & PROFILING_FLAG_BASIC_SUPPORT) !== 0;\n            const supportsTimeline =\n              (operations[i] & PROFILING_FLAG_TIMELINE_SUPPORT) !== 0;\n            i++;\n\n            let supportsStrictMode = false;\n            let hasOwnerMetadata = false;\n\n            // If we don't know the bridge protocol, guess that we're dealing with the latest.\n            // If we do know it, we can take it into consideration when parsing operations.\n            if (\n              this._bridgeProtocol === null ||\n              this._bridgeProtocol.version >= 2\n            ) {\n              supportsStrictMode = operations[i] > 0;\n              i++;\n\n              hasOwnerMetadata = operations[i] > 0;\n              i++;\n            }\n\n            this._roots = this._roots.concat(id);\n            this._rootIDToRendererID.set(id, rendererID);\n            this._rootIDToCapabilities.set(id, {\n              supportsBasicProfiling,\n              hasOwnerMetadata,\n              supportsStrictMode,\n              supportsTimeline,\n            });\n\n            // Not all roots support StrictMode;\n            // don't flag a root as non-compliant unless it also supports StrictMode.\n            const isStrictModeNonCompliant =\n              !isStrictModeCompliant && supportsStrictMode;\n\n            this._idToElement.set(id, {\n              children: [],\n              depth: -1,\n              displayName: null,\n              hocDisplayNames: null,\n              id,\n              isCollapsed: false, // Never collapse roots; it would hide the entire tree.\n              isStrictModeNonCompliant,\n              key: null,\n              ownerID: 0,\n              parentID: 0,\n              type,\n              weight: 0,\n              compiledWithForget: false,\n            });\n\n            haveRootsChanged = true;\n          } else {\n            const parentID = operations[i];\n            i++;\n\n            const ownerID = operations[i];\n            i++;\n\n            const displayNameStringID = operations[i];\n            const displayName = stringTable[displayNameStringID];\n            i++;\n\n            const keyStringID = operations[i];\n            const key = stringTable[keyStringID];\n            i++;\n\n            if (__DEBUG__) {\n              debug(\n                'Add',\n                `node ${id} (${displayName || 'null'}) as child of ${parentID}`,\n              );\n            }\n\n            const parentElement = this._idToElement.get(parentID);\n            if (parentElement === undefined) {\n              this._throwAndEmitError(\n                Error(\n                  `Cannot add child \"${id}\" to parent \"${parentID}\" because parent node was not found in the Store.`,\n                ),\n              );\n\n              break;\n            }\n\n            parentElement.children.push(id);\n\n            const {\n              formattedDisplayName: displayNameWithoutHOCs,\n              hocDisplayNames,\n              compiledWithForget,\n            } = parseElementDisplayNameFromBackend(displayName, type);\n\n            const element: Element = {\n              children: [],\n              depth: parentElement.depth + 1,\n              displayName: displayNameWithoutHOCs,\n              hocDisplayNames,\n              id,\n              isCollapsed: this._collapseNodesByDefault,\n              isStrictModeNonCompliant: parentElement.isStrictModeNonCompliant,\n              key,\n              ownerID,\n              parentID,\n              type,\n              weight: 1,\n              compiledWithForget,\n            };\n\n            this._idToElement.set(id, element);\n            addedElementIDs.push(id);\n            this._adjustParentTreeWeight(parentElement, 1);\n\n            if (ownerID > 0) {\n              let set = this._ownersMap.get(ownerID);\n              if (set === undefined) {\n                set = new Set();\n                this._ownersMap.set(ownerID, set);\n              }\n              set.add(id);\n            }\n          }\n          break;\n        }\n        case TREE_OPERATION_REMOVE: {\n          const removeLength = operations[i + 1];\n          i += 2;\n\n          for (let removeIndex = 0; removeIndex < removeLength; removeIndex++) {\n            const id = operations[i];\n            const element = this._idToElement.get(id);\n\n            if (element === undefined) {\n              this._throwAndEmitError(\n                Error(\n                  `Cannot remove node \"${id}\" because no matching node was found in the Store.`,\n                ),\n              );\n\n              break;\n            }\n\n            i += 1;\n\n            const {children, ownerID, parentID, weight} = element;\n            if (children.length > 0) {\n              this._throwAndEmitError(\n                Error(`Node \"${id}\" was removed before its children.`),\n              );\n            }\n\n            this._idToElement.delete(id);\n\n            let parentElement: ?Element = null;\n            if (parentID === 0) {\n              if (__DEBUG__) {\n                debug('Remove', `node ${id} root`);\n              }\n\n              this._roots = this._roots.filter(rootID => rootID !== id);\n              this._rootIDToRendererID.delete(id);\n              this._rootIDToCapabilities.delete(id);\n\n              haveRootsChanged = true;\n            } else {\n              if (__DEBUG__) {\n                debug('Remove', `node ${id} from parent ${parentID}`);\n              }\n\n              parentElement = this._idToElement.get(parentID);\n              if (parentElement === undefined) {\n                this._throwAndEmitError(\n                  Error(\n                    `Cannot remove node \"${id}\" from parent \"${parentID}\" because no matching node was found in the Store.`,\n                  ),\n                );\n\n                break;\n              }\n\n              const index = parentElement.children.indexOf(id);\n              parentElement.children.splice(index, 1);\n            }\n\n            this._adjustParentTreeWeight(parentElement, -weight);\n            removedElementIDs.set(id, parentID);\n\n            this._ownersMap.delete(id);\n            if (ownerID > 0) {\n              const set = this._ownersMap.get(ownerID);\n              if (set !== undefined) {\n                set.delete(id);\n              }\n            }\n\n            if (this._errorsAndWarnings.has(id)) {\n              this._errorsAndWarnings.delete(id);\n              haveErrorsOrWarningsChanged = true;\n            }\n          }\n\n          break;\n        }\n        case TREE_OPERATION_REMOVE_ROOT: {\n          i += 1;\n\n          const id = operations[1];\n\n          if (__DEBUG__) {\n            debug(`Remove root ${id}`);\n          }\n\n          const recursivelyDeleteElements = (elementID: number) => {\n            const element = this._idToElement.get(elementID);\n            this._idToElement.delete(elementID);\n            if (element) {\n              // Mostly for Flow's sake\n              for (let index = 0; index < element.children.length; index++) {\n                recursivelyDeleteElements(element.children[index]);\n              }\n            }\n          };\n\n          const root = this._idToElement.get(id);\n          if (root === undefined) {\n            this._throwAndEmitError(\n              Error(\n                `Cannot remove root \"${id}\": no matching node was found in the Store.`,\n              ),\n            );\n\n            break;\n          }\n\n          recursivelyDeleteElements(id);\n\n          this._rootIDToCapabilities.delete(id);\n          this._rootIDToRendererID.delete(id);\n          this._roots = this._roots.filter(rootID => rootID !== id);\n          this._weightAcrossRoots -= root.weight;\n          break;\n        }\n        case TREE_OPERATION_REORDER_CHILDREN: {\n          const id = operations[i + 1];\n          const numChildren = operations[i + 2];\n          i += 3;\n\n          const element = this._idToElement.get(id);\n          if (element === undefined) {\n            this._throwAndEmitError(\n              Error(\n                `Cannot reorder children for node \"${id}\" because no matching node was found in the Store.`,\n              ),\n            );\n\n            break;\n          }\n\n          const children = element.children;\n          if (children.length !== numChildren) {\n            this._throwAndEmitError(\n              Error(\n                `Children cannot be added or removed during a reorder operation.`,\n              ),\n            );\n          }\n\n          for (let j = 0; j < numChildren; j++) {\n            const childID = operations[i + j];\n            children[j] = childID;\n            if (__DEV__) {\n              // This check is more expensive so it's gated by __DEV__.\n              const childElement = this._idToElement.get(childID);\n              if (childElement == null || childElement.parentID !== id) {\n                console.error(\n                  `Children cannot be added or removed during a reorder operation.`,\n                );\n              }\n            }\n          }\n          i += numChildren;\n\n          if (__DEBUG__) {\n            debug('Re-order', `Node ${id} children ${children.join(',')}`);\n          }\n          break;\n        }\n        case TREE_OPERATION_SET_SUBTREE_MODE: {\n          const id = operations[i + 1];\n          const mode = operations[i + 2];\n\n          i += 3;\n\n          // If elements have already been mounted in this subtree, update them.\n          // (In practice, this likely only applies to the root element.)\n          if (mode === StrictMode) {\n            this._recursivelyUpdateSubtree(id, element => {\n              element.isStrictModeNonCompliant = false;\n            });\n          }\n\n          if (__DEBUG__) {\n            debug(\n              'Subtree mode',\n              `Subtree with root ${id} set to mode ${mode}`,\n            );\n          }\n          break;\n        }\n        case TREE_OPERATION_UPDATE_TREE_BASE_DURATION:\n          // Base duration updates are only sent while profiling is in progress.\n          // We can ignore them at this point.\n          // The profiler UI uses them lazily in order to generate the tree.\n          i += 3;\n          break;\n        case TREE_OPERATION_UPDATE_ERRORS_OR_WARNINGS:\n          const id = operations[i + 1];\n          const errorCount = operations[i + 2];\n          const warningCount = operations[i + 3];\n\n          i += 4;\n\n          if (errorCount > 0 || warningCount > 0) {\n            this._errorsAndWarnings.set(id, {errorCount, warningCount});\n          } else if (this._errorsAndWarnings.has(id)) {\n            this._errorsAndWarnings.delete(id);\n          }\n          haveErrorsOrWarningsChanged = true;\n          break;\n        default:\n          this._throwAndEmitError(\n            new UnsupportedBridgeOperationError(\n              `Unsupported Bridge operation \"${operation}\"`,\n            ),\n          );\n      }\n    }\n\n    this._revision++;\n\n    // Any time the tree changes (e.g. elements added, removed, or reordered) cached indices may be invalid.\n    this._cachedErrorAndWarningTuples = null;\n\n    if (haveErrorsOrWarningsChanged) {\n      let componentWithErrorCount = 0;\n      let componentWithWarningCount = 0;\n\n      this._errorsAndWarnings.forEach(entry => {\n        if (entry.errorCount > 0) {\n          componentWithErrorCount++;\n        }\n\n        if (entry.warningCount > 0) {\n          componentWithWarningCount++;\n        }\n      });\n\n      this._cachedComponentWithErrorCount = componentWithErrorCount;\n      this._cachedComponentWithWarningCount = componentWithWarningCount;\n    }\n\n    if (haveRootsChanged) {\n      const prevRootSupportsProfiling = this._rootSupportsBasicProfiling;\n      const prevRootSupportsTimelineProfiling =\n        this._rootSupportsTimelineProfiling;\n\n      this._hasOwnerMetadata = false;\n      this._rootSupportsBasicProfiling = false;\n      this._rootSupportsTimelineProfiling = false;\n      this._rootIDToCapabilities.forEach(\n        ({supportsBasicProfiling, hasOwnerMetadata, supportsTimeline}) => {\n          if (supportsBasicProfiling) {\n            this._rootSupportsBasicProfiling = true;\n          }\n          if (hasOwnerMetadata) {\n            this._hasOwnerMetadata = true;\n          }\n          if (supportsTimeline) {\n            this._rootSupportsTimelineProfiling = true;\n          }\n        },\n      );\n\n      this.emit('roots');\n\n      if (this._rootSupportsBasicProfiling !== prevRootSupportsProfiling) {\n        this.emit('rootSupportsBasicProfiling');\n      }\n\n      if (\n        this._rootSupportsTimelineProfiling !==\n        prevRootSupportsTimelineProfiling\n      ) {\n        this.emit('rootSupportsTimelineProfiling');\n      }\n    }\n\n    if (__DEBUG__) {\n      console.log(printStore(this, true));\n      console.groupEnd();\n    }\n\n    this.emit('mutated', [addedElementIDs, removedElementIDs]);\n  };\n\n  // Certain backends save filters on a per-domain basis.\n  // In order to prevent filter preferences and applied filters from being out of sync,\n  // this message enables the backend to override the frontend's current (\"saved\") filters.\n  // This action should also override the saved filters too,\n  // else reloading the frontend without reloading the backend would leave things out of sync.\n  onBridgeOverrideComponentFilters: (\n    componentFilters: Array<ComponentFilter>,\n  ) => void = componentFilters => {\n    this._componentFilters = componentFilters;\n\n    setSavedComponentFilters(componentFilters);\n  };\n\n  onBridgeShutdown: () => void = () => {\n    if (__DEBUG__) {\n      debug('onBridgeShutdown', 'unsubscribing from Bridge');\n    }\n\n    const bridge = this._bridge;\n    bridge.removeListener('operations', this.onBridgeOperations);\n    bridge.removeListener(\n      'overrideComponentFilters',\n      this.onBridgeOverrideComponentFilters,\n    );\n    bridge.removeListener('shutdown', this.onBridgeShutdown);\n    bridge.removeListener(\n      'isReloadAndProfileSupportedByBackend',\n      this.onBackendReloadAndProfileSupported,\n    );\n    bridge.removeListener(\n      'isNativeStyleEditorSupported',\n      this.onBridgeNativeStyleEditorSupported,\n    );\n    bridge.removeListener(\n      'unsupportedRendererVersion',\n      this.onBridgeUnsupportedRendererVersion,\n    );\n    bridge.removeListener('backendVersion', this.onBridgeBackendVersion);\n    bridge.removeListener('bridgeProtocol', this.onBridgeProtocol);\n    bridge.removeListener('saveToClipboard', this.onSaveToClipboard);\n    bridge.removeListener('selectElement', this.onHostInstanceSelected);\n\n    if (this._onBridgeProtocolTimeoutID !== null) {\n      clearTimeout(this._onBridgeProtocolTimeoutID);\n      this._onBridgeProtocolTimeoutID = null;\n    }\n  };\n\n  onBackendReloadAndProfileSupported: (\n    isReloadAndProfileSupported: boolean,\n  ) => void = isReloadAndProfileSupported => {\n    this._isReloadAndProfileBackendSupported = isReloadAndProfileSupported;\n\n    this.emit('supportsReloadAndProfile');\n  };\n\n  onBridgeUnsupportedRendererVersion: () => void = () => {\n    this._unsupportedRendererVersionDetected = true;\n\n    this.emit('unsupportedRendererVersionDetected');\n  };\n\n  onBridgeBackendVersion: (backendVersion: string) => void = backendVersion => {\n    this._backendVersion = backendVersion;\n    this.emit('backendVersion');\n  };\n\n  onBridgeProtocol: (bridgeProtocol: BridgeProtocol) => void =\n    bridgeProtocol => {\n      if (this._onBridgeProtocolTimeoutID !== null) {\n        clearTimeout(this._onBridgeProtocolTimeoutID);\n        this._onBridgeProtocolTimeoutID = null;\n      }\n\n      this._bridgeProtocol = bridgeProtocol;\n\n      if (bridgeProtocol.version !== currentBridgeProtocol.version) {\n        // Technically newer versions of the frontend can, at least for now,\n        // gracefully handle older versions of the backend protocol.\n        // So for now we don't need to display the unsupported dialog.\n      }\n    };\n\n  onBridgeProtocolTimeout: () => void = () => {\n    this._onBridgeProtocolTimeoutID = null;\n\n    // If we timed out, that indicates the backend predates the bridge protocol,\n    // so we can set a fake version (0) to trigger the downgrade message.\n    this._bridgeProtocol = BRIDGE_PROTOCOL[0];\n\n    this.emit('unsupportedBridgeProtocolDetected');\n  };\n\n  onSaveToClipboard: (text: string) => void = text => {\n    copy(text);\n  };\n\n  onBackendInitialized: () => void = () => {\n    // Verify that the frontend version is compatible with the connected backend.\n    // See github.com/facebook/react/issues/21326\n    if (this._shouldCheckBridgeProtocolCompatibility) {\n      // Older backends don't support an explicit bridge protocol,\n      // so we should timeout eventually and show a downgrade message.\n      this._onBridgeProtocolTimeoutID = setTimeout(\n        this.onBridgeProtocolTimeout,\n        10000,\n      );\n\n      this._bridge.addListener('bridgeProtocol', this.onBridgeProtocol);\n      this._bridge.send('getBridgeProtocol');\n    }\n\n    this._bridge.send('getBackendVersion');\n    this._bridge.send('getIfHasUnsupportedRendererVersion');\n    this._bridge.send('getHookSettings'); // Warm up cached hook settings\n  };\n\n  onHostInstanceSelected: (elementId: number) => void = elementId => {\n    if (this._lastSelectedHostInstanceElementId === elementId) {\n      return;\n    }\n\n    this._lastSelectedHostInstanceElementId = elementId;\n    // By the time we emit this, there is no guarantee that TreeContext is rendered.\n    this.emit('hostInstanceSelected', elementId);\n  };\n\n  getHookSettings: () => void = () => {\n    if (this._hookSettings != null) {\n      this.emit('hookSettings', this._hookSettings);\n    } else {\n      this._bridge.send('getHookSettings');\n    }\n  };\n\n  updateHookSettings: (settings: $ReadOnly<DevToolsHookSettings>) => void =\n    settings => {\n      this._hookSettings = settings;\n\n      this._bridge.send('updateHookSettings', settings);\n      this.emit('settingsUpdated', settings);\n    };\n\n  onHookSettings: (settings: $ReadOnly<DevToolsHookSettings>) => void =\n    settings => {\n      this._hookSettings = settings;\n\n      this.setShouldShowWarningsAndErrors(settings.showInlineWarningsAndErrors);\n      this.emit('hookSettings', settings);\n    };\n\n  setShouldShowWarningsAndErrors(status: boolean): void {\n    const previousStatus = this._shouldShowWarningsAndErrors;\n    this._shouldShowWarningsAndErrors = status;\n\n    if (previousStatus !== status) {\n      // Propagate to subscribers, although tree state has not changed\n      this.emit('mutated', [[], new Map()]);\n    }\n  }\n\n  // The Store should never throw an Error without also emitting an event.\n  // Otherwise Store errors will be invisible to users,\n  // but the downstream errors they cause will be reported as bugs.\n  // For example, https://github.com/facebook/react/issues/21402\n  // Emitting an error event allows the ErrorBoundary to show the original error.\n  _throwAndEmitError(error: Error): empty {\n    this.emit('error', error);\n\n    // Throwing is still valuable for local development\n    // and for unit testing the Store itself.\n    throw error;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"path\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"fs\");","import {join, isAbsolute} from 'path';\nimport { URL } from 'url';\nimport { toNormalUrl } from 'jsc-safe-url';\nimport type { ParsedSourceData} from './types';\n\nfunction urlPathToLocalRelative(urlObject: URL) {\nconst segments = urlObject.pathname.split('/').filter(Boolean);\nreturn join(...segments);\n}\n\nexport function parseSourceUrl(pathString: string): ParsedSourceData {\ntry {\n  const parsedUrl = new URL(pathString);\n  return {\n    type: 'URL',\n    url: pathString,\n    relativePath: urlPathToLocalRelative(parsedUrl)\n  };\n} catch (err) {\n  // If the constructor throws, it's not a valid URL.\n  // Check if it’s an absolute path\n  return {\n    type: isAbsolute(pathString) ? 'absolute' : 'relative',\n    path: pathString\n  };\n}\n}\n\n// This function is based on describeComponentFrame() in packages/shared/ReactComponentStackFrame\nexport function formatSourceForDisplay(sourceURL: string, line: number) {\n  // Metro can return JSC-safe URLs, which have `//&` as a delimiter\n  // https://www.npmjs.com/package/jsc-safe-url\n  const sanitizedSourceURL = sourceURL.includes('//&')\n    ? toNormalUrl(sourceURL)\n    : sourceURL;\n\n  // Note: this RegExp doesn't work well with URLs from Metro,\n  // which provides bundle URL with query parameters prefixed with /&\n  const BEFORE_SLASH_RE = /^(.*)[\\\\\\/]/;\n\n  let nameOnly = sanitizedSourceURL.replace(BEFORE_SLASH_RE, '');\n\n  // In DEV, include code for a common special case:\n  // prefer \"folder/index.js\" instead of just \"index.js\".\n  if (/^index\\./.test(nameOnly)) {\n    const match = sanitizedSourceURL.match(BEFORE_SLASH_RE);\n    if (match) {\n      const pathBeforeSlash = match[1];\n      if (pathBeforeSlash) {\n        const folderName = pathBeforeSlash.replace(BEFORE_SLASH_RE, '');\n        nameOnly = folderName + '/' + nameOnly;\n      }\n    }\n  }\n\n  return `${nameOnly}:${line}`;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n */\n\nimport {__PERFORMANCE_PROFILE__} from './constants';\n\nconst supportsUserTiming =\n  typeof performance !== 'undefined' &&\n  // $FlowFixMe[method-unbinding]\n  typeof performance.mark === 'function' &&\n  // $FlowFixMe[method-unbinding]\n  typeof performance.clearMarks === 'function';\n\nconst supportsPerformanceNow =\n  // $FlowFixMe[method-unbinding]\n  typeof performance !== 'undefined' && typeof performance.now === 'function';\n\nfunction mark(markName: string): void {\n  if (supportsUserTiming) {\n    performance.mark(markName + '-start');\n  }\n}\n\nfunction measure(markName: string): void {\n  if (supportsUserTiming) {\n    performance.mark(markName + '-end');\n    performance.measure(markName, markName + '-start', markName + '-end');\n    performance.clearMarks(markName + '-start');\n    performance.clearMarks(markName + '-end');\n  }\n}\n\nfunction now(): number {\n  if (supportsPerformanceNow) {\n    return performance.now();\n  }\n  return Date.now();\n}\n\nexport async function withAsyncPerfMeasurements<TReturn>(\n  markName: string,\n  callback: () => Promise<TReturn>,\n  onComplete?: number => void,\n): Promise<TReturn> {\n  const start = now();\n  if (__PERFORMANCE_PROFILE__) {\n    mark(markName);\n  }\n  const result = await callback();\n\n  if (__PERFORMANCE_PROFILE__) {\n    measure(markName);\n  }\n\n  if (onComplete != null) {\n    const duration = now() - start;\n    onComplete(duration);\n  }\n\n  return result;\n}\n\nexport function withSyncPerfMeasurements<TReturn>(\n  markName: string,\n  callback: () => TReturn,\n  onComplete?: number => void,\n): TReturn {\n  const start = now();\n  if (__PERFORMANCE_PROFILE__) {\n    mark(markName);\n  }\n  const result = callback();\n\n  if (__PERFORMANCE_PROFILE__) {\n    measure(markName);\n  }\n\n  if (onComplete != null) {\n    const duration = now() - start;\n    onComplete(duration);\n  }\n\n  return result;\n}\n\nexport function withCallbackPerfMeasurements<TReturn>(\n  markName: string,\n  callback: (done: () => void) => TReturn,\n  onComplete?: number => void,\n): TReturn {\n  const start = now();\n  if (__PERFORMANCE_PROFILE__) {\n    mark(markName);\n  }\n\n  const done = () => {\n    if (__PERFORMANCE_PROFILE__) {\n      measure(markName);\n    }\n\n    if (onComplete != null) {\n      const duration = now() - start;\n      onComplete(duration);\n    }\n  };\n  return callback(done);\n}\n","export type SourceMapSegment =\n\t| [number]\n\t| [number, number, number, number]\n\t| [number, number, number, number, number];\nexport type SourceMapLine = SourceMapSegment[];\nexport type SourceMapMappings = SourceMapLine[];\n\nconst charToInteger: { [charCode: number]: number } = {};\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfor (let i = 0; i < chars.length; i++) {\n\tcharToInteger[chars.charCodeAt(i)] = i;\n}\n\nexport function decode(mappings: string): SourceMapMappings {\n\tconst decoded: SourceMapMappings = [];\n\tlet line: SourceMapLine = [];\n\tconst segment: SourceMapSegment = [\n\t\t0, // generated code column\n\t\t0, // source file index\n\t\t0, // source code line\n\t\t0, // source code column\n\t\t0, // name index\n\t];\n\n\tlet j = 0;\n\tfor (let i = 0, shift = 0, value = 0; i < mappings.length; i++) {\n\t\tconst c = mappings.charCodeAt(i);\n\n\t\tif (c === 44) { // \",\"\n\t\t\tsegmentify(line, segment, j);\n\t\t\tj = 0;\n\n\t\t} else if (c === 59) { // \";\"\n\t\t\tsegmentify(line, segment, j);\n\t\t\tj = 0;\n\t\t\tdecoded.push(line);\n\t\t\tline = [];\n\t\t\tsegment[0] = 0;\n\n\t\t} else {\n\t\t\tlet integer = charToInteger[c];\n\t\t\tif (integer === undefined) {\n\t\t\t\tthrow new Error('Invalid character (' + String.fromCharCode(c) + ')');\n\t\t\t}\n\n\t\t\tconst hasContinuationBit = integer & 32;\n\n\t\t\tinteger &= 31;\n\t\t\tvalue += integer << shift;\n\n\t\t\tif (hasContinuationBit) {\n\t\t\t\tshift += 5;\n\t\t\t} else {\n\t\t\t\tconst shouldNegate = value & 1;\n\t\t\t\tvalue >>>= 1;\n\n\t\t\t\tif (shouldNegate) {\n\t\t\t\t\tvalue = value === 0 ? -0x80000000 : -value;\n\t\t\t\t}\n\n\t\t\t\tsegment[j] += value;\n\t\t\t\tj++;\n\t\t\t\tvalue = shift = 0; // reset\n\t\t\t}\n\t\t}\n\t}\n\n\tsegmentify(line, segment, j);\n\tdecoded.push(line);\n\n\treturn decoded;\n}\n\nfunction segmentify(line: SourceMapSegment[], segment: SourceMapSegment, j: number) {\n\t// This looks ugly, but we're creating specialized arrays with a specific\n\t// length. This is much faster than creating a new array (which v8 expands to\n\t// a capacity of 17 after pushing the first item), or slicing out a subarray\n\t// (which is slow). Length 4 is assumed to be the most frequent, followed by\n\t// length 5 (since not everything will have an associated name), followed by\n\t// length 1 (it's probably rare for a source substring to not have an\n\t// associated segment data).\n\tif (j === 4) line.push([segment[0], segment[1], segment[2], segment[3]]);\n\telse if (j === 5) line.push([segment[0], segment[1], segment[2], segment[3], segment[4]]);\n\telse if (j === 1) line.push([segment[0]]);\n}\n\nexport function encode(decoded: SourceMapMappings): string {\n\tlet sourceFileIndex = 0;  // second field\n\tlet sourceCodeLine = 0;   // third field\n\tlet sourceCodeColumn = 0; // fourth field\n\tlet nameIndex = 0;        // fifth field\n\tlet mappings = '';\n\n\tfor (let i = 0; i < decoded.length; i++) {\n\t\tconst line = decoded[i];\n\t\tif (i > 0) mappings += ';';\n\t\tif (line.length === 0) continue;\n\n\t\tlet generatedCodeColumn = 0; // first field\n\n\t\tconst lineMappings: string[] = [];\n\n\t\tfor (const segment of line) {\n\t\t\tlet segmentMappings = encodeInteger(segment[0] - generatedCodeColumn);\n\t\t\tgeneratedCodeColumn = segment[0];\n\n\t\t\tif (segment.length > 1) {\n\t\t\t\tsegmentMappings +=\n\t\t\t\t\tencodeInteger(segment[1] - sourceFileIndex) +\n\t\t\t\t\tencodeInteger(segment[2] - sourceCodeLine) +\n\t\t\t\t\tencodeInteger(segment[3] - sourceCodeColumn);\n\n\t\t\t\tsourceFileIndex = segment[1];\n\t\t\t\tsourceCodeLine = segment[2];\n\t\t\t\tsourceCodeColumn = segment[3];\n\t\t\t}\n\n\t\t\tif (segment.length === 5) {\n\t\t\t\tsegmentMappings += encodeInteger(segment[4] - nameIndex);\n\t\t\t\tnameIndex = segment[4];\n\t\t\t}\n\n\t\t\tlineMappings.push(segmentMappings);\n\t\t}\n\n\t\tmappings += lineMappings.join(',');\n\t}\n\n\treturn mappings;\n}\n\nfunction encodeInteger(num: number): string {\n\tvar result = '';\n\tnum = num < 0 ? (-num << 1) | 1 : num << 1;\n\tdo {\n\t\tvar clamped = num & 31;\n\t\tnum >>>= 5;\n\t\tif (num > 0) {\n\t\t\tclamped |= 32;\n\t\t}\n\t\tresult += chars[clamped];\n\t} while (num > 0);\n\n\treturn result;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\nimport {withSyncPerfMeasurements} from 'react-devtools-shared/src/PerformanceLoggingUtils';\nimport {decode} from 'sourcemap-codec';\n\nimport type {\n  IndexSourceMap,\n  IndexSourceMapSection,\n  BasicSourceMap,\n  MixedSourceMap,\n} from './SourceMapTypes';\n\ntype SearchPosition = {\n  columnNumber: number,\n  lineNumber: number,\n};\n\ntype ResultPosition = {\n  column: number,\n  line: number,\n  sourceContent: string | null,\n  sourceURL: string | null,\n};\n\nexport type SourceMapConsumerType = {\n  originalPositionFor: SearchPosition => ResultPosition,\n};\n\ntype Mappings = Array<Array<Array<number>>>;\n\nexport default function SourceMapConsumer(\n  sourceMapJSON: MixedSourceMap | IndexSourceMapSection,\n): SourceMapConsumerType {\n  if (sourceMapJSON.sections != null) {\n    return IndexedSourceMapConsumer(((sourceMapJSON: any): IndexSourceMap));\n  } else {\n    return BasicSourceMapConsumer(((sourceMapJSON: any): BasicSourceMap));\n  }\n}\n\nfunction BasicSourceMapConsumer(sourceMapJSON: BasicSourceMap) {\n  const decodedMappings: Mappings = withSyncPerfMeasurements(\n    'Decoding source map mappings with sourcemap-codec',\n    () => decode(sourceMapJSON.mappings),\n  );\n\n  function originalPositionFor({\n    columnNumber,\n    lineNumber,\n  }: SearchPosition): ResultPosition {\n    // Error.prototype.stack columns are 1-based (like most IDEs) but ASTs are 0-based.\n    const targetColumnNumber = columnNumber - 1;\n\n    const lineMappings = decodedMappings[lineNumber - 1];\n\n    let nearestEntry = null;\n\n    let startIndex = 0;\n    let stopIndex = lineMappings.length - 1;\n    let index = -1;\n    while (startIndex <= stopIndex) {\n      index = Math.floor((stopIndex + startIndex) / 2);\n      nearestEntry = lineMappings[index];\n\n      const currentColumn = nearestEntry[0];\n      if (currentColumn === targetColumnNumber) {\n        break;\n      } else {\n        if (currentColumn > targetColumnNumber) {\n          if (stopIndex - index > 0) {\n            stopIndex = index;\n          } else {\n            index = stopIndex;\n            break;\n          }\n        } else {\n          if (index - startIndex > 0) {\n            startIndex = index;\n          } else {\n            index = startIndex;\n            break;\n          }\n        }\n      }\n    }\n\n    // We have found either the exact element, or the next-closest element.\n    // However there may be more than one such element.\n    // Make sure we always return the smallest of these.\n    while (index > 0) {\n      const previousEntry = lineMappings[index - 1];\n      const currentColumn = previousEntry[0];\n      if (currentColumn !== targetColumnNumber) {\n        break;\n      }\n      index--;\n    }\n\n    if (nearestEntry == null) {\n      // TODO maybe fall back to the runtime source instead of throwing?\n      throw Error(\n        `Could not find runtime location for line:${lineNumber} and column:${columnNumber}`,\n      );\n    }\n\n    const sourceIndex = nearestEntry[1];\n    const sourceContent =\n      sourceMapJSON.sourcesContent != null\n        ? sourceMapJSON.sourcesContent[sourceIndex]\n        : null;\n    const sourceURL = sourceMapJSON.sources[sourceIndex] ?? null;\n    const line = nearestEntry[2] + 1;\n    const column = nearestEntry[3];\n\n    return {\n      column,\n      line,\n      sourceContent: ((sourceContent: any): string | null),\n      sourceURL: ((sourceURL: any): string | null),\n    };\n  }\n\n  return (({\n    originalPositionFor,\n  }: any): SourceMapConsumerType);\n}\n\ntype Section = {\n  +generatedColumn: number,\n  +generatedLine: number,\n  +map: MixedSourceMap,\n\n  // Lazily parsed only when/as the section is needed.\n  sourceMapConsumer: SourceMapConsumerType | null,\n};\n\nfunction IndexedSourceMapConsumer(sourceMapJSON: IndexSourceMap) {\n  let lastOffset = {\n    line: -1,\n    column: 0,\n  };\n\n  const sections: Array<Section> = sourceMapJSON.sections.map(section => {\n    const offset = section.offset;\n    const offsetLine = offset.line;\n    const offsetColumn = offset.column;\n\n    if (\n      offsetLine < lastOffset.line ||\n      (offsetLine === lastOffset.line && offsetColumn < lastOffset.column)\n    ) {\n      throw new Error('Section offsets must be ordered and non-overlapping.');\n    }\n\n    lastOffset = offset;\n\n    return {\n      // The offset fields are 0-based, but we use 1-based indices when encoding/decoding from VLQ.\n      generatedLine: offsetLine + 1,\n      generatedColumn: offsetColumn + 1,\n      map: section.map,\n      sourceMapConsumer: null,\n    };\n  });\n\n  function originalPositionFor({\n    columnNumber,\n    lineNumber,\n  }: SearchPosition): ResultPosition {\n    // Error.prototype.stack columns are 1-based (like most IDEs) but ASTs are 0-based.\n    const targetColumnNumber = columnNumber - 1;\n\n    let section = null;\n\n    let startIndex = 0;\n    let stopIndex = sections.length - 1;\n    let index = -1;\n    while (startIndex <= stopIndex) {\n      index = Math.floor((stopIndex + startIndex) / 2);\n      section = sections[index];\n\n      const currentLine = section.generatedLine;\n      if (currentLine === lineNumber) {\n        const currentColumn = section.generatedColumn;\n        if (currentColumn === lineNumber) {\n          break;\n        } else {\n          if (currentColumn > targetColumnNumber) {\n            if (stopIndex - index > 0) {\n              stopIndex = index;\n            } else {\n              index = stopIndex;\n              break;\n            }\n          } else {\n            if (index - startIndex > 0) {\n              startIndex = index;\n            } else {\n              index = startIndex;\n              break;\n            }\n          }\n        }\n      } else {\n        if (currentLine > lineNumber) {\n          if (stopIndex - index > 0) {\n            stopIndex = index;\n          } else {\n            index = stopIndex;\n            break;\n          }\n        } else {\n          if (index - startIndex > 0) {\n            startIndex = index;\n          } else {\n            index = startIndex;\n            break;\n          }\n        }\n      }\n    }\n\n    if (section == null) {\n      // TODO maybe fall back to the runtime source instead of throwing?\n      throw Error(\n        `Could not find matching section for line:${lineNumber} and column:${columnNumber}`,\n      );\n    }\n\n    if (section.sourceMapConsumer === null) {\n      // Lazily parse the section only when it's needed.\n      // $FlowFixMe[invalid-constructor] Flow no longer supports calling new on functions\n      section.sourceMapConsumer = new SourceMapConsumer(section.map);\n    }\n\n    return section.sourceMapConsumer.originalPositionFor({\n      columnNumber,\n      lineNumber,\n    });\n  }\n\n  return (({\n    originalPositionFor,\n  }: any): SourceMapConsumerType);\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {normalizeUrl} from 'react-devtools-shared/src/utils';\nimport SourceMapConsumer from 'react-devtools-shared/src/hooks/SourceMapConsumer';\n\nimport type {Source} from 'react-devtools-shared/src/shared/types';\nimport type {FetchFileWithCaching} from 'react-devtools-shared/src/devtools/views/Components/FetchFileWithCachingContext';\n\nconst symbolicationCache: Map<string, Promise<Source | null>> = new Map();\n\nexport async function symbolicateSourceWithCache(\n  fetchFileWithCaching: FetchFileWithCaching,\n  sourceURL: string,\n  line: number, // 1-based\n  column: number, // 1-based\n): Promise<Source | null> {\n  const key = `${sourceURL}:${line}:${column}`;\n  const cachedPromise = symbolicationCache.get(key);\n  if (cachedPromise != null) {\n    return cachedPromise;\n  }\n\n  const promise = symbolicateSource(\n    fetchFileWithCaching,\n    sourceURL,\n    line,\n    column,\n  );\n  symbolicationCache.set(key, promise);\n\n  return promise;\n}\n\nconst SOURCE_MAP_ANNOTATION_PREFIX = 'sourceMappingURL=';\nexport async function symbolicateSource(\n  fetchFileWithCaching: FetchFileWithCaching,\n  sourceURL: string,\n  lineNumber: number, // 1-based\n  columnNumber: number, // 1-based\n): Promise<Source | null> {\n  const resource = await fetchFileWithCaching(sourceURL).catch(() => null);\n  if (resource == null) {\n    return null;\n  }\n\n  const resourceLines = resource.split(/[\\r\\n]+/);\n  for (let i = resourceLines.length - 1; i >= 0; --i) {\n    const resourceLine = resourceLines[i];\n\n    // In case there is empty last line\n    if (!resourceLine) continue;\n    // Not an annotation? Stop looking for a source mapping url.\n    if (!resourceLine.startsWith('//#')) break;\n\n    if (resourceLine.includes(SOURCE_MAP_ANNOTATION_PREFIX)) {\n      const sourceMapAnnotationStartIndex = resourceLine.indexOf(\n        SOURCE_MAP_ANNOTATION_PREFIX,\n      );\n      const sourceMapAt = resourceLine.slice(\n        sourceMapAnnotationStartIndex + SOURCE_MAP_ANNOTATION_PREFIX.length,\n        resourceLine.length,\n      );\n\n      const sourceMapURL = new URL(sourceMapAt, sourceURL).toString();\n      const sourceMap = await fetchFileWithCaching(sourceMapURL).catch(\n        () => null,\n      );\n      if (sourceMap != null) {\n        try {\n          const parsedSourceMap = JSON.parse(sourceMap);\n          const consumer = SourceMapConsumer(parsedSourceMap);\n          const {\n            sourceURL: possiblyURL,\n            line,\n            column,\n          } = consumer.originalPositionFor({\n            lineNumber, // 1-based\n            columnNumber, // 1-based\n          });\n\n          if (possiblyURL === null) {\n            return null;\n          }\n          try {\n            // sourceMapURL = https://react.dev/script.js.map\n            void new URL(possiblyURL); // test if it is a valid URL\n            const normalizedURL = normalizeUrl(possiblyURL);\n\n            return {sourceURL: normalizedURL, line, column};\n          } catch (e) {\n            // This is not valid URL\n            if (\n              // sourceMapURL = /file\n              possiblyURL.startsWith('/') ||\n              // sourceMapURL = C:\\\\...\n              possiblyURL.slice(1).startsWith(':\\\\\\\\')\n            ) {\n              // This is an absolute path\n              return {sourceURL: possiblyURL, line, column};\n            }\n\n            // This is a relative path\n            // possiblyURL = x.js.map, sourceMapURL = https://react.dev/script.js.map\n            const absoluteSourcePath = new URL(\n              possiblyURL,\n              sourceMapURL,\n            ).toString();\n            return {sourceURL: absoluteSourcePath, line, column};\n          }\n        } catch (e) {\n          return null;\n        }\n      }\n\n      return null;\n    }\n  }\n\n  return null;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport Bridge from 'react-devtools-shared/src/bridge';\nimport Store from 'react-devtools-shared/src/devtools/store';\nimport {getSavedComponentFilters} from 'react-devtools-shared/src/utils';\nimport {registerDevToolsEventLogger} from 'react-devtools-shared/src/registerDevToolsEventLogger';\nimport {Server} from 'ws';\nimport {join} from 'path';\nimport {readFileSync} from 'fs';\nimport {__DEBUG__} from 'react-devtools-shared/src/constants';\nimport { parseSourceUrl } from './utils';\nimport type {\n  StatusListener,\n  StatusTypes,\n  OnDisconnectedCallback,\n  OnDataCallback,\n  OnInspectionCallback,\n  InspectedElementPayload,\n} from './types';\nimport { v4 as uuid } from 'uuid'\n\n\nimport type {FrontendBridge} from 'react-devtools-shared/src/bridge';\nimport {symbolicateSourceWithCache} from 'react-devtools-shared/src/symbolicateSource';\n\nlet statusListener: StatusListener = (\n  message: string,\n  status?: StatusTypes,\n) => {\n  log('Status', message, status);\n};\n\nfunction setStatusListener(value: StatusListener): DevtoolsType {\n  statusListener = value;\n  return Devtools;\n}\n\nlet disconnectedCallback: OnDisconnectedCallback = () => {};\nfunction setDisconnectedCallback(value: OnDisconnectedCallback): DevtoolsType {\n  disconnectedCallback = value;\n  return Devtools;\n}\n\nlet dataCallback: OnDataCallback = () => {};\nfunction setDataCallback(value: OnDataCallback): DevtoolsType {\n  dataCallback = value;\n  return Devtools;\n}\n\nlet inspectionCallback: OnInspectionCallback = () => {};\nfunction setInspectionCallback(value: OnInspectionCallback): DevtoolsType {\n  inspectionCallback = value;\n  return Devtools;\n}\n\nfunction startInspectingHost() {\n  if (!bridge) {\n    console.log('no bridge');\n    return Devtools;\n  }\n  bridge.send('startInspectingHost');\n  return Devtools;\n}\n\nfunction stopInspectingHost() {\n  if (!bridge) {\n    console.log('no bridge');\n    return Devtools;\n  }\n  bridge.send('stopInspectingHost', false);\n  return Devtools;\n}\n\nlet bridge: FrontendBridge | null = null;\nlet store: Store | null = null;\n\nconst log = (...args: Array<mixed>) => console.log('[React DevTools]', ...args);\nlog.warn = (...args: Array<mixed>) => console.warn('[React DevTools]', ...args);\nlog.error = (...args: Array<mixed>) =>\n  console.error('[React DevTools]', ...args);\n\nfunction debug(methodName: string, ...args: Array<mixed>) {\n  if (__DEBUG__) {\n    console.log(\n      `%c[core/standalone] %c${methodName}`,\n      'color: teal; font-weight: bold;',\n      'font-weight: bold;',\n      ...args,\n    );\n  }\n}\n\n\n\nfunction reload() {\n  if (!bridge || !store) {\n    console.log('no bridge or store');\n    return;\n  }\n  const localBridge = bridge;\n  const localStore = store;\n\n  let inspectOwnerRequestId = null;\n\n  localBridge.addListener('selectElement', elementId => {\n    const rendererID = localStore.getRendererIDForElement(elementId);\n    // const element = localStore.getElementByID(elementId);\n\n    if (rendererID === null) {\n      console.log('no renderer id');\n      return;\n    }\n\n    const payload = {\n      id: elementId,\n      rendererID,\n      requestID: uuid(),\n      path: null,\n      forceFullData: true,\n    };\n\n    console.log('will ask to inspect', payload)\n\n    localBridge.send('inspectElement', payload);\n  });\n  \n  localBridge.addListener('startInspectingHost', () => {\n    inspectionCallback(true);\n  })\n\n  localBridge.addListener('stopInspectingHost', () => {\n    inspectionCallback(false);\n  })\n\n  localBridge.addListener('inspectedElement', async data => {\n    if (data == null) return null;\n\n    if (data.type === 'full-data') {\n      if (data.value.source == null) {\n        // Option 1 – we have no source, but owners\n        if (data.value.owners && data.value.owners.length) {\n          const [firstOwner] = data.value.owners;\n          const rendererID = localStore.getRendererIDForElement(firstOwner.id);\n          if (rendererID) {\n            inspectOwnerRequestId = uuid();\n\n            const payload = {\n              id: firstOwner.id,\n              rendererID,\n              requestID: inspectOwnerRequestId,\n              path: null,\n              forceFullData: true,\n            };\n\n            localBridge.send('inspectElement', payload);\n            return Promise.resolve(null);\n          }\n        // Option 2 – we have no source, no owners\n        } else {\n          return Promise.resolve(null);\n        }\n      } else {\n        const {sourceURL, line, column} = data.value.source;\n        // Option 3 we have a valid resource for the owner\n        if (data.responseID === inspectOwnerRequestId) {\n          const enrichedData: InspectedElementPayload = {\n            ...data,\n            value: {\n              ...data.value,\n              parsedSource: (await getParsedSourceData(sourceURL, line, column))\n            }\n          }\n          dataCallback(enrichedData);\n          return Promise.resolve(null);\n        // Option 4 we have a valid resource for the element\n        } else {\n          const enrichedData: InspectedElementPayload = {\n            ...data,\n            value: {\n              ...data.value,\n              parsedSource: (await getParsedSourceData(sourceURL, line, column))\n            }\n          }\n          dataCallback(enrichedData);\n          return Promise.resolve(null);\n        }\n      }\n    } else {\n      dataCallback(data);\n      return Promise.resolve(null);\n    }\n  });\n}\n\nasync function getParsedSourceData(sourceURL: string, line: number, column: number) {\n  const symbolicatedSource = await symbolicateSourceWithCache(\n    fetchFileWithCaching,\n    sourceURL,\n    line,\n    column,\n  );\n\n  if (symbolicatedSource) {\n    return {\n      symbolicated: true,\n      source: parseSourceUrl(symbolicatedSource.sourceURL),\n      line: symbolicatedSource.line,\n      column: symbolicatedSource.column\n    }\n  } else {\n    return {\n      symbolicated: false,\n      source: parseSourceUrl(sourceURL),\n      line: line,\n      column: column\n    }\n  }\n}\n\nfunction onDisconnected() {\n  disconnectedCallback();\n}\n\nfunction onError({code, message}: $FlowFixMe) {\n  console.error(`Error: ${code} ${message}`);\n}\n\nfunction initialize(socket: WebSocket) {\n  const listeners = [];\n  socket.onmessage = event => {\n    let data;\n    try {\n      if (typeof event.data === 'string') {\n        data = JSON.parse(event.data);\n\n        if (__DEBUG__) {\n          debug('WebSocket.onmessage', data);\n        }\n      } else {\n        throw Error();\n      }\n    } catch (e) {\n      log.error('Failed to parse JSON', event.data);\n      return;\n    }\n    listeners.forEach(fn => {\n      try {\n        fn(data);\n      } catch (error) {\n        log.error('Error calling listener', data);\n        throw error;\n      }\n    });\n  };\n\n  bridge = new Bridge({\n    listen(fn) {\n      listeners.push(fn);\n      return () => {\n        const index = listeners.indexOf(fn);\n        if (index >= 0) {\n          listeners.splice(index, 1);\n        }\n      };\n    },\n    send(event: string, payload: any, transferable?: Array<any>) {\n      if (socket.readyState === socket.OPEN) {\n        socket.send(JSON.stringify({event, payload}));\n      }\n    },\n  });\n\n  ((bridge: any): FrontendBridge).addListener('shutdown', () => {\n    socket.close();\n  });\n\n  // $FlowFixMe[incompatible-call] found when upgrading Flow\n  store = new Store(bridge, {\n    checkBridgeProtocolCompatibility: true,\n    supportsTraceUpdates: true,\n    supportsClickToInspect: true,\n  });\n\n  log('Connected');\n  statusListener('DevTools initialized.', 'devtools-connected');\n  reload();\n}\n\nfunction connectToSocket(socket: WebSocket): {close(): void} {\n  socket.onerror = err => {\n    onDisconnected();\n    log.error('Error with websocket connection', err);\n  };\n  socket.onclose = () => {\n    onDisconnected();\n    log('Connection to RN closed');\n  };\n  initialize(socket);\n\n  return {\n    close: function () {\n      onDisconnected();\n    },\n  };\n}\n\ntype ServerOptions = {\n  key?: string,\n  cert?: string,\n};\n\ntype LoggerOptions = {\n  surface?: ?string,\n};\n\nfunction startServer(\n  port: number = 8097,\n  host: string = 'localhost',\n  httpsOptions?: ServerOptions,\n  loggerOptions?: LoggerOptions,\n  attempts: number = 0,\n): DevtoolsType {\n  registerDevToolsEventLogger(loggerOptions?.surface ?? 'standalone');\n\n  const useHttps = !!httpsOptions;\n  const httpServer = useHttps\n    ? require('https').createServer(httpsOptions)\n    : require('http').createServer();\n  const server = new Server({server: httpServer, maxPayload: 1e9});\n  let connected: WebSocket | null = null;\n\n  server.on('connection', (socket: WebSocket) => {\n    if (connected !== null) {\n      connected.close();\n      log.warn(\n        'Only one connection allowed at a time.',\n        'Closing the previous connection',\n      );\n    }\n    connected = socket;\n    socket.onerror = error => {\n      connected = null;\n      onDisconnected();\n      log.error('Error with websocket connection', error);\n    };\n    socket.onclose = () => {\n      connected = null;\n      onDisconnected();\n      log('Connection to RN closed');\n    };\n    initialize(socket);\n  });\n\n  function handleWSError(event: $FlowFixMe) {\n    if (event.code === 'EADDRINUSE') {\n      if (attempts < 10) {\n        log.warn(`Port ${port} in use, trying port ${port + 1}...`);\n        // Try next port\n        return startServer(\n          port + 1,\n          host,\n          httpsOptions,\n          loggerOptions,\n          attempts + 1,\n        );\n      } else {\n        onError(event);\n        statusListener(\n          'Failed to start the server after 10 attempts.',\n          'error',\n        );\n      }\n    } else {\n      onError(event);\n      statusListener('Failed to start the server.', 'error');\n    }\n    return Devtools;\n  }\n\n  server.on('error', handleWSError);\n\n  function handleError(event: $FlowFixMe) {\n    onError(event);\n    statusListener('Failed to start the server.', 'error');\n    return Devtools;\n  }\n\n  httpServer.on('error', handleError);\n\n  httpServer.on('request', (request: $FlowFixMe, response: $FlowFixMe) => {\n    // Serve a file that immediately sets up the connection.\n\n   const backendFilePath = process.env.NODE_ENV === 'development'\n    ? join(__dirname, 'backend.js')\n    : join(__dirname, 'devtools', 'react', 'dist', 'backend.js') \n\n    const backendFile = readFileSync(backendFilePath);\n\n    const savedPreferencesString = `\n      window.__REACT_DEVTOOLS_COMPONENT_FILTERS__ = ${JSON.stringify(\n        getSavedComponentFilters(),\n      )};`;\n\n    response.end(\n      savedPreferencesString +\n        '\\n;' +\n        backendFile.toString() +\n        '\\n;' +\n        'ReactDevToolsBackend.initialize();' +\n        '\\n' +\n        `ReactDevToolsBackend.connectToDevTools({port: ${port}, host: '${host}', useHttps: ${\n          useHttps ? 'true' : 'false'\n        }});\n        `,\n    );\n  });\n\n  httpServer.listen(port, () => {\n    Devtools.currentPort = port;\n    statusListener(\n      'The server is listening on the port ' + port + '.',\n      'server-connected',\n    );\n  });\n\n  return Devtools;\n}\n\nconst resourceCache: Map<string, string> = new Map();\n\n// As a potential improvement, this should be done from the backend of RDT.\n// Browser extension is doing this via exchanging messages\n// between devtools_page and dedicated content script for it, see `fetchFileWithCaching.js`.\nasync function fetchFileWithCaching(url: string): Promise<string> {\n  if (resourceCache.has(url)) {\n    const content = resourceCache.get(url);\n    if (content != null) {\n      return Promise.resolve(content);\n    }\n  }\n\n  return fetch(url)\n    .then(data => data.text())\n    .then(content => {\n      resourceCache.set(url, content);\n      return content;\n    });\n}\n\nconst Devtools: DevtoolsType = {\n  currentPort: null,\n  connectToSocket,\n  setStatusListener,\n  setDisconnectedCallback,\n  startServer,\n  setDataCallback,\n  setInspectionCallback,\n  startInspectingHost,\n  stopInspectingHost,\n};\n\ntype DevtoolsType = {\n  currentPort: ?number,\n  connectToSocket: (socket: WebSocket) => {close(): void},\n  setStatusListener: (value: StatusListener) => DevtoolsType,\n  setDisconnectedCallback: (value: OnDisconnectedCallback) => DevtoolsType,\n  setDataCallback: (value: OnDataCallback) => DevtoolsType,\n  setInspectionCallback: (value: OnInspectionCallback) => DevtoolsType,\n  startInspectingHost: () => DevtoolsType,\n  stopInspectingHost: () => DevtoolsType,\n  startServer: (\n    port: number,\n    host: string,\n    httpsOptions?: ServerOptions,\n    loggerOptions?: LoggerOptions,\n  ) => DevtoolsType,\n};\n\nexport default Devtools;\n"],"names":["module","exports","document","addEventListener","_resolve","_dataType","_intercept","clipboard","copy","_data","_bogusSelection","cleanup","window","getSelection","removeAllRanges","e","key","clipboardData","setData","preventDefault","data","Promise","resolve","reject","Node","XMLSerializer","serializeToString","Object","triggerCopy","tryBogusSelect","execCommand","Error","sel","queryCommandEnabled","isCollapsed","range","createRange","selectNodeContents","body","addRange","bogusSelect","paste","getData","dataType","ClipboardEvent","a","b","apply","arguments","c","this","TypeError","_state","_value","_deferreds","i","f","d","push","j","onFulfilled","onRejected","then","g","call","length","h","immediateFn","setImmediate","setTimeout","k","Array","isArray","prototype","toString","all","slice","constructor","race","strData","definition","URI_REGEX","_rfc3986Parse","url","match","schemeAndAuthority","path","hasQueryPart","queryWithoutQuestionMark","fragmentWithHash","toNormalUrl","urlToNormalize","parsedUrl","indexOf","replace","isJscSafeUrl","toJscSafeUrl","urlToConvert","LRUCache","makeSymbol","Map","require","util","Yallist","MAX","Symbol","process","env","_nodeLRUCacheForceNoSymbol","LENGTH","LENGTH_CALCULATOR","ALLOW_STALE","MAX_AGE","DISPOSE","NO_DISPOSE_ON_SET","LRU_LIST","CACHE","naiveLength","options","max","Infinity","lc","stale","maxAge","dispose","noDisposeOnSet","reset","forEachStep","self","fn","node","thisp","hit","value","isStale","del","undefined","get","doUse","unshiftNode","diff","Date","now","trim","walker","tail","prev","delete","removeNode","Entry","defineProperty","set","mL","enumerable","allowStale","mA","lC","forEach","rforEach","head","next","keys","toArray","map","values","dump","v","filter","dumpLru","inspect","n","opts","str","extras","didFirst","item","split","join","val","len","has","unshift","peek","pop","load","arr","l","expiresAt","prune","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","marker","runClearTimeout","Item","array","noop","nextTick","args","title","browser","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","npm_package_name","npm_lifecycle_script","TEST_PSEUDOMAP","hasOwnProperty","PseudoMap","clear","kv","same","_index","find","s","res","size","create","configurable","writable","entries","v1","v4","uuid","byteToHex","substr","buf","offset","bth","crypto","randomBytes","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","clockseq","seedBytes","msecs","getTime","nsecs","dt","tl","tmh","rnds","random","ii","WebSocket","createWebSocketStream","Server","Receiver","Sender","EMPTY_BUFFER","list","totalLength","target","Buffer","allocUnsafe","_mask","source","mask","output","_unmask","buffer","toArrayBuffer","byteLength","byteOffset","toBuffer","readOnly","isBuffer","ArrayBuffer","from","isView","bufferUtil","bu","BufferUtil","unmask","BINARY_TYPES","GUID","kStatusCode","kWebSocket","alloc","NOOP","Event","type","MessageEvent","super","CloseEvent","code","reason","wasClean","_closeFrameReceived","_closeFrameSent","OpenEvent","ErrorEvent","error","message","EventTarget","listener","onMessage","onClose","onError","onOpen","method","_listener","removeEventListener","tokenChars","dest","elem","format","extensions","extension","configurations","params","parse","header","offers","extensionName","paramName","mustUnescape","isEscaping","inQuotes","start","end","charCodeAt","SyntaxError","token","kDone","kRun","concurrency","pending","jobs","add","job","shift","zlib","Limiter","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","kError","zlibLimiter","deflateOnData","chunk","inflateOnData","_maxPayload","RangeError","inflateOnError","err","_inflate","isServer","maxPayload","_options","_threshold","threshold","_isServer","_deflate","concurrencyLimit","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","accept","normalizeParams","acceptAsServer","acceptAsClient","close","callback","accepted","response","num","Number","isInteger","decompress","fin","done","_decompress","result","compress","_compress","endpoint","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","write","flush","_readableState","endEmitted","createDeflateRaw","zlibDeflateOptions","Z_SYNC_FLUSH","Writable","PerMessageDeflate","isValidStatusCode","isValidUTF8","ErrorCtor","prefix","statusCode","errorCode","captureStackTrace","binaryType","_binaryType","_extensions","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_loop","_write","encoding","cb","startLoop","consume","dst","Uint8Array","getInfo","getPayloadLength16","getPayloadLength64","getMask","compressed","haveLength","readUInt16BE","readUInt32BE","Math","pow","controlMessage","dataMessage","er","messageLength","fragments","randomFillSync","applyMask","socket","_socket","_firstFragment","_deflating","_queue","static","merge","payloadLength","opcode","rsv1","writeUInt16BE","writeUInt32BE","enqueue","doClose","sendFrame","frame","ping","doPing","pong","doPong","send","perMessageDeflate","binary","dispatch","_","destroyed","dequeue","Reflect","cork","uncork","Duplex","emitClose","stream","duplexOnEnd","_writableState","finished","destroy","duplexOnError","listenerCount","ws","resumeOnReceiverDrain","terminateOnDestroy","receiverOnDrain","resume","readyState","CONNECTING","_receiver","duplex","autoDestroy","objectMode","writableObjectMode","msg","pause","_destroy","CLOSED","called","terminate","_final","_read","OPEN","CLOSING","needDrain","_isValidUTF8","Validation","EventEmitter","http","createHash","keyRegex","server","socketOnError","abortHandshake","headers","STATUS_CODES","Connection","handleProtocols","clientTracking","verifyClient","noServer","backlog","host","port","_server","createServer","req","writeHead","listen","emitConnection","bind","_removeListeners","event","addListeners","listening","upgrade","handleUpgrade","clients","Set","address","client","shouldHandle","index","toLowerCase","test","info","origin","secure","authorized","encrypted","verified","completeUpgrade","readable","update","digest","protocol","_protocol","setSocket","https","net","tls","Readable","URL","readyStates","protocolVersions","protocols","_closeCode","_closeMessage","_closeTimer","_readyState","_sender","_bufferedAmount","_redirects","initAsClient","includes","bufferedAmount","onclose","onerror","onopen","onmessage","_url","receiver","receiverOnConclude","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","setNoDelay","socketOnClose","socketOnData","socketOnEnd","_req","errorEmitted","sendAfterClose","websocket","protocolVersion","followRedirects","maxRedirects","createConnection","socketPath","hostname","href","isUnixSocket","pathname","emitErrorAndClose","isSecure","defaultPort","tlsConnect","netConnect","startsWith","Upgrade","search","handshakeTimeout","Origin","username","password","auth","parts","_originalUnixSocket","_originalSecure","_originalHostOrSocketPath","isSameHost","authorization","cookie","aborted","location","addr","abort","serverProt","protList","protError","secWebSocketExtensions","extensionNames","connect","servername","isIP","setHeader","receiverOnFinish","read","property","pushNode","forEachReverse","getReverse","mapReverse","reduce","initial","acc","reduceReverse","toArrayReverse","to","ret","sliceReverse","reverse","p","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","o","obj","prop","r","toStringTag","listenersMap","didThrow","caughtError","clonedListeners","splice","BRIDGE_PROTOCOL","minNpmVersion","maxNpmVersion","currentBridgeProtocol","wall","_messageQueue","_wall","_scheduledFlush","id","rendererID","wasForwarded","_wallUnlisten","payload","overrideValueAtPath","_isShutdown","console","warn","devtoolsJestTestScheduler","_flush","queueMicrotask","shutdown","wallUnlisten","__PERFORMANCE_PROFILE__","LOCAL_STORAGE_COMPONENT_FILTER_PREFERENCES_KEY","ElementTypeClass","ElementTypeFunction","ElementTypeForwardRef","ElementTypeMemo","ElementTypeVirtual","ComponentFilterLocation","localStorageGetItem","localStorage","getItem","localStorageSetItem","setItem","utfDecodeStringWithRanges","left","right","string","String","fromCodePoint","getSavedComponentFilters","raw","filterOutLocationComponentFilters","JSON","isEnabled","setSavedComponentFilters","componentFilters","stringify","parseElementDisplayNameFromBackend","displayName","formattedDisplayName","hocDisplayNames","compiledWithForget","displayNameWithoutForgetWrapper","matches","shallowDiffers","attribute","backendToFrontendSerializedElementMapper","element","for","iterator","asyncIterator","WeakMap","LRU","formatDuration","duration","round","rootToCommitTreeMap","recursivelyInitializeTree","parentID","nodes","dataForRoot","snapshots","children","treeBaseDuration","initialTreeBaseDurations","childID","updateTree","commitTree","operations","getClonedNode","clonedNode","assign","stringTable","stringTableSize","stringTableEnd","nextLength","nextString","operation","parentNode","removeLength","removeIndex","numChildren","rootID","cachedChartData","ProfilingCache","profilerStore","commitIndex","commitTrees","profilingData","dataForRoots","getCommitTree","_profilerStore","fiberID","cachedFiberCommits","_fiberCommits","fiberCommits","getDataForRoot","commitData","commitDatum","fiberActualDurations","getCommitData","fiberSelfDurations","chartDataKey","idToDepthMap","renderPathNodes","rows","maxDepth","maxSelfDuration","walkTree","rightOffset","currentDepth","actualDuration","selfDuration","didRender","maybeKey","maybeBadge","maybeForgetBadge","label","chartNode","baseDuration","root","currentID","chartData","depth","getFlamegraphChartData","chartNodes","maxValue","sort","getRankedChartData","invalidate","logEvent","ProfilerStore","bridge","store","defaultIsProfiling","elementID","profilingSnapshots","_store","getElementByID","snapshotNode","_takeProfilingSnapshotRecursive","_isBackendProfiling","profilingOperations","_inProgressOperationsByRootID","_initialRendererIDs","_initialSnapshotsByRootID","_rendererIDsThatReportedProfilingData","dataBackend","_rendererQueue","_dataBackends","_dataFrontend","dataBackends","operationsByRootID","snapshotsByRootID","timelineDataArray","timelineData","batchUIDToMeasuresKeyValueArray","internalModuleSourceToRanges","laneToLabelKeyValueArray","laneToReactMeasureKeyValueArray","rest","batchUIDToMeasuresMap","laneToLabelMap","laneToReactMeasureMap","convertedCommitData","commitDataBackend","changeDescriptions","effectDuration","passiveEffectDuration","priorityLevel","timestamp","updaters","imported","prepareProfilingDataFrontendFromBackendAndStore","_bridge","onBridgeOperations","onBridgeProfilingData","onProfilingStatus","onBridgeShutdown","isProfiling","rootIDToRendererID","roots","_isProfilingBasedOnUserInput","event_name","error_message","error_stack","stack","error_component_stack","_cache","didRecordCommits","isProcessingData","isProfilingBasedOnUserInput","profilingCache","startProfiling","recordChangeDescriptions","recordTimeline","supportsTimeline","stopProfiling","UnsupportedBridgeOperationError","LOCAL_STORAGE_COLLAPSE_ROOTS_BY_DEFAULT_KEY","LOCAL_STORAGE_RECORD_CHANGE_DESCRIPTIONS_KEY","Store","config","parentElement","weightDelta","isInsideCollapsedSubTree","weight","_idToElement","_weightAcrossRoots","isSupported","validAttributes","_isNativeStyleEditorSupported","_nativeStyleEditorValidAttributes","haveRootsChanged","haveErrorsOrWarningsChanged","addedElementIDs","removedElementIDs","_throwAndEmitError","isStrictModeCompliant","supportsBasicProfiling","supportsStrictMode","hasOwnerMetadata","_bridgeProtocol","_roots","_rootIDToRendererID","_rootIDToCapabilities","isStrictModeNonCompliant","ownerID","displayNameWithoutHOCs","_collapseNodesByDefault","_adjustParentTreeWeight","_ownersMap","_errorsAndWarnings","recursivelyDeleteElements","mode","_recursivelyUpdateSubtree","errorCount","warningCount","_revision","_cachedErrorAndWarningTuples","componentWithErrorCount","componentWithWarningCount","entry","_cachedComponentWithErrorCount","_cachedComponentWithWarningCount","prevRootSupportsProfiling","_rootSupportsBasicProfiling","prevRootSupportsTimelineProfiling","_rootSupportsTimelineProfiling","_hasOwnerMetadata","_componentFilters","onBridgeOverrideComponentFilters","onBackendReloadAndProfileSupported","onBridgeNativeStyleEditorSupported","onBridgeUnsupportedRendererVersion","onBridgeBackendVersion","onBridgeProtocol","onSaveToClipboard","onHostInstanceSelected","_onBridgeProtocolTimeoutID","isReloadAndProfileSupported","_isReloadAndProfileBackendSupported","_unsupportedRendererVersionDetected","backendVersion","_backendVersion","bridgeProtocol","text","_shouldCheckBridgeProtocolCompatibility","onBridgeProtocolTimeout","elementId","_lastSelectedHostInstanceElementId","_hookSettings","settings","setShouldShowWarningsAndErrors","showInlineWarningsAndErrors","_recordChangeDescriptions","supportsInspectMatchingDOMElement","supportsClickToInspect","supportsReloadAndProfile","supportsTraceUpdates","checkBridgeProtocolCompatibility","_supportsInspectMatchingDOMElement","_supportsClickToInspect","_isReloadAndProfileFrontendSupported","_supportsTimeline","_supportsTraceUpdates","onHookSettings","onBackendInitialized","assertExpectedRootMapSizes","assertMapSizeMatchesRootCount","mapName","expectedSize","collapseNodesByDefault","prevEnabledComponentFilters","nextEnabledComponentFilters","haveEnabledFiltersChanged","_shouldShowWarningsAndErrors","displayingErrorsAndWarningsEnabled","nativeStyleEditorValidAttributes","numElements","revision","rootSupportsBasicProfiling","rootSupportsTimelineProfiling","supportsNativeStyleEditor","unsupportedBridgeProtocolDetected","_unsupportedBridgeProtocolDetected","unsupportedRendererVersionDetected","lastSelectedHostInstanceElementId","containsElement","getElementAtIndex","rootWeight","currentElement","currentWeight","child","childWeight","getElementIDAtIndex","getElementsWithErrorsAndWarnings","errorAndWarningTuples","getIndexOfElementID","low","high","mid","getErrorAndWarningCountForElementID","previousID","current","getOwnersListForElement","unsortedIDs","depthMap","idA","idB","innerElement","parent","getRendererIDForElement","getRootIDForElement","toggleIsCollapsed","didMutate","oldWeight","weightAcrossRoots","status","previousStatus","urlPathToLocalRelative","urlObject","segments","Boolean","parseSourceUrl","pathString","relativePath","isAbsolute","supportsUserTiming","performance","mark","clearMarks","supportsPerformanceNow","charToInteger","chars","segmentify","line","segment","SourceMapConsumer","sourceMapJSON","sections","lastOffset","column","section","offsetLine","offsetColumn","generatedLine","generatedColumn","sourceMapConsumer","originalPositionFor","columnNumber","lineNumber","targetColumnNumber","startIndex","stopIndex","floor","currentLine","currentColumn","IndexedSourceMapConsumer","decodedMappings","markName","onComplete","mappings","decoded","integer","fromCharCode","hasContinuationBit","shouldNegate","decode","measure","withSyncPerfMeasurements","lineMappings","nearestEntry","sourceIndex","sourceContent","sourcesContent","sourceURL","sources","BasicSourceMapConsumer","symbolicationCache","SOURCE_MAP_ANNOTATION_PREFIX","statusListener","log","disconnectedCallback","dataCallback","inspectionCallback","async","getParsedSourceData","symbolicatedSource","fetchFileWithCaching","cachedPromise","promise","resource","catch","resourceLines","resourceLine","sourceMapAnnotationStartIndex","sourceMapAt","sourceMapURL","sourceMap","consumer","possiblyURL","symbolicateSource","symbolicateSourceWithCache","symbolicated","onDisconnected","initialize","Bridge","transferable","localBridge","localStore","inspectOwnerRequestId","requestID","forceFullData","responseID","enrichedData","parsedSource","owners","firstOwner","reload","resourceCache","content","fetch","Devtools","currentPort","connectToSocket","setStatusListener","setDisconnectedCallback","startServer","httpsOptions","loggerOptions","attempts","surface","useHttps","httpServer","connected","request","backendFilePath","__dirname","backendFile","readFileSync","savedPreferencesString","setDataCallback","setInspectionCallback","startInspectingHost","stopInspectingHost"],"sourceRoot":""}