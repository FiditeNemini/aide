/*! For license information please see standalone.js.LICENSE.txt */
(()=>{var e={895:e=>{e.exports=function(){if("undefined"==typeof document||!document.addEventListener)return null;var t,r,n,o={};return o.copy=function(){var e=!1,t=null,r=!1;function n(){e=!1,t=null,r&&window.getSelection().removeAllRanges(),r=!1}return document.addEventListener("copy",(function(r){if(e){for(var n in t)r.clipboardData.setData(n,t[n]);r.preventDefault()}})),function(o){return new Promise((function(i,s){e=!0,"string"==typeof o?t={"text/plain":o}:o instanceof Node?t={"text/html":(new XMLSerializer).serializeToString(o)}:o instanceof Object?t=o:s("Invalid data type. Must be string, DOM node, or an object mapping MIME types to strings."),function e(t){try{if(document.execCommand("copy"))n(),i();else{if(t)throw n(),new Error("Unable to copy. Perhaps it's not available in your browser?");(function(){var e=document.getSelection();if(!document.queryCommandEnabled("copy")&&e.isCollapsed){var t=document.createRange();t.selectNodeContents(document.body),e.removeAllRanges(),e.addRange(t),r=!0}})(),e(!0)}}catch(e){n(),s(e)}}(!1)}))}}(),o.paste=(n=!1,document.addEventListener("paste",(function(e){if(n){n=!1,e.preventDefault();var o=t;t=null,o(e.clipboardData.getData(r))}})),function(e){return new Promise((function(o,i){n=!0,t=o,r=e||"text/plain";try{document.execCommand("paste")||(n=!1,i(new Error("Unable to paste. Pasting only works in Internet Explorer at the moment.")))}catch(e){n=!1,i(new Error(e))}}))}),"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData&&(function(t){function r(e,t){return function(){e.apply(t,arguments)}}function n(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],h(e,r(i,this),r(s,this))}function o(e){var t=this;return null===this._state?void this._deferreds.push(e):void c((function(){var r=t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void e.reject(t)}e.resolve(n)}else(t._state?e.resolve:e.reject)(t._value)}))}function i(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void h(r(t,e),r(i,this),r(s,this))}this._state=!0,this._value=e,a.call(this)}catch(e){s.call(this,e)}}function s(e){this._state=!1,this._value=e,a.call(this)}function a(){for(var e=0,t=this._deferreds.length;t>e;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,r,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n}function h(e,t,r){var n=!1;try{e((function(e){n||(n=!0,t(e))}),(function(e){n||(n=!0,r(e))}))}catch(e){if(n)return;n=!0,r(e)}}var c=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var r=this;return new n((function(n,i){o.call(r,new l(e,t,n,i))}))},n.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&d(arguments[0])?arguments[0]:arguments);return new n((function(t,r){function n(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(e){n(i,e)}),r)}e[i]=s,0==--o&&t(e)}catch(e){r(e)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)n(i,e[i])}))},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n((function(t){t(e)}))},n.reject=function(e){return new n((function(t,r){r(e)}))},n.race=function(e){return new n((function(t,r){for(var n=0,o=e.length;o>n;n++)e[n].then(t,r)}))},e.exports?e.exports=n:t.Promise||(t.Promise=n)}(this),o.copy=function(e){return new Promise((function(t,r){if("string"!=typeof e&&!("text/plain"in e))throw new Error("You must provide a text/plain type.");var n="string"==typeof e?e:e["text/plain"];window.clipboardData.setData("Text",n)?t():r(new Error("Copying was rejected."))}))},o.paste=function(){return new Promise((function(e,t){var r=window.clipboardData.getData("Text");r?e(r):t(new Error("Pasting was rejected."))}))}),o}()},873:e=>{const t=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;function r(e){const r=e.match(t);if(null==r)throw new Error("Unexpected error - failed to regex-match URL");return{schemeAndAuthority:(r[1]||"")+(r[3]||""),path:r[5]||"",hasQueryPart:null!=r[6],queryWithoutQuestionMark:r[7]||"",fragmentWithHash:r[8]||""}}function n(e){const t=r(e);return-1===t.path.indexOf("//&")?e:t.schemeAndAuthority+t.path.replace("//&","?")+(t.queryWithoutQuestionMark.length>0?"&"+t.queryWithoutQuestionMark:"")+t.fragmentWithHash}e.exports={isJscSafeUrl:function(e){return!r(e).hasQueryPart},toNormalUrl:n,toJscSafeUrl:function(e){if(!r(e).hasQueryPart)return e;const t=r(n(e));if(t.queryWithoutQuestionMark.length>0&&(""===t.path||"/"===t.path))throw new Error(`The given URL "${e}" has an empty path and cannot be converted to a JSC-safe format.`);return t.schemeAndAuthority+t.path+(t.queryWithoutQuestionMark.length>0?"//&"+t.queryWithoutQuestionMark.replace(/\?/g,"%3F"):"")+t.fragmentWithHash}}},435:(e,t,r)=>{"use strict";var n=r(872);e.exports=v;var o,i=r(391),s=r(23),a=r(45),l=(o="function"==typeof Symbol&&"1"!==n.env._nodeLRUCacheForceNoSymbol?function(e){return Symbol(e)}:function(e){return"_"+e})("max"),h=o("length"),c=o("lengthCalculator"),d=o("allowStale"),u=o("maxAge"),f=o("dispose"),p=o("noDisposeOnSet"),m=o("lruList"),_=o("cache");function g(){return 1}function v(e){if(!(this instanceof v))return new v(e);"number"==typeof e&&(e={max:e}),e||(e={});var t=this[l]=e.max;(!t||"number"!=typeof t||t<=0)&&(this[l]=1/0);var r=e.length||g;"function"!=typeof r&&(r=g),this[c]=r,this[d]=e.stale||!1,this[u]=e.maxAge||0,this[f]=e.dispose,this[p]=e.noDisposeOnSet||!1,this.reset()}function y(e,t,r,n){var o=r.value;b(e,o)&&(E(e,r),e[d]||(o=void 0)),o&&t.call(n,o.value,o.key,e)}function w(e,t,r){var n=e[_].get(t);if(n){var o=n.value;b(e,o)?(E(e,n),e[d]||(o=void 0)):r&&e[m].unshiftNode(n),o&&(o=o.value)}return o}function b(e,t){if(!t||!t.maxAge&&!e[u])return!1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[u]&&r>e[u]}function S(e){if(e[h]>e[l])for(var t=e[m].tail;e[h]>e[l]&&null!==t;){var r=t.prev;E(e,t),t=r}}function E(e,t){if(t){var r=t.value;e[f]&&e[f](r.key,r.value),e[h]-=r.length,e[_].delete(r.key),e[m].removeNode(t)}}function D(e,t,r,n,o){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=o||0}Object.defineProperty(v.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),this[l]=e,S(this)},get:function(){return this[l]},enumerable:!0}),Object.defineProperty(v.prototype,"allowStale",{set:function(e){this[d]=!!e},get:function(){return this[d]},enumerable:!0}),Object.defineProperty(v.prototype,"maxAge",{set:function(e){(!e||"number"!=typeof e||e<0)&&(e=0),this[u]=e,S(this)},get:function(){return this[u]},enumerable:!0}),Object.defineProperty(v.prototype,"lengthCalculator",{set:function(e){"function"!=typeof e&&(e=g),e!==this[c]&&(this[c]=e,this[h]=0,this[m].forEach((function(e){e.length=this[c](e.value,e.key),this[h]+=e.length}),this)),S(this)},get:function(){return this[c]},enumerable:!0}),Object.defineProperty(v.prototype,"length",{get:function(){return this[h]},enumerable:!0}),Object.defineProperty(v.prototype,"itemCount",{get:function(){return this[m].length},enumerable:!0}),v.prototype.rforEach=function(e,t){t=t||this;for(var r=this[m].tail;null!==r;){var n=r.prev;y(this,e,r,t),r=n}},v.prototype.forEach=function(e,t){t=t||this;for(var r=this[m].head;null!==r;){var n=r.next;y(this,e,r,t),r=n}},v.prototype.keys=function(){return this[m].toArray().map((function(e){return e.key}),this)},v.prototype.values=function(){return this[m].toArray().map((function(e){return e.value}),this)},v.prototype.reset=function(){this[f]&&this[m]&&this[m].length&&this[m].forEach((function(e){this[f](e.key,e.value)}),this),this[_]=new i,this[m]=new a,this[h]=0},v.prototype.dump=function(){return this[m].map((function(e){if(!b(this,e))return{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}}),this).toArray().filter((function(e){return e}))},v.prototype.dumpLru=function(){return this[m]},v.prototype.inspect=function(e,t){var r="LRUCache {",n=!1;this[d]&&(r+="\n  allowStale: true",n=!0);var o=this[l];o&&o!==1/0&&(n&&(r+=","),r+="\n  max: "+s.inspect(o,t),n=!0);var i=this[u];i&&(n&&(r+=","),r+="\n  maxAge: "+s.inspect(i,t),n=!0);var a=this[c];a&&a!==g&&(n&&(r+=","),r+="\n  length: "+s.inspect(this[h],t),n=!0);var f=!1;return this[m].forEach((function(e){f?r+=",\n  ":(n&&(r+=",\n"),f=!0,r+="\n  ");var o=s.inspect(e.key).split("\n").join("\n  "),l={value:e.value};e.maxAge!==i&&(l.maxAge=e.maxAge),a!==g&&(l.length=e.length),b(this,e)&&(l.stale=!0),l=s.inspect(l,t).split("\n").join("\n  "),r+=o+" => "+l})),(f||n)&&(r+="\n"),r+="}"},v.prototype.set=function(e,t,r){var n=(r=r||this[u])?Date.now():0,o=this[c](t,e);if(this[_].has(e)){if(o>this[l])return E(this,this[_].get(e)),!1;var i=this[_].get(e).value;return this[f]&&(this[p]||this[f](e,i.value)),i.now=n,i.maxAge=r,i.value=t,this[h]+=o-i.length,i.length=o,this.get(e),S(this),!0}var s=new D(e,t,o,n,r);return s.length>this[l]?(this[f]&&this[f](e,t),!1):(this[h]+=s.length,this[m].unshift(s),this[_].set(e,this[m].head),S(this),!0)},v.prototype.has=function(e){return!!this[_].has(e)&&!b(this,this[_].get(e).value)},v.prototype.get=function(e){return w(this,e,!0)},v.prototype.peek=function(e){return w(this,e,!1)},v.prototype.pop=function(){var e=this[m].tail;return e?(E(this,e),e.value):null},v.prototype.del=function(e){E(this,this[_].get(e))},v.prototype.load=function(e){this.reset();for(var t=Date.now(),r=e.length-1;r>=0;r--){var n=e[r],o=n.e||0;if(0===o)this.set(n.k,n.v);else{var i=o-t;i>0&&this.set(n.k,n.v,i)}}},v.prototype.prune=function(){var e=this;this[_].forEach((function(t,r){w(e,r,!1)}))}},872:e=>{var t,r,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var a,l=[],h=!1,c=-1;function d(){h&&a&&(h=!1,a.length?l=a.concat(l):c=-1,l.length&&u())}function u(){if(!h){var e=s(d);h=!0;for(var t=l.length;t;){for(a=l,l=[];++c<t;)a&&a[c].run();c=-1,t=l.length}a=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||h||s(u)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},391:(e,t,r)=>{var n=r(872);"pseudomap"===n.env.npm_package_name&&"test"===n.env.npm_lifecycle_script&&(n.env.TEST_PSEUDOMAP="true"),"function"!=typeof Map||n.env.TEST_PSEUDOMAP?e.exports=r(877):e.exports=Map},877:e=>{var t=Object.prototype.hasOwnProperty;function r(e){if(!(this instanceof r))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),e)if(e instanceof r||"function"==typeof Map&&e instanceof Map)e.forEach((function(e,t){this.set(t,e)}),this);else{if(!Array.isArray(e))throw new TypeError("invalid argument");e.forEach((function(e){this.set(e[0],e[1])}),this)}}function n(e,t){return e===t||e!=e&&t!=t}function o(e,t,r){this.key=e,this.value=t,this._index=r}function i(e,r){for(var o=0,i="_"+r,s=i;t.call(e,s);s=i+o++)if(n(e[s].key,r))return e[s]}e.exports=r,r.prototype.forEach=function(e,t){t=t||this,Object.keys(this._data).forEach((function(r){"size"!==r&&e.call(t,this._data[r].value,this._data[r].key)}),this)},r.prototype.has=function(e){return!!i(this._data,e)},r.prototype.get=function(e){var t=i(this._data,e);return t&&t.value},r.prototype.set=function(e,r){!function(e,r,i){for(var s=0,a="_"+r,l=a;t.call(e,l);l=a+s++)if(n(e[l].key,r))return void(e[l].value=i);e.size++,e[l]=new o(r,i,l)}(this._data,e,r)},r.prototype.delete=function(e){var t=i(this._data,e);t&&(delete this._data[t._index],this._data.size--)},r.prototype.clear=function(){var e=Object.create(null);e.size=0,Object.defineProperty(this,"_data",{value:e,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(r.prototype,"size",{get:function(){return this._data.size},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.values=r.prototype.keys=r.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},268:(e,t,r)=>{var n=r(187),o=r(136),i=o;i.v1=n,i.v4=o,e.exports=i},426:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,o=t;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},773:(e,t,r)=>{var n=r(982);e.exports=function(){return n.randomBytes(16)}},187:(e,t,r)=>{var n,o,i=r(773),s=r(426),a=0,l=0;e.exports=function(e,t,r){var h=t&&r||0,c=t||[],d=(e=e||{}).node||n,u=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==u){var f=i();null==d&&(d=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==u&&(u=o=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:l+1,_=p-a+(m-l)/1e4;if(_<0&&void 0===e.clockseq&&(u=u+1&16383),(_<0||p>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,l=m,o=u;var g=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;c[h++]=g>>>24&255,c[h++]=g>>>16&255,c[h++]=g>>>8&255,c[h++]=255&g;var v=p/4294967296*1e4&268435455;c[h++]=v>>>8&255,c[h++]=255&v,c[h++]=v>>>24&15|16,c[h++]=v>>>16&255,c[h++]=u>>>8|128,c[h++]=255&u;for(var y=0;y<6;++y)c[h+y]=d[y];return t||s(c)}},136:(e,t,r)=>{var n=r(773),o=r(426);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[i+a]=s[a];return t||o(s)}},45:e=>{function t(e){var r=this;if(r instanceof t||(r=new t),r.tail=null,r.head=null,r.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){r.push(e)}));else if(arguments.length>0)for(var n=0,o=arguments.length;n<o;n++)r.push(arguments[n]);return r}function r(e,t,n,o){if(!(this instanceof r))return new r(e,t,n,o);this.list=o,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=t,t.Node=r,t.create=t,t.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null},t.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},t.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},t.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o=arguments[e],(n=this).tail=new r(o,n.tail,null,n),n.head||(n.head=n.tail),n.length++;var n,o;return this.length},t.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o=arguments[e],(n=this).head=new r(o,null,n.head,n),n.tail||(n.tail=n.head),n.length++;var n,o;return this.length},t.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},t.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},t.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},t.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},t.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},t.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},t.prototype.map=function(e,r){r=r||this;for(var n=new t,o=this.head;null!==o;)n.push(e.call(r,o.value,this)),o=o.next;return n},t.prototype.mapReverse=function(e,r){r=r||this;for(var n=new t,o=this.tail;null!==o;)n.push(e.call(r,o.value,this)),o=o.prev;return n},t.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var o=0;null!==n;o++)r=e(r,n.value,o),n=n.next;return r},t.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==n;o--)r=e(r,n.value,o),n=n.prev;return r},t.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},t.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},t.prototype.slice=function(e,r){(r=r||this.length)<0&&(r+=this.length),(e=e||0)<0&&(e+=this.length);var n=new t;if(r<e||r<0)return n;e<0&&(e=0),r>this.length&&(r=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<r;o++,i=i.next)n.push(i.value);return n},t.prototype.sliceReverse=function(e,r){(r=r||this.length)<0&&(r+=this.length),(e=e||0)<0&&(e+=this.length);var n=new t;if(r<e||r<0)return n;e<0&&(e=0),r>this.length&&(r=this.length);for(var o=this.length,i=this.tail;null!==i&&o>r;o--)i=i.prev;for(;null!==i&&o>e;o--,i=i.prev)n.push(i.value);return n},t.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this}},430:(e,t,r)=>{"use strict";const n=r(797);n.createWebSocketStream=r(224),n.Server=r(5),n.Receiver=r(393),n.Sender=r(569),e.exports=n},271:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:n}=r(147);function o(e,t){if(0===e.length)return n;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let o=0;for(let t=0;t<e.length;t++){const n=e[t];r.set(n,o),o+=n.length}return o<t?r.slice(0,o):r}function i(e,t,r,n,o){for(let i=0;i<o;i++)r[n+i]=e[i]^t[3&i]}function s(e,t){const r=e.length;for(let n=0;n<r;n++)e[n]^=t[3&n]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function l(e){if(l.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),l.readOnly=!1),t}try{const t=r(962),n=t.BufferUtil||t;e.exports={concat:o,mask(e,t,r,o,s){s<48?i(e,t,r,o,s):n.mask(e,t,r,o,s)},toArrayBuffer:a,toBuffer:l,unmask(e,t){e.length<32?s(e,t):n.unmask(e,t)}}}catch(t){e.exports={concat:o,mask:i,toArrayBuffer:a,toBuffer:l,unmask:s}}},147:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},646:e=>{"use strict";class t{constructor(e,t){this.target=t,this.type=e}}class r extends t{constructor(e,t){super("message",t),this.data=e}}class n extends t{constructor(e,t,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=t,this.code=e}}class o extends t{constructor(e){super("open",e)}}class i extends t{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const s={addEventListener(e,t,s){if("function"!=typeof t)return;function a(e){t.call(this,new r(e,this))}function l(e,r){t.call(this,new n(e,r,this))}function h(e){t.call(this,new i(e,this))}function c(){t.call(this,new o(this))}const d=s&&s.once?"once":"on";"message"===e?(a._listener=t,this[d](e,a)):"close"===e?(l._listener=t,this[d](e,l)):"error"===e?(h._listener=t,this[d](e,h)):"open"===e?(c._listener=t,this[d](e,c)):this[d](e,t)},removeEventListener(e,t){const r=this.listeners(e);for(let n=0;n<r.length;n++)r[n]!==t&&r[n]._listener!==t||this.removeListener(e,r[n])}};e.exports=s},99:e=>{"use strict";const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const n=Object.create(null);if(void 0===e||""===e)return n;let o,i,s=Object.create(null),a=!1,l=!1,h=!1,c=-1,d=-1,u=0;for(;u<e.length;u++){const f=e.charCodeAt(u);if(void 0===o)if(-1===d&&1===t[f])-1===c&&(c=u);else if(32===f||9===f)-1===d&&-1!==c&&(d=u);else{if(59!==f&&44!==f)throw new SyntaxError(`Unexpected character at index ${u}`);{if(-1===c)throw new SyntaxError(`Unexpected character at index ${u}`);-1===d&&(d=u);const t=e.slice(c,d);44===f?(r(n,t,s),s=Object.create(null)):o=t,c=d=-1}}else if(void 0===i)if(-1===d&&1===t[f])-1===c&&(c=u);else if(32===f||9===f)-1===d&&-1!==c&&(d=u);else if(59===f||44===f){if(-1===c)throw new SyntaxError(`Unexpected character at index ${u}`);-1===d&&(d=u),r(s,e.slice(c,d),!0),44===f&&(r(n,o,s),s=Object.create(null),o=void 0),c=d=-1}else{if(61!==f||-1===c||-1!==d)throw new SyntaxError(`Unexpected character at index ${u}`);i=e.slice(c,u),c=d=-1}else if(l){if(1!==t[f])throw new SyntaxError(`Unexpected character at index ${u}`);-1===c?c=u:a||(a=!0),l=!1}else if(h)if(1===t[f])-1===c&&(c=u);else if(34===f&&-1!==c)h=!1,d=u;else{if(92!==f)throw new SyntaxError(`Unexpected character at index ${u}`);l=!0}else if(34===f&&61===e.charCodeAt(u-1))h=!0;else if(-1===d&&1===t[f])-1===c&&(c=u);else if(-1===c||32!==f&&9!==f){if(59!==f&&44!==f)throw new SyntaxError(`Unexpected character at index ${u}`);{if(-1===c)throw new SyntaxError(`Unexpected character at index ${u}`);-1===d&&(d=u);let t=e.slice(c,d);a&&(t=t.replace(/\\/g,""),a=!1),r(s,i,t),44===f&&(r(n,o,s),s=Object.create(null),o=void 0),i=void 0,c=d=-1}}else-1===d&&(d=u)}if(-1===c||h)throw new SyntaxError("Unexpected end of input");-1===d&&(d=u);const f=e.slice(c,d);return void 0===o?r(n,f,s):(void 0===i?r(s,f,!0):r(s,i,a?f.replace(/\\/g,""):f),r(n,o,s)),n}}},930:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},4:(e,t,r)=>{"use strict";const n=r(106),o=r(271),i=r(930),{kStatusCode:s,NOOP:a}=r(147),l=Buffer.from([0,0,255,255]),h=Symbol("permessage-deflate"),c=Symbol("total-length"),d=Symbol("callback"),u=Symbol("buffers"),f=Symbol("error");let p;function m(e){this[u].push(e),this[c]+=e.length}function _(e){this[c]+=e.length,this[h]._maxPayload<1||this[c]<=this[h]._maxPayload?this[u].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][s]=1009,this.removeListener("data",_),this.reset())}function g(e){this[h]._inflate=null,e[s]=1007,this[d](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!p){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;p=new i(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[d];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){p.add((n=>{this._decompress(e,t,((e,t)=>{n(),r(e,t)}))}))}compress(e,t,r){p.add((n=>{this._compress(e,t,((e,t)=>{n(),r(e,t)}))}))}_decompress(e,t,r){const i=this._isServer?"client":"server";if(!this._inflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=n.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[h]=this,this._inflate[c]=0,this._inflate[u]=[],this._inflate.on("error",g),this._inflate.on("data",_)}this._inflate[d]=r,this._inflate.write(e),t&&this._inflate.write(l),this._inflate.flush((()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void r(e);const n=o.concat(this._inflate[u],this._inflate[c]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[c]=0,this._inflate[u]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),r(null,n)}))}_compress(e,t,r){const i=this._isServer?"server":"client";if(!this._deflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?n.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=n.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[c]=0,this._deflate[u]=[],this._deflate.on("error",a),this._deflate.on("data",m)}this._deflate[d]=r,this._deflate.write(e),this._deflate.flush(n.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=o.concat(this._deflate[u],this._deflate[c]);t&&(e=e.slice(0,e.length-4)),this._deflate[d]=null,this._deflate[c]=0,this._deflate[u]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},393:(e,t,r)=>{"use strict";const{Writable:n}=r(203),o=r(4),{BINARY_TYPES:i,EMPTY_BUFFER:s,kStatusCode:a,kWebSocket:l}=r(147),{concat:h,toArrayBuffer:c,unmask:d}=r(271),{isValidStatusCode:u,isValidUTF8:f}=r(571);function p(e,t,r,n,o){const i=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,p),i.code=o,i[a]=n,i}e.exports=class extends n{constructor(e,t,r,n){super(),this._binaryType=e||i[0],this[l]=void 0,this._extensions=t||{},this._isServer=!!r,this._maxPayload=0|n,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],n=t.length-e;e>=r.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),n),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(48&e[0])return this._loop=!1,p(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=!(64&~e[0]);if(t&&!this._extensions[o.extensionName])return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=!(128&~e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,p(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,p(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,p(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~e[1]),this._isServer){if(!this._masked)return this._loop=!1,p(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,p(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,p(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,p(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=s;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&d(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[o.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(p(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?h(t,e):"arraybuffer"===this._binaryType?c(h(t,e)):t,this.emit("message",r)}else{const r=h(t,e);if(!f(r))return this._loop=!1,p(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r.toString())}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return p(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const t=e.readUInt16BE(0);if(!u(t))return p(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const r=e.slice(2);if(!f(r))return p(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,r.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},569:(e,t,r)=>{"use strict";r(278),r(756);const{randomFillSync:n}=r(982),o=r(4),{EMPTY_BUFFER:i}=r(147),{isValidStatusCode:s}=r(571),{mask:a,toBuffer:l}=r(271),h=Buffer.alloc(4);class c{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=t.mask&&t.readOnly;let o=t.mask?6:2,i=e.length;e.length>=65536?(o+=8,i=127):e.length>125&&(o+=2,i=126);const s=Buffer.allocUnsafe(r?e.length+o:o);return s[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(s[0]|=64),s[1]=i,126===i?s.writeUInt16BE(e.length,2):127===i&&(s.writeUInt32BE(0,2),s.writeUInt32BE(e.length,6)),t.mask?(n(h,0,4),s[1]|=128,s[o-4]=h[0],s[o-3]=h[1],s[o-2]=h[2],s[o-1]=h[3],r?(a(e,h,s,o,e.length),[s]):(a(e,h,e,0,e.length),[s,e])):[s,e]}close(e,t,r,n){let o;if(void 0===e)o=i;else{if("number"!=typeof e||!s(e))throw new TypeError("First argument must be a valid error code number");if(void 0===t||""===t)o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0);else{const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+r),o.writeUInt16BE(e,0),o.write(t,2)}}this._deflating?this.enqueue([this.doClose,o,r,n]):this.doClose(o,r,n)}doClose(e,t,r){this.sendFrame(c.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){const n=l(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,n,t,l.readOnly,r]):this.doPing(n,t,l.readOnly,r)}doPing(e,t,r,n){this.sendFrame(c.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),n)}pong(e,t,r){const n=l(e);if(n.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,n,t,l.readOnly,r]):this.doPong(n,t,l.readOnly,r)}doPong(e,t,r,n){this.sendFrame(c.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),n)}send(e,t,r){const n=l(e),i=this._extensions[o.extensionName];let s=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&i&&(a=n.length>=i._threshold),this._compress=a):(a=!1,s=0),t.fin&&(this._firstFragment=!0),i){const e={fin:t.fin,rsv1:a,opcode:s,mask:t.mask,readOnly:l.readOnly};this._deflating?this.enqueue([this.dispatch,n,this._compress,e,r]):this.dispatch(n,this._compress,e,r)}else this.sendFrame(c.frame(n,{fin:t.fin,rsv1:!1,opcode:s,mask:t.mask,readOnly:l.readOnly}),r)}dispatch(e,t,r,n){if(!t)return void this.sendFrame(c.frame(e,r),n);const i=this._extensions[o.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,i.compress(e,r.fin,((t,o)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof n&&n(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t][4];"function"==typeof r&&r(e)}}else this._bufferedBytes-=e.length,this._deflating=!1,r.readOnly=!1,this.sendFrame(c.frame(o,r),n),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=c},224:(e,t,r)=>{"use strict";var n=r(872);const{Duplex:o}=r(203);function i(e){e.emit("close")}function s(){!this.destroyed&&this._writableState.finished&&this.destroy()}function a(e){this.removeListener("error",a),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0,l=!0;function h(){r&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",h)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",h));const c=new o({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t){c.push(t)||(r=!1,e._socket.pause())})),e.once("error",(function(e){c.destroyed||(l=!1,c.destroy(e))})),e.once("close",(function(){c.destroyed||c.push(null)})),c._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void n.nextTick(i,c);let o=!1;e.once("error",(function(e){o=!0,r(e)})),e.once("close",(function(){o||r(t),n.nextTick(i,c)})),l&&e.terminate()},c._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),c._readableState.endEmitted&&c.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){c._final(t)}))},c._read=function(){e.readyState!==e.OPEN&&e.readyState!==e.CLOSING||r||(r=!0,e._receiver._writableState.needDrain||e._socket.resume())},c._write=function(t,r,n){e.readyState!==e.CONNECTING?e.send(t,n):e.once("open",(function(){c._write(t,r,n)}))},c.on("end",s),c.on("error",a),c}},571:(e,t,r)=>{"use strict";function n(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}function o(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}try{let t=r(809);"object"==typeof t&&(t=t.Validation.isValidUTF8),e.exports={isValidStatusCode:n,isValidUTF8:e=>e.length<150?o(e):t(e)}}catch(t){e.exports={isValidStatusCode:n,isValidUTF8:o}}},5:(e,t,r)=>{"use strict";var n=r(872);const o=r(434),i=r(611),{createHash:s}=(r(692),r(278),r(756),r(982)),a=r(4),l=r(797),{format:h,parse:c}=r(99),{GUID:d,kWebSocket:u}=r(147),f=/^[+/0-9A-Za-z]{22}==$/;function p(e){e._state=2,e.emit("close")}function m(){this.destroy()}function _(e,t,r,n){e.writable&&(r=r||i.STATUS_CODES[t],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},e.write(`HTTP/1.1 ${t} ${i.STATUS_CODES[t]}\r\n`+Object.keys(n).map((e=>`${e}: ${n[e]}`)).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",m),e.destroy()}function g(e){return e.trim()}e.exports=class extends o{constructor(e,t){if(super(),null==(e={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=i.createServer(((e,t)=>{const r=i.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,n)=>{this.handleUpgrade(t,r,n,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),2===this._state)return void n.nextTick(p,this);if(1===this._state)return;if(this._state=1,this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close(p.bind(void 0,this)):n.nextTick(p,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",m);const o=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),i=e.headers.upgrade,s=+e.headers["sec-websocket-version"],l={};if("GET"!==e.method||void 0===i||"websocket"!==i.toLowerCase()||!o||!f.test(o)||8!==s&&13!==s||!this.shouldHandle(e))return _(t,400);if(this.options.perMessageDeflate){const r=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=c(e.headers["sec-websocket-extensions"]);t[a.extensionName]&&(r.accept(t[a.extensionName]),l[a.extensionName]=r)}catch(e){return _(t,400)}}if(this.options.verifyClient){const i={origin:e.headers[8===s?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(i,((i,s,a,h)=>{if(!i)return _(t,s||401,a,h);this.completeUpgrade(o,l,e,t,r,n)}));if(!this.options.verifyClient(i))return _(t,401)}this.completeUpgrade(o,l,e,t,r,n)}completeUpgrade(e,t,r,n,o,i){if(!n.readable||!n.writable)return n.destroy();if(n[u])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return _(n,503);const c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${s("sha1").update(e+d).digest("base64")}`],f=new l(null);let p=r.headers["sec-websocket-protocol"];if(p&&(p=p.split(",").map(g),p=this.options.handleProtocols?this.options.handleProtocols(p,r):p[0],p&&(c.push(`Sec-WebSocket-Protocol: ${p}`),f._protocol=p)),t[a.extensionName]){const e=t[a.extensionName].params,r=h({[a.extensionName]:[e]});c.push(`Sec-WebSocket-Extensions: ${r}`),f._extensions=t}this.emit("headers",c,r),n.write(c.concat("\r\n").join("\r\n")),n.removeListener("error",m),f.setSocket(n,o,this.options.maxPayload),this.clients&&(this.clients.add(f),f.on("close",(()=>this.clients.delete(f)))),i(f,r)}}},797:(e,t,r)=>{"use strict";var n=r(872);const o=r(434),i=r(692),s=r(611),a=r(278),l=r(756),{randomBytes:h,createHash:c}=r(982),{Readable:d}=r(203),{URL:u}=r(16),f=r(4),p=r(393),m=r(569),{BINARY_TYPES:_,EMPTY_BUFFER:g,GUID:v,kStatusCode:y,kWebSocket:w,NOOP:b}=r(147),{addEventListener:S,removeEventListener:E}=r(646),{format:D,parse:k}=r(99),{toBuffer:x}=r(271),T=["CONNECTING","OPEN","CLOSING","CLOSED"],I=[8,13];class C extends o{constructor(e,t,r){super(),this._binaryType=_[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=C.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(r=t,t=void 0),P(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){_.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){}set onclose(e){}get onerror(){}set onerror(e){}get onopen(){}set onopen(e){}get onmessage(){}set onmessage(e){}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const n=new p(this.binaryType,this._extensions,this._isServer,r);this._sender=new m(e,this._extensions),this._receiver=n,this._socket=e,n[w]=this,e[w]=this,n.on("conclude",L),n.on("drain",M),n.on("error",$),n.on("message",U),n.on("ping",F),n.on("pong",j),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",q),e.on("data",G),e.on("end",H),e.on("error",z),this._readyState=C.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=C.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=C.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==C.CLOSED){if(this.readyState===C.CONNECTING){const e="WebSocket was closed before the connection was established";return R(this,this._req,e)}this.readyState!==C.CLOSING?(this._readyState=C.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}ping(e,t,r){if(this.readyState===C.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===C.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,r)):A(this,e,r)}pong(e,t,r){if(this.readyState===C.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===C.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,r)):A(this,e,r)}send(e,t,r){if(this.readyState===C.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==C.OPEN)return void A(this,e,r);const n={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(n.compress=!1),this._sender.send(e||g,n,r)}terminate(){if(this.readyState!==C.CLOSED){if(this.readyState===C.CONNECTING){const e="WebSocket was closed before the connection was established";return R(this,this._req,e)}this._socket&&(this._readyState=C.CLOSING,this._socket.destroy())}}}function P(e,t,r,n){const o={protocolVersion:I[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!I.includes(o.protocolVersion))throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} (supported versions: ${I.join(", ")})`);let a;t instanceof u?(a=t,e._url=t.href):(a=new u(t),e._url=t);const l="ws+unix:"===a.protocol;if(!(a.host||l&&a.pathname)){const t=new Error(`Invalid URL: ${e.url}`);if(0===e._redirects)throw t;return void O(e,t)}const d="wss:"===a.protocol||"https:"===a.protocol,p=d?443:80,m=h(16).toString("base64"),_=d?i.get:s.get;let g;if(o.createConnection=d?B:N,o.defaultPort=o.defaultPort||p,o.port=a.port||p,o.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,o.headers={"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket",...o.headers},o.path=a.pathname+a.search,o.timeout=o.handshakeTimeout,o.perMessageDeflate&&(g=new f(!0!==o.perMessageDeflate?o.perMessageDeflate:{},!1,o.maxPayload),o.headers["Sec-WebSocket-Extensions"]=D({[f.extensionName]:g.offer()})),r&&(o.headers["Sec-WebSocket-Protocol"]=r),o.origin&&(o.protocolVersion<13?o.headers["Sec-WebSocket-Origin"]=o.origin:o.headers.Origin=o.origin),(a.username||a.password)&&(o.auth=`${a.username}:${a.password}`),l){const e=o.path.split(":");o.socketPath=e[0],o.path=e[1]}if(o.followRedirects){if(0===e._redirects){e._originalUnixSocket=l,e._originalSecure=d,e._originalHostOrSocketPath=l?o.socketPath:a.host;const t=n&&n.headers;if(n={...n,headers:{}},t)for(const[e,r]of Object.entries(t))n.headers[e.toLowerCase()]=r}else{const t=l?!!e._originalUnixSocket&&o.socketPath===e._originalHostOrSocketPath:!e._originalUnixSocket&&a.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!d)&&(delete o.headers.authorization,delete o.headers.cookie,t||delete o.headers.host,o.auth=void 0)}o.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(o.auth).toString("base64"))}let y=e._req=_(o);o.timeout&&y.on("timeout",(()=>{R(e,y,"Opening handshake has timed out")})),y.on("error",(t=>{null===y||y.aborted||(y=e._req=null,O(e,t))})),y.on("response",(i=>{const s=i.headers.location,a=i.statusCode;if(s&&o.followRedirects&&a>=300&&a<400){if(++e._redirects>o.maxRedirects)return void R(e,y,"Maximum redirects exceeded");let i;y.abort();try{i=new u(s,t)}catch(t){return void O(e,t)}P(e,i,r,n)}else e.emit("unexpected-response",y,i)||R(e,y,`Unexpected server response: ${i.statusCode}`)})),y.on("upgrade",((t,n,i)=>{if(e.emit("upgrade",t),e.readyState!==C.CONNECTING)return;y=e._req=null;const s=t.headers.upgrade;if(void 0===s||"websocket"!==s.toLowerCase())return void R(e,n,"Invalid Upgrade header");const a=c("sha1").update(m+v).digest("base64");if(t.headers["sec-websocket-accept"]!==a)return void R(e,n,"Invalid Sec-WebSocket-Accept header");const l=t.headers["sec-websocket-protocol"],h=(r||"").split(/, */);let d;if(!r&&l?d="Server sent a subprotocol but none was requested":r&&!l?d="Server sent no subprotocol":l&&!h.includes(l)&&(d="Server sent an invalid subprotocol"),d)return void R(e,n,d);l&&(e._protocol=l);const u=t.headers["sec-websocket-extensions"];if(void 0!==u){if(!g)return void R(e,n,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=k(u)}catch(t){return void R(e,n,"Invalid Sec-WebSocket-Extensions header")}const r=Object.keys(t);if(r.length){if(1!==r.length||r[0]!==f.extensionName)return void R(e,n,"Server indicated an extension that was not requested");try{g.accept(t[f.extensionName])}catch(t){return void R(e,n,"Invalid Sec-WebSocket-Extensions header")}e._extensions[f.extensionName]=g}}e.setSocket(n,i,o.maxPayload)}))}function O(e,t){e._readyState=C.CLOSING,e.emit("error",t),e.emitClose()}function N(e){return e.path=e.socketPath,a.connect(e)}function B(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=a.isIP(e.host)?"":e.host),l.connect(e)}function R(e,t,r){e._readyState=C.CLOSING;const n=new Error(r);Error.captureStackTrace(n,R),t.setHeader?(t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function A(e,t,r){if(t){const r=x(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}r&&r(new Error(`WebSocket is not open: readyState ${e.readyState} (${T[e.readyState]})`))}function L(e,t){const r=this[w];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[w]&&(r._socket.removeListener("data",G),n.nextTick(V,r._socket),1005===e?r.close():r.close(e,t))}function M(){this[w]._socket.resume()}function $(e){const t=this[w];void 0!==t._socket[w]&&(t._socket.removeListener("data",G),n.nextTick(V,t._socket),t.close(e[y])),t.emit("error",e)}function W(){this[w].emitClose()}function U(e){this[w].emit("message",e)}function F(e){const t=this[w];t.pong(e,!t._isServer,b),t.emit("ping",e)}function j(e){this[w].emit("pong",e)}function V(e){e.resume()}function q(){const e=this[w];let t;this.removeListener("close",q),this.removeListener("data",G),this.removeListener("end",H),e._readyState=C.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[w]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",W),e._receiver.on("finish",W))}function G(e){this[w]._receiver.write(e)||this.pause()}function H(){const e=this[w];e._readyState=C.CLOSING,e._receiver.end(),this.end()}function z(){const e=this[w];this.removeListener("error",z),this.on("error",b),e&&(e._readyState=C.CLOSING,this.destroy())}Object.defineProperty(C,"CONNECTING",{enumerable:!0,value:T.indexOf("CONNECTING")}),Object.defineProperty(C.prototype,"CONNECTING",{enumerable:!0,value:T.indexOf("CONNECTING")}),Object.defineProperty(C,"OPEN",{enumerable:!0,value:T.indexOf("OPEN")}),Object.defineProperty(C.prototype,"OPEN",{enumerable:!0,value:T.indexOf("OPEN")}),Object.defineProperty(C,"CLOSING",{enumerable:!0,value:T.indexOf("CLOSING")}),Object.defineProperty(C.prototype,"CLOSING",{enumerable:!0,value:T.indexOf("CLOSING")}),Object.defineProperty(C,"CLOSED",{enumerable:!0,value:T.indexOf("CLOSED")}),Object.defineProperty(C.prototype,"CLOSED",{enumerable:!0,value:T.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((e=>{Object.defineProperty(C.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(C.prototype,`on${e}`,{enumerable:!0,get(){const t=this.listeners(e);for(let e=0;e<t.length;e++)if(t[e]._listener)return t[e]._listener},set(t){const r=this.listeners(e);for(let t=0;t<r.length;t++)r[t]._listener&&this.removeListener(e,r[t]);this.addEventListener(e,t)}})})),C.prototype.addEventListener=S,C.prototype.removeEventListener=E,e.exports=C},962:e=>{"use strict";e.exports=require("bufferutil")},809:e=>{"use strict";e.exports=require("utf-8-validate")},982:e=>{"use strict";e.exports=require("crypto")},434:e=>{"use strict";e.exports=require("events")},611:e=>{"use strict";e.exports=require("http")},692:e=>{"use strict";e.exports=require("https")},278:e=>{"use strict";e.exports=require("net")},203:e=>{"use strict";e.exports=require("stream")},756:e=>{"use strict";e.exports=require("tls")},16:e=>{"use strict";e.exports=require("url")},23:e=>{"use strict";e.exports=require("util")},106:e=>{"use strict";e.exports=require("zlib")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{default:()=>_e});class e{constructor(){var e,t,r;e=this,t="listenersMap",r=new Map,(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}addListener(e,t){const r=this.listenersMap.get(e);void 0===r?this.listenersMap.set(e,[t]):r.indexOf(t)<0&&r.push(t)}emit(e,...t){const r=this.listenersMap.get(e);if(void 0!==r)if(1===r.length)r[0].apply(null,t);else{let e=!1,n=null;const o=Array.from(r);for(let r=0;r<o.length;r++){const i=o[r];try{i.apply(null,t)}catch(t){null===n&&(e=!0,n=t)}}if(e)throw n}}removeAllListeners(){this.listenersMap.clear()}removeListener(e,t){const r=this.listenersMap.get(e);if(void 0!==r){const e=r.indexOf(t);e>=0&&r.splice(e,1)}}}function t(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o=[{version:0,minNpmVersion:'"<4.11.0"',maxNpmVersion:'"<4.11.0"'},{version:1,minNpmVersion:"4.13.0",maxNpmVersion:"4.21.0"},{version:2,minNpmVersion:"4.22.0",maxNpmVersion:null}],i=o[o.length-1],s=class extends e{constructor(e){super(),t(this,"_isShutdown",!1),t(this,"_messageQueue",[]),t(this,"_scheduledFlush",!1),t(this,"_wallUnlisten",null),t(this,"_flush",(()=>{try{if(this._messageQueue.length){for(let e=0;e<this._messageQueue.length;e+=2)this._wall.send(this._messageQueue[e],...this._messageQueue[e+1]);this._messageQueue.length=0}}finally{this._scheduledFlush=!1}})),t(this,"overrideValueAtPath",(({id:e,path:t,rendererID:r,type:n,value:o})=>{switch(n){case"context":this.send("overrideContext",{id:e,path:t,rendererID:r,wasForwarded:!0,value:o});break;case"hooks":this.send("overrideHookState",{id:e,path:t,rendererID:r,wasForwarded:!0,value:o});break;case"props":this.send("overrideProps",{id:e,path:t,rendererID:r,wasForwarded:!0,value:o});break;case"state":this.send("overrideState",{id:e,path:t,rendererID:r,wasForwarded:!0,value:o})}})),this._wall=e,this._wallUnlisten=e.listen((e=>{e&&e.event&&this.emit(e.event,e.payload)}))||null,this.addListener("overrideValueAtPath",this.overrideValueAtPath)}get wall(){return this._wall}send(e,...t){this._isShutdown?console.warn(`Cannot send message "${e}" through a Bridge that has been shutdown.`):(this._messageQueue.push(e,t),this._scheduledFlush||(this._scheduledFlush=!0,"function"==typeof devtoolsJestTestScheduler?devtoolsJestTestScheduler(this._flush):queueMicrotask(this._flush)))}shutdown(){if(this._isShutdown)return void console.warn("Bridge was already shutdown.");this.emit("shutdown"),this.send("shutdown"),this._isShutdown=!0,this.addListener=function(){},this.emit=function(){},this.removeAllListeners();const e=this._wallUnlisten;e&&e();do{this._flush()}while(this._messageQueue.length)}};var a=r(895),l=r(23);const h=!1,c=!1,d="React::DevTools::componentFilters",u=7,f=1,p=3;var m=r(435),_=r.n(m);function g(e){try{return localStorage.getItem(e)}catch(e){return null}}function v(e,t){try{return localStorage.setItem(e,t)}catch(e){}}function y(e,t,r){let n="";for(let o=t;o<=r;o++)n+=String.fromCodePoint(e[o]);return n}function w(){try{const e=g(d);if(null!=e)return S(JSON.parse(e))}catch(e){}return[{type:f,value:u,isEnabled:!0}]}function b(e){v(d,JSON.stringify(S(e)))}function S(e){return Array.isArray(e)?e.filter((e=>e.type!==p)):e}function E(e,t){if(null===e)return{formattedDisplayName:null,hocDisplayNames:null,compiledWithForget:!1};if(e.startsWith("Forget(")){const r=e.slice(7,e.length-1),{formattedDisplayName:n,hocDisplayNames:o}=E(r,t);return{formattedDisplayName:n,hocDisplayNames:o,compiledWithForget:!0}}let r=null;switch(t){case 1:case 6:case 5:case 8:case 15:if(e.indexOf("(")>=0){const t=e.match(/[^()]+/g);null!=t&&(e=t.pop(),r=t)}}return{formattedDisplayName:e,hocDisplayNames:r,compiledWithForget:!1}}function D(e,t){for(const r in e)if(!(r in t))return!0;for(const r in t)if(e[r]!==t[r])return!0;return!1}function k(e){const{formattedDisplayName:t,hocDisplayNames:r,compiledWithForget:n}=E(e.displayName,e.type);return{...e,displayName:t,hocDisplayNames:r,compiledWithForget:n}}function x(e,t=!1){let r=" ";e.children.length>0&&(r=e.isCollapsed?"▸":"▾");let n="";null!==e.key&&(n=` key="${e.key}"`);let o=null;null!==e.hocDisplayNames&&(o=[...e.hocDisplayNames]);const i=null===o?"":` [${o.join("][")}]`;let s="";return t&&(s=` (${e.isCollapsed?1:e.weight})`),`${"  ".repeat(e.depth+1)}${r} <${e.displayName||"null"}${n}>${i}${s}`}Symbol.for("react.element"),Symbol.for("react.transitional.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.consumer"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.scope"),Symbol.for("react.offscreen"),Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker"),Symbol.for("react.memo_cache_sentinel"),Symbol.for("react.postpone"),Symbol.for("react.view_transition"),Symbol.iterator,Symbol.asyncIterator,Symbol("inspectable"),Symbol("inspected"),Symbol("name"),Symbol("preview_long"),Symbol("preview_short"),Symbol("readonly"),Symbol("size"),Symbol("type"),Symbol("unserializable"),Array.isArray,Array.isArray,Object.prototype.hasOwnProperty,new WeakMap,new(_())({max:1e3});const T=e=>Math.round(10*e)/10||"<0.1",I=(e,...t)=>{h&&console.log(`%cCommitTreeBuilder %c${e}`,"color: pink; font-weight: bold;","font-weight: bold;",...t)},C=new Map;function P(e,t,r,n){const o=n.snapshots.get(e);null!=o&&(r.set(e,{id:e,children:o.children,displayName:o.displayName,hocDisplayNames:o.hocDisplayNames,key:o.key,parentID:t,treeBaseDuration:n.initialTreeBaseDurations.get(e),type:o.type,compiledWithForget:o.compiledWithForget}),o.children.forEach((t=>P(t,e,r,n))))}function O(e,t){const r=new Map(e.nodes),n=e=>{const t=Object.assign({},r.get(e));return r.set(e,t),t};let o=2,i=null;const s=[null],a=t[o++],l=o+a;for(;o<l;){const e=t[o++],r=y(t,o,o+e-1);s.push(r),o+=e}for(;o<t.length;){const e=t[o];switch(e){case 1:{i=t[o+1];const e=t[o+2];if(o+=3,r.has(i))throw new Error(`Commit tree already contains fiber "${i}". This is a bug in React DevTools.`);if(11===e){o++,o++,o++,o++,h&&I("Add",`new root fiber ${i}`);const t={children:[],displayName:null,hocDisplayNames:null,id:i,key:null,parentID:0,treeBaseDuration:0,type:e,compiledWithForget:!1};r.set(i,t)}else{const a=t[o];o++,o++;const l=s[t[o]];o++;const c=s[t[o]];o++,h&&I("Add",`fiber ${i} (${l||"null"}) as child of ${a}`);const d=n(a);d.children=d.children.concat(i);const{formattedDisplayName:u,hocDisplayNames:f,compiledWithForget:p}=E(l,e),m={children:[],displayName:u,hocDisplayNames:f,id:i,key:c,parentID:a,treeBaseDuration:0,type:e,compiledWithForget:p};r.set(i,m)}break}case 2:{const e=t[o+1];o+=2;for(let s=0;s<e;s++){if(i=t[o],o++,!r.has(i))throw new Error(`Commit tree does not contain fiber "${i}". This is a bug in React DevTools.`);const e=n(i).parentID;if(r.delete(i),r.has(e)){const t=n(e);h&&I("Remove",`fiber ${i} from parent ${e}`),t.children=t.children.filter((e=>e!==i))}}break}case 6:throw Error("Operation REMOVE_ROOT is not supported while profiling.");case 3:{i=t[o+1];const e=t[o+2],r=t.slice(o+3,o+3+e);o=o+3+e,h&&I("Re-order",`fiber ${i} children ${r.join(",")}`),n(i).children=Array.from(r);break}case 7:{i=t[o+1];const e=t[o+1];o+=3,h&&I("Subtree mode",`Subtree with root ${i} set to mode ${e}`);break}case 4:{i=t[o+1];const e=n(i);e.treeBaseDuration=t[o+2]/1e3,h&&I("Update",`fiber ${i} treeBaseDuration to ${e.treeBaseDuration}`),o+=3;break}case 5:{i=t[o+1];const e=t[o+2],r=t[o+3];o+=4,h&&I("Warnings and Errors update",`fiber ${i} has ${e} errors and ${r} warnings`);break}default:throw Error(`Unsupported Bridge operation "${e}"`)}}return{nodes:r,rootID:e.rootID}}const N=e=>{if(h){const{nodes:t,rootID:r}=e;console.group("__printTree()");const n=[r,0];for(;n.length>0;){const e=n.shift(),r=n.shift(),o=t.get(e);if(null==o)throw Error(`Could not find node with id "${e}" in commit tree`);console.log(`${"•".repeat(r)}${o.id}:${o.displayName||""} ${o.key?`key:"${o.key}"`:""} (${o.treeBaseDuration})`),o.children.forEach((e=>{n.push(e,r+1)}))}console.groupEnd()}},B=new Map,R=new Map;function A(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class L{constructor(e){A(this,"_fiberCommits",new Map),A(this,"getCommitTree",(({commitIndex:e,rootID:t})=>function({commitIndex:e,profilerStore:t,rootID:r}){C.has(r)||C.set(r,[]);const n=C.get(r);if(e<n.length)return n[e];const{profilingData:o}=t;if(null===o)throw Error("No profiling data available");const i=o.dataForRoots.get(r);if(null==i)throw Error(`Could not find profiling data for root "${r}"`);const{operations:s}=i;if(s.length<=e)throw Error(`getCommitTree(): Invalid commit "${e}" for root "${r}". There are only "${s.length}" commits.`);let a=null;for(let t=n.length;t<=e;t++)if(0===t){const e=new Map;P(r,0,e,i),null!=s&&t<s.length&&(a=O({nodes:e,rootID:r},s[t]),h&&N(a),n.push(a))}else a=O(n[t-1],s[t]),h&&N(a),n.push(a);return a}({commitIndex:e,profilerStore:this._profilerStore,rootID:t}))),A(this,"getFiberCommits",(({fiberID:e,rootID:t})=>{const r=this._fiberCommits.get(e);if(null!=r)return r;const n=[];return this._profilerStore.getDataForRoot(t).commitData.forEach(((t,r)=>{t.fiberActualDurations.has(e)&&n.push(r)})),this._fiberCommits.set(e,n),n})),A(this,"getFlamegraphChartData",(({commitIndex:e,commitTree:t,rootID:r})=>function({commitIndex:e,commitTree:t,profilerStore:r,rootID:n}){const o=r.getCommitData(n,e),{fiberActualDurations:i,fiberSelfDurations:s}=o,{nodes:a}=t,l=`${n}-${e}`;if(B.has(l))return B.get(l);const h=new Map,c=new Set,d=[];let u=0,f=0;const p=(e,t,r)=>{h.set(e,r);const n=a.get(e);if(null==n)throw Error(`Could not find node with id "${e}" in commit tree`);const{children:o,displayName:l,hocDisplayNames:c,key:m,treeBaseDuration:_,compiledWithForget:g}=n,v=i.get(e)||0,y=s.get(e)||0,w=i.has(e),b=l||"Anonymous",S=null!==m?` key="${m}"`:"";let E="";const D=g?"✨ ":"";null!==c&&c.length>0&&(E=` (${c[0]})`);let k=`${D}${b}${E}${S}`;w&&(k+=` (${T(y)}ms of ${T(v)}ms)`),u=Math.max(u,r),f=Math.max(f,y);const x={actualDuration:v,didRender:w,id:e,label:k,name:b,offset:t-_,selfDuration:y,treeBaseDuration:_};r>d.length?d.push([x]):d[r-1].push(x);for(let e=o.length-1;e>=0;e--){const n=o[e];t-=p(n,t,r+1).treeBaseDuration}return x};let m=0;if(a.size>0){const e=a.get(n);if(null==e)throw Error(`Could not find root node with id "${n}" in commit tree`);for(let t=e.children.length-1;t>=0;t--){const r=e.children[t],n=a.get(r);if(null==n)throw Error(`Could not find node with id "${r}" in commit tree`);m+=n.treeBaseDuration,p(r,m,1)}i.forEach(((e,t)=>{let r=a.get(t);if(null!=r){let e=r.parentID;for(;0!==e&&!c.has(e);)c.add(e),r=a.get(e),e=null!=r?r.parentID:0}}))}const _={baseDuration:m,depth:u,idToDepthMap:h,maxSelfDuration:f,renderPathNodes:c,rows:d};return B.set(l,_),_}({commitIndex:e,commitTree:t,profilerStore:this._profilerStore,rootID:r}))),A(this,"getRankedChartData",(({commitIndex:e,commitTree:t,rootID:r})=>function({commitIndex:e,commitTree:t,profilerStore:r,rootID:n}){const o=r.getCommitData(n,e),{fiberActualDurations:i,fiberSelfDurations:s}=o,{nodes:a}=t,l=`${n}-${e}`;if(R.has(l))return R.get(l);let h=0;const c=[];i.forEach(((e,t)=>{const r=a.get(t);if(null==r)throw Error(`Could not find node with id "${t}" in commit tree`);const{displayName:n,key:o,parentID:i,type:l,compiledWithForget:d}=r;if(0===i)return;const u=s.get(t)||0;h=Math.max(h,u);const f=n||"Anonymous";let p="";6===l?p=" (ForwardRef)":8===l&&(p=" (Memo)");const m=`${d?"✨ ":""}${f}${p}${null!==o?` key="${o}"`:""} (${T(u)}ms)`;c.push({id:t,label:m,name:f,value:u})}));const d={maxValue:h,nodes:c.sort(((e,t)=>t.value-e.value))};return R.set(l,d),d}({commitIndex:e,commitTree:t,profilerStore:this._profilerStore,rootID:r}))),this._profilerStore=e}invalidate(){this._fiberCommits.clear(),C.clear(),B.clear(),R.clear()}}const M=!1;let $=[];const W=!0===M?function(e){$.forEach((t=>{t(e)}))}:function(){},U=!0===M?function(e){return M?($.push(e),function(){$=$.filter((t=>t!==e))}):()=>{}}:function(e){return()=>{}};function F(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class j extends e{constructor(e,t,r){super(),F(this,"_dataBackends",[]),F(this,"_dataFrontend",null),F(this,"_initialRendererIDs",new Set),F(this,"_initialSnapshotsByRootID",new Map),F(this,"_inProgressOperationsByRootID",new Map),F(this,"_isBackendProfiling",!1),F(this,"_isProfilingBasedOnUserInput",!1),F(this,"_rendererIDsThatReportedProfilingData",new Set),F(this,"_rendererQueue",new Set),F(this,"_takeProfilingSnapshotRecursive",((e,t)=>{const r=this._store.getElementByID(e);if(null!==r){const n={id:e,children:r.children.slice(0),displayName:r.displayName,hocDisplayNames:r.hocDisplayNames,key:r.key,type:r.type,compiledWithForget:r.compiledWithForget};t.set(e,n),r.children.forEach((e=>this._takeProfilingSnapshotRecursive(e,t)))}})),F(this,"onBridgeOperations",(e=>{const t=e[0],r=e[1];if(this._isBackendProfiling){let n=this._inProgressOperationsByRootID.get(r);null==n?(n=[e],this._inProgressOperationsByRootID.set(r,n)):n.push(e),this._initialRendererIDs.has(t)||this._initialRendererIDs.add(t),this._initialSnapshotsByRootID.has(r)||this._initialSnapshotsByRootID.set(r,new Map),this._rendererIDsThatReportedProfilingData.add(t)}})),F(this,"onBridgeProfilingData",(e=>{if(this._isBackendProfiling)return;const{rendererID:t}=e;if(!this._rendererQueue.has(t))throw Error(`Unexpected profiling data update from renderer "${t}"`);this._dataBackends.push(e),this._rendererQueue.delete(t),0===this._rendererQueue.size&&(this._dataFrontend=function(e,t,r){const n=new Map,o=[];return e.forEach((e=>{const{timelineData:i}=e;if(null!=i){const{batchUIDToMeasuresKeyValueArray:e,internalModuleSourceToRanges:t,laneToLabelKeyValueArray:r,laneToReactMeasureKeyValueArray:n,...s}=i;o.push({...s,batchUIDToMeasuresMap:new Map(e),internalModuleSourceToRanges:new Map(t),laneToLabelMap:new Map(r),laneToReactMeasureMap:new Map(n)})}e.dataForRoots.forEach((({commitData:e,displayName:o,initialTreeBaseDurations:i,rootID:s})=>{const a=t.get(s);if(null==a)throw Error(`Could not find profiling operations for root "${s}"`);const l=r.get(s);if(null==l)throw Error(`Could not find profiling snapshots for root "${s}"`);const h=e.map(((e,t)=>({changeDescriptions:null!=e.changeDescriptions?new Map(e.changeDescriptions):null,duration:e.duration,effectDuration:e.effectDuration,fiberActualDurations:new Map(e.fiberActualDurations),fiberSelfDurations:new Map(e.fiberSelfDurations),passiveEffectDuration:e.passiveEffectDuration,priorityLevel:e.priorityLevel,timestamp:e.timestamp,updaters:null!==e.updaters?e.updaters.map(k):null})));n.set(s,{commitData:h,displayName:o,initialTreeBaseDurations:new Map(i),operations:a,rootID:s,snapshots:l})}))})),{dataForRoots:n,imported:!1,timelineData:o}}(this._dataBackends,this._inProgressOperationsByRootID,this._initialSnapshotsByRootID),this._dataBackends.splice(0),this.emit("isProcessingData"))})),F(this,"onBridgeShutdown",(()=>{this._bridge.removeListener("operations",this.onBridgeOperations),this._bridge.removeListener("profilingData",this.onBridgeProfilingData),this._bridge.removeListener("profilingStatus",this.onProfilingStatus),this._bridge.removeListener("shutdown",this.onBridgeShutdown)})),F(this,"onProfilingStatus",(e=>{if(this._isBackendProfiling!==e){if(e){this._dataBackends.splice(0),this._dataFrontend=null,this._initialRendererIDs.clear(),this._initialSnapshotsByRootID.clear(),this._inProgressOperationsByRootID.clear(),this._rendererIDsThatReportedProfilingData.clear(),this._rendererQueue.clear();for(const e of this._store.rootIDToRendererID.values())this._initialRendererIDs.has(e)||this._initialRendererIDs.add(e);this._store.roots.forEach((e=>{const t=new Map;this._initialSnapshotsByRootID.set(e,t),this._takeProfilingSnapshotRecursive(e,t)}))}this._isBackendProfiling=e,this._isProfilingBasedOnUserInput!==e&&(W({event_name:"error",error_message:`Unexpected profiling status. Expected ${this._isProfilingBasedOnUserInput.toString()}, but received ${e.toString()}.`,error_stack:(new Error).stack,error_component_stack:null}),this._isProfilingBasedOnUserInput=e),this._cache.invalidate(),e||(this._dataBackends.splice(0),this._rendererQueue.clear(),this._rendererIDsThatReportedProfilingData.forEach((e=>{this._rendererQueue.has(e)||(this._rendererQueue.add(e),this._bridge.send("getProfilingData",{rendererID:e}))})),this.emit("isProcessingData"))}})),this._bridge=e,this._isBackendProfiling=r,this._isProfilingBasedOnUserInput=r,this._store=t,e.addListener("operations",this.onBridgeOperations),e.addListener("profilingData",this.onBridgeProfilingData),e.addListener("profilingStatus",this.onProfilingStatus),e.addListener("shutdown",this.onBridgeShutdown),e.send("getProfilingStatus"),this._cache=new L(this)}getCommitData(e,t){if(null!==this._dataFrontend){const r=this._dataFrontend.dataForRoots.get(e);if(null!=r){const e=r.commitData[t];if(null!=e)return e}}throw Error(`Could not find commit data for root "${e}" and commit "${t}"`)}getDataForRoot(e){if(null!==this._dataFrontend){const t=this._dataFrontend.dataForRoots.get(e);if(null!=t)return t}throw Error(`Could not find commit data for root "${e}"`)}get didRecordCommits(){return null!==this._dataFrontend&&this._dataFrontend.dataForRoots.size>0}get isProcessingData(){return this._rendererQueue.size>0||this._dataBackends.length>0}get isProfilingBasedOnUserInput(){return this._isProfilingBasedOnUserInput}get profilingCache(){return this._cache}get profilingData(){return this._dataFrontend}set profilingData(e){this._isBackendProfiling?console.warn("Profiling data cannot be updated while profiling is in progress."):(this._dataBackends.splice(0),this._dataFrontend=e,this._initialRendererIDs.clear(),this._initialSnapshotsByRootID.clear(),this._inProgressOperationsByRootID.clear(),this._cache.invalidate(),this.emit("profilingData"))}clear(){this._dataBackends.splice(0),this._dataFrontend=null,this._initialRendererIDs.clear(),this._initialSnapshotsByRootID.clear(),this._inProgressOperationsByRootID.clear(),this._rendererQueue.clear(),this._cache.invalidate(),this.emit("profilingData")}startProfiling(){this._bridge.send("startProfiling",{recordChangeDescriptions:this._store.recordChangeDescriptions,recordTimeline:this._store.supportsTimeline}),this._isProfilingBasedOnUserInput=!0,this.emit("isProfiling")}stopProfiling(){this._bridge.send("stopProfiling"),this._isProfilingBasedOnUserInput=!1,this.emit("isProfiling")}}class V extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,V),this.name="UnsupportedBridgeOperationError"}}function q(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const G=(e,...t)=>{h&&console.log(`%cStore %c${e}`,"color: green; font-weight: bold;","font-weight: bold;",...t)},H="React::DevTools::collapseNodesByDefault",z="React::DevTools::recordChangeDescriptions";class Q extends e{constructor(e,t){super(),q(this,"_backendVersion",null),q(this,"_cachedComponentWithErrorCount",0),q(this,"_cachedComponentWithWarningCount",0),q(this,"_cachedErrorAndWarningTuples",null),q(this,"_collapseNodesByDefault",!0),q(this,"_errorsAndWarnings",new Map),q(this,"_hasOwnerMetadata",!1),q(this,"_idToElement",new Map),q(this,"_isNativeStyleEditorSupported",!1),q(this,"_nativeStyleEditorValidAttributes",null),q(this,"_onBridgeProtocolTimeoutID",null),q(this,"_ownersMap",new Map),q(this,"_recordChangeDescriptions",!1),q(this,"_revision",0),q(this,"_roots",[]),q(this,"_rootIDToCapabilities",new Map),q(this,"_rootIDToRendererID",new Map),q(this,"_supportsInspectMatchingDOMElement",!1),q(this,"_supportsClickToInspect",!1),q(this,"_supportsTimeline",!1),q(this,"_supportsTraceUpdates",!1),q(this,"_isReloadAndProfileFrontendSupported",!1),q(this,"_isReloadAndProfileBackendSupported",!1),q(this,"_rootSupportsBasicProfiling",!1),q(this,"_rootSupportsTimelineProfiling",!1),q(this,"_bridgeProtocol",null),q(this,"_unsupportedBridgeProtocolDetected",!1),q(this,"_unsupportedRendererVersionDetected",!1),q(this,"_weightAcrossRoots",0),q(this,"_shouldCheckBridgeProtocolCompatibility",!1),q(this,"_hookSettings",null),q(this,"_shouldShowWarningsAndErrors",!1),q(this,"_lastSelectedHostInstanceElementId",null),q(this,"_adjustParentTreeWeight",((e,t)=>{let r=!1;for(;null!=e;){if(e.weight+=t,e.isCollapsed){r=!0;break}e=this._idToElement.get(e.parentID)}r||(this._weightAcrossRoots+=t)})),q(this,"onBridgeNativeStyleEditorSupported",(({isSupported:e,validAttributes:t})=>{this._isNativeStyleEditorSupported=e,this._nativeStyleEditorValidAttributes=t||null,this.emit("supportsNativeStyleEditor")})),q(this,"onBridgeOperations",(e=>{h&&(console.groupCollapsed("onBridgeOperations"),G("onBridgeOperations",e.join(",")));let t=!1,r=!1;const n=e[0],o=[],i=new Map;let s=2;const a=[null],l=e[s];s++;const c=s+l;for(;s<c;){const t=e[s];s++;const r=y(e,s,s+t-1);a.push(r),s+=t}for(;s<e.length;){const l=e[s];switch(l){case 1:{const r=e[s+1],i=e[s+2];if(s+=3,this._idToElement.has(r)&&this._throwAndEmitError(Error(`Cannot add node "${r}" because a node with that id is already in the Store.`)),11===i){h&&G("Add",`new root node ${r}`);const o=e[s]>0;s++;const a=!!(1&e[s]),l=!!(2&e[s]);s++;let c=!1,d=!1;(null===this._bridgeProtocol||this._bridgeProtocol.version>=2)&&(c=e[s]>0,s++,d=e[s]>0,s++),this._roots=this._roots.concat(r),this._rootIDToRendererID.set(r,n),this._rootIDToCapabilities.set(r,{supportsBasicProfiling:a,hasOwnerMetadata:d,supportsStrictMode:c,supportsTimeline:l});const u=!o&&c;this._idToElement.set(r,{children:[],depth:-1,displayName:null,hocDisplayNames:null,id:r,isCollapsed:!1,isStrictModeNonCompliant:u,key:null,ownerID:0,parentID:0,type:i,weight:0,compiledWithForget:!1}),t=!0}else{const t=e[s];s++;const n=e[s];s++;const l=a[e[s]];s++;const c=a[e[s]];s++,h&&G("Add",`node ${r} (${l||"null"}) as child of ${t}`);const d=this._idToElement.get(t);if(void 0===d){this._throwAndEmitError(Error(`Cannot add child "${r}" to parent "${t}" because parent node was not found in the Store.`));break}d.children.push(r);const{formattedDisplayName:u,hocDisplayNames:f,compiledWithForget:p}=E(l,i),m={children:[],depth:d.depth+1,displayName:u,hocDisplayNames:f,id:r,isCollapsed:this._collapseNodesByDefault,isStrictModeNonCompliant:d.isStrictModeNonCompliant,key:c,ownerID:n,parentID:t,type:i,weight:1,compiledWithForget:p};if(this._idToElement.set(r,m),o.push(r),this._adjustParentTreeWeight(d,1),n>0){let e=this._ownersMap.get(n);void 0===e&&(e=new Set,this._ownersMap.set(n,e)),e.add(r)}}break}case 2:{const n=e[s+1];s+=2;for(let o=0;o<n;o++){const n=e[s],o=this._idToElement.get(n);if(void 0===o){this._throwAndEmitError(Error(`Cannot remove node "${n}" because no matching node was found in the Store.`));break}s+=1;const{children:a,ownerID:l,parentID:c,weight:d}=o;a.length>0&&this._throwAndEmitError(Error(`Node "${n}" was removed before its children.`)),this._idToElement.delete(n);let u=null;if(0===c)h&&G("Remove",`node ${n} root`),this._roots=this._roots.filter((e=>e!==n)),this._rootIDToRendererID.delete(n),this._rootIDToCapabilities.delete(n),t=!0;else{if(h&&G("Remove",`node ${n} from parent ${c}`),u=this._idToElement.get(c),void 0===u){this._throwAndEmitError(Error(`Cannot remove node "${n}" from parent "${c}" because no matching node was found in the Store.`));break}const e=u.children.indexOf(n);u.children.splice(e,1)}if(this._adjustParentTreeWeight(u,-d),i.set(n,c),this._ownersMap.delete(n),l>0){const e=this._ownersMap.get(l);void 0!==e&&e.delete(n)}this._errorsAndWarnings.has(n)&&(this._errorsAndWarnings.delete(n),r=!0)}break}case 6:{s+=1;const t=e[1];h&&G(`Remove root ${t}`);const r=e=>{const t=this._idToElement.get(e);if(this._idToElement.delete(e),t)for(let e=0;e<t.children.length;e++)r(t.children[e])},n=this._idToElement.get(t);if(void 0===n){this._throwAndEmitError(Error(`Cannot remove root "${t}": no matching node was found in the Store.`));break}r(t),this._rootIDToCapabilities.delete(t),this._rootIDToRendererID.delete(t),this._roots=this._roots.filter((e=>e!==t)),this._weightAcrossRoots-=n.weight;break}case 3:{const t=e[s+1],r=e[s+2];s+=3;const n=this._idToElement.get(t);if(void 0===n){this._throwAndEmitError(Error(`Cannot reorder children for node "${t}" because no matching node was found in the Store.`));break}const o=n.children;o.length!==r&&this._throwAndEmitError(Error("Children cannot be added or removed during a reorder operation."));for(let t=0;t<r;t++){const r=e[s+t];o[t]=r}s+=r,h&&G("Re-order",`Node ${t} children ${o.join(",")}`);break}case 7:{const t=e[s+1],r=e[s+2];s+=3,1===r&&this._recursivelyUpdateSubtree(t,(e=>{e.isStrictModeNonCompliant=!1})),h&&G("Subtree mode",`Subtree with root ${t} set to mode ${r}`);break}case 4:s+=3;break;case 5:const c=e[s+1],d=e[s+2],u=e[s+3];s+=4,d>0||u>0?this._errorsAndWarnings.set(c,{errorCount:d,warningCount:u}):this._errorsAndWarnings.has(c)&&this._errorsAndWarnings.delete(c),r=!0;break;default:this._throwAndEmitError(new V(`Unsupported Bridge operation "${l}"`))}}if(this._revision++,this._cachedErrorAndWarningTuples=null,r){let e=0,t=0;this._errorsAndWarnings.forEach((r=>{r.errorCount>0&&e++,r.warningCount>0&&t++})),this._cachedComponentWithErrorCount=e,this._cachedComponentWithWarningCount=t}if(t){const e=this._rootSupportsBasicProfiling,t=this._rootSupportsTimelineProfiling;this._hasOwnerMetadata=!1,this._rootSupportsBasicProfiling=!1,this._rootSupportsTimelineProfiling=!1,this._rootIDToCapabilities.forEach((({supportsBasicProfiling:e,hasOwnerMetadata:t,supportsTimeline:r})=>{e&&(this._rootSupportsBasicProfiling=!0),t&&(this._hasOwnerMetadata=!0),r&&(this._rootSupportsTimelineProfiling=!0)})),this.emit("roots"),this._rootSupportsBasicProfiling!==e&&this.emit("rootSupportsBasicProfiling"),this._rootSupportsTimelineProfiling!==t&&this.emit("rootSupportsTimelineProfiling")}h&&(console.log(function(e,t=!1,r=null){const n=[];let o=0;function i(e){return null===r?"":r.selectedElementIndex===e?"→":" "}function s(t){const{errorCount:r,warningCount:n}=e.getErrorAndWarningCountForElementID(t.id);return 0===r&&0===n?"":` ${r>0?"✕":""}${n>0?"⚠":""}`}const a=null!==r?r.ownerFlatTree:null;if(null!==a)n.push("[owners]"+(t?` (${a.length})`:"")),a.forEach(((e,t)=>{const r=i(t),o=x(e,!1),a=s(e);n.push(`${r}${o}${a}`)}));else{const r=e._errorsAndWarnings;if(r.size>0){let e=0,t=0;r.forEach((r=>{e+=r.errorCount,t+=r.warningCount})),n.push(`✕ ${e}, ⚠ ${t}`)}if(e.roots.forEach((r=>{const{weight:a}=e.getElementByID(r),l=t?` (${a})`:"";n.push(`[root]${l}`);for(let r=o;r<o+a;r++){const o=e.getElementAtIndex(r);if(null==o)throw Error(`Could not find element at index "${r}"`);const a=i(r),l=x(o,t),h=s(o);n.push(`${a}${l}${h}`)}o+=a})),o!==e.numElements)throw Error(`Inconsistent Store state. Individual root weights ("${o}") do not match total weight ("${e.numElements}")`);e.assertExpectedRootMapSizes()}return n.join("\n")}(this,!0)),console.groupEnd()),this.emit("mutated",[o,i])})),q(this,"onBridgeOverrideComponentFilters",(e=>{this._componentFilters=e,b(e)})),q(this,"onBridgeShutdown",(()=>{h&&G("onBridgeShutdown","unsubscribing from Bridge");const e=this._bridge;e.removeListener("operations",this.onBridgeOperations),e.removeListener("overrideComponentFilters",this.onBridgeOverrideComponentFilters),e.removeListener("shutdown",this.onBridgeShutdown),e.removeListener("isReloadAndProfileSupportedByBackend",this.onBackendReloadAndProfileSupported),e.removeListener("isNativeStyleEditorSupported",this.onBridgeNativeStyleEditorSupported),e.removeListener("unsupportedRendererVersion",this.onBridgeUnsupportedRendererVersion),e.removeListener("backendVersion",this.onBridgeBackendVersion),e.removeListener("bridgeProtocol",this.onBridgeProtocol),e.removeListener("saveToClipboard",this.onSaveToClipboard),e.removeListener("selectElement",this.onHostInstanceSelected),null!==this._onBridgeProtocolTimeoutID&&(clearTimeout(this._onBridgeProtocolTimeoutID),this._onBridgeProtocolTimeoutID=null)})),q(this,"onBackendReloadAndProfileSupported",(e=>{this._isReloadAndProfileBackendSupported=e,this.emit("supportsReloadAndProfile")})),q(this,"onBridgeUnsupportedRendererVersion",(()=>{this._unsupportedRendererVersionDetected=!0,this.emit("unsupportedRendererVersionDetected")})),q(this,"onBridgeBackendVersion",(e=>{this._backendVersion=e,this.emit("backendVersion")})),q(this,"onBridgeProtocol",(e=>{null!==this._onBridgeProtocolTimeoutID&&(clearTimeout(this._onBridgeProtocolTimeoutID),this._onBridgeProtocolTimeoutID=null),this._bridgeProtocol=e,e.version,i.version})),q(this,"onBridgeProtocolTimeout",(()=>{this._onBridgeProtocolTimeoutID=null,this._bridgeProtocol=o[0],this.emit("unsupportedBridgeProtocolDetected")})),q(this,"onSaveToClipboard",(e=>{(0,a.copy)(e)})),q(this,"onBackendInitialized",(()=>{this._shouldCheckBridgeProtocolCompatibility&&(this._onBridgeProtocolTimeoutID=setTimeout(this.onBridgeProtocolTimeout,1e4),this._bridge.addListener("bridgeProtocol",this.onBridgeProtocol),this._bridge.send("getBridgeProtocol")),this._bridge.send("getBackendVersion"),this._bridge.send("getIfHasUnsupportedRendererVersion"),this._bridge.send("getHookSettings")})),q(this,"onHostInstanceSelected",(e=>{this._lastSelectedHostInstanceElementId!==e&&(this._lastSelectedHostInstanceElementId=e,this.emit("hostInstanceSelected",e))})),q(this,"getHookSettings",(()=>{null!=this._hookSettings?this.emit("hookSettings",this._hookSettings):this._bridge.send("getHookSettings")})),q(this,"updateHookSettings",(e=>{this._hookSettings=e,this._bridge.send("updateHookSettings",e),this.emit("settingsUpdated",e)})),q(this,"onHookSettings",(e=>{this._hookSettings=e,this.setShouldShowWarningsAndErrors(e.showInlineWarningsAndErrors),this.emit("hookSettings",e)})),h&&G("constructor","subscribing to Bridge"),this._collapseNodesByDefault="true"===g(H),this._recordChangeDescriptions="true"===g(z),this._componentFilters=w();let r=!1;if(null!=t){r=!0===t.isProfiling;const{supportsInspectMatchingDOMElement:e,supportsClickToInspect:n,supportsReloadAndProfile:o,supportsTimeline:i,supportsTraceUpdates:s,checkBridgeProtocolCompatibility:a}=t;e&&(this._supportsInspectMatchingDOMElement=!0),n&&(this._supportsClickToInspect=!0),o&&(this._isReloadAndProfileFrontendSupported=!0),i&&(this._supportsTimeline=!0),s&&(this._supportsTraceUpdates=!0),a&&(this._shouldCheckBridgeProtocolCompatibility=!0)}this._bridge=e,e.addListener("operations",this.onBridgeOperations),e.addListener("overrideComponentFilters",this.onBridgeOverrideComponentFilters),e.addListener("shutdown",this.onBridgeShutdown),e.addListener("isReloadAndProfileSupportedByBackend",this.onBackendReloadAndProfileSupported),e.addListener("isNativeStyleEditorSupported",this.onBridgeNativeStyleEditorSupported),e.addListener("unsupportedRendererVersion",this.onBridgeUnsupportedRendererVersion),this._profilerStore=new j(e,this,r),e.addListener("backendVersion",this.onBridgeBackendVersion),e.addListener("saveToClipboard",this.onSaveToClipboard),e.addListener("hookSettings",this.onHookSettings),e.addListener("backendInitialized",this.onBackendInitialized),e.addListener("selectElement",this.onHostInstanceSelected)}assertExpectedRootMapSizes(){0===this.roots.length&&(this.assertMapSizeMatchesRootCount(this._idToElement,"_idToElement"),this.assertMapSizeMatchesRootCount(this._ownersMap,"_ownersMap")),this.assertMapSizeMatchesRootCount(this._rootIDToCapabilities,"_rootIDToCapabilities"),this.assertMapSizeMatchesRootCount(this._rootIDToRendererID,"_rootIDToRendererID")}assertMapSizeMatchesRootCount(e,t){const r=this.roots.length;e.size!==r&&this._throwAndEmitError(Error(`Expected ${t} to contain ${r} items, but it contains ${e.size} items\n\n${(0,l.inspect)(e,{depth:20})}`))}get backendVersion(){return this._backendVersion}get collapseNodesByDefault(){return this._collapseNodesByDefault}set collapseNodesByDefault(e){this._collapseNodesByDefault=e,v(H,e?"true":"false"),this.emit("collapseNodesByDefault")}get componentFilters(){return this._componentFilters}set componentFilters(e){this._profilerStore.isProfilingBasedOnUserInput&&this._throwAndEmitError(Error("Cannot modify filter preferences while profiling"));const t=this._componentFilters.filter((e=>e.isEnabled)),r=e.filter((e=>e.isEnabled));let n=t.length!==r.length;if(!n)for(let e=0;e<r.length;e++)if(D(t[e],r[e])){n=!0;break}this._componentFilters=e,b(e),n&&this._bridge.send("updateComponentFilters",e),this.emit("componentFilters")}get bridgeProtocol(){return this._bridgeProtocol}get componentWithErrorCount(){return this._shouldShowWarningsAndErrors?this._cachedComponentWithErrorCount:0}get componentWithWarningCount(){return this._shouldShowWarningsAndErrors?this._cachedComponentWithWarningCount:0}get displayingErrorsAndWarningsEnabled(){return this._shouldShowWarningsAndErrors}get hasOwnerMetadata(){return this._hasOwnerMetadata}get nativeStyleEditorValidAttributes(){return this._nativeStyleEditorValidAttributes}get numElements(){return this._weightAcrossRoots}get profilerStore(){return this._profilerStore}get recordChangeDescriptions(){return this._recordChangeDescriptions}set recordChangeDescriptions(e){this._recordChangeDescriptions=e,v(z,e?"true":"false"),this.emit("recordChangeDescriptions")}get revision(){return this._revision}get rootIDToRendererID(){return this._rootIDToRendererID}get roots(){return this._roots}get rootSupportsBasicProfiling(){return this._rootSupportsBasicProfiling}get rootSupportsTimelineProfiling(){return this._rootSupportsTimelineProfiling}get supportsInspectMatchingDOMElement(){return this._supportsInspectMatchingDOMElement}get supportsClickToInspect(){return this._supportsClickToInspect}get supportsNativeStyleEditor(){return this._isNativeStyleEditorSupported}get supportsReloadAndProfile(){return this._isReloadAndProfileFrontendSupported&&this._isReloadAndProfileBackendSupported}get supportsTimeline(){return this._supportsTimeline}get supportsTraceUpdates(){return this._supportsTraceUpdates}get unsupportedBridgeProtocolDetected(){return this._unsupportedBridgeProtocolDetected}get unsupportedRendererVersionDetected(){return this._unsupportedRendererVersionDetected}get lastSelectedHostInstanceElementId(){return this._lastSelectedHostInstanceElementId}containsElement(e){return this._idToElement.has(e)}getElementAtIndex(e){if(e<0||e>=this.numElements)return console.warn(`Invalid index ${e} specified; store contains ${this.numElements} items.`),null;let t,r=0;for(let n=0;n<this._roots.length;n++){const o=this._roots[n];if(t=this._idToElement.get(o),void 0===t)return this._throwAndEmitError(Error(`Couldn't find root with id "${o}": no matching node was found in the Store.`)),null;if(0!==t.children.length){if(r+t.weight>e)break;r+=t.weight}}if(void 0===t)return null;let n=t,o=r-1;for(;e!==o;){const t=n.children.length;for(let r=0;r<t;r++){const t=n.children[r],i=this._idToElement.get(t);if(void 0===i)return this._throwAndEmitError(Error(`Couldn't child element with id "${t}": no matching node was found in the Store.`)),null;const s=i.isCollapsed?1:i.weight;if(e<=o+s){o++,n=i;break}o+=s}}return n||null}getElementIDAtIndex(e){const t=this.getElementAtIndex(e);return null===t?null:t.id}getElementByID(e){const t=this._idToElement.get(e);return void 0===t?(console.warn(`No element found with id "${e}"`),null):t}getElementsWithErrorsAndWarnings(){if(!this._shouldShowWarningsAndErrors)return[];if(null!==this._cachedErrorAndWarningTuples)return this._cachedErrorAndWarningTuples;const e=[];return this._errorsAndWarnings.forEach(((t,r)=>{const n=this.getIndexOfElementID(r);if(null!==n){let t=0,o=e.length;for(;t<o;){const r=t+o>>1;e[r].index>n?o=r:t=r+1}e.splice(t,0,{id:r,index:n})}})),this._cachedErrorAndWarningTuples=e,e}getErrorAndWarningCountForElementID(e){return this._shouldShowWarningsAndErrors&&this._errorsAndWarnings.get(e)||{errorCount:0,warningCount:0}}getIndexOfElementID(e){const t=this.getElementByID(e);if(null===t||0===t.parentID)return null;let r=e,n=t.parentID,o=0;for(;;){const e=this._idToElement.get(n);if(void 0===e)return null;const{children:t}=e;for(let e=0;e<t.length;e++){const n=t[e];if(n===r)break;const i=this._idToElement.get(n);if(void 0===i)return null;o+=i.isCollapsed?1:i.weight}if(0===e.parentID)break;o++,r=e.id,n=e.parentID}for(let e=0;e<this._roots.length;e++){const t=this._roots[e];if(t===n)break;const r=this._idToElement.get(t);if(void 0===r)return null;o+=r.weight}return o}getOwnersListForElement(e){const t=[],r=this._idToElement.get(e);if(void 0!==r){t.push({...r,depth:0});const n=this._ownersMap.get(e);if(void 0!==n){const r=new Map([[e,0]]);Array.from(n).sort(((e,t)=>(this.getIndexOfElementID(e)||0)-(this.getIndexOfElementID(t)||0))).forEach((o=>{const i=this._idToElement.get(o);if(void 0!==i){let s=i.parentID,a=0;for(;s>0;){if(s===e||n.has(s)){a=r.get(s)+1,r.set(o,a);break}const t=this._idToElement.get(s);if(void 0===t)break;s=t.parentID}0===a&&this._throwAndEmitError(Error("Invalid owners list")),t.push({...i,depth:a})}}))}}return t}getRendererIDForElement(e){let t=this._idToElement.get(e);for(;void 0!==t;){if(0===t.parentID){const e=this._rootIDToRendererID.get(t.id);return null==e?null:e}t=this._idToElement.get(t.parentID)}return null}getRootIDForElement(e){let t=this._idToElement.get(e);for(;void 0!==t;){if(0===t.parentID)return t.id;t=this._idToElement.get(t.parentID)}return null}isInsideCollapsedSubTree(e){let t=this._idToElement.get(e);for(;null!=t;){if(0===t.parentID)return!1;if(t=this._idToElement.get(t.parentID),null!=t&&t.isCollapsed)return!0}return!1}toggleIsCollapsed(e,t){let r=!1;const n=this.getElementByID(e);if(null!==n){if(t){if(11===n.type&&this._throwAndEmitError(Error("Root nodes cannot be collapsed")),!n.isCollapsed){r=!0,n.isCollapsed=!0;const e=1-n.weight;let t=this._idToElement.get(n.parentID);for(;void 0!==t;)t.weight+=e,t=this._idToElement.get(t.parentID)}}else{let e=n;for(;null!=e;){const t=e.isCollapsed?1:e.weight;if(e.isCollapsed){r=!0,e.isCollapsed=!1;const n=(e.isCollapsed?1:e.weight)-t;let o=this._idToElement.get(e.parentID);for(;void 0!==o&&(o.weight+=n,!o.isCollapsed);)o=this._idToElement.get(o.parentID)}e=0!==e.parentID?this.getElementByID(e.parentID):null}}if(r){let e=0;this._roots.forEach((t=>{const{weight:r}=this.getElementByID(t);e+=r})),this._weightAcrossRoots=e,this.emit("mutated",[[],new Map])}}}_recursivelyUpdateSubtree(e,t){const r=this._idToElement.get(e);r&&(t(r),r.children.forEach((e=>this._recursivelyUpdateSubtree(e,t))))}setShouldShowWarningsAndErrors(e){const t=this._shouldShowWarningsAndErrors;this._shouldShowWarningsAndErrors=e,t!==e&&this.emit("mutated",[[],new Map])}_throwAndEmitError(e){throw this.emit("error",e),e}}let Y=null,J=null,K=[];var X=r(430);const Z=require("path"),ee=require("fs");var te=r(268);const re="undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks,ne="undefined"!=typeof performance&&"function"==typeof performance.now;function oe(){return ne?performance.now():Date.now()}for(var ie={},se=0;se<65;se++)ie["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(se)]=se;function ae(e,t,r){4===r?e.push([t[0],t[1],t[2],t[3]]):5===r?e.push([t[0],t[1],t[2],t[3],t[4]]):1===r&&e.push([t[0]])}function le(e){return null!=e.sections?function(e){let t={line:-1,column:0};const r=e.sections.map((e=>{const r=e.offset,n=r.line,o=r.column;if(n<t.line||n===t.line&&o<t.column)throw new Error("Section offsets must be ordered and non-overlapping.");return t=r,{generatedLine:n+1,generatedColumn:o+1,map:e.map,sourceMapConsumer:null}}));return{originalPositionFor:function({columnNumber:e,lineNumber:t}){const n=e-1;let o=null,i=0,s=r.length-1,a=-1;for(;i<=s;){a=Math.floor((s+i)/2),o=r[a];const e=o.generatedLine;if(e===t){const e=o.generatedColumn;if(e===t)break;if(e>n){if(!(s-a>0)){a=s;break}s=a}else{if(!(a-i>0)){a=i;break}i=a}}else if(e>t){if(!(s-a>0)){a=s;break}s=a}else{if(!(a-i>0)){a=i;break}i=a}}if(null==o)throw Error(`Could not find matching section for line:${t} and column:${e}`);return null===o.sourceMapConsumer&&(o.sourceMapConsumer=new le(o.map)),o.sourceMapConsumer.originalPositionFor({columnNumber:e,lineNumber:t})}}}(e):function(e){const t=function(t){oe();c&&function(e){re&&performance.mark(e+"-start")}(t);const r=function(e){for(var t=[],r=[],n=[0,0,0,0,0],o=0,i=0,s=0,a=0;i<e.length;i++){var l=e.charCodeAt(i);if(44===l)ae(r,n,o),o=0;else if(59===l)ae(r,n,o),o=0,t.push(r),r=[],n[0]=0;else{var h=ie[l];if(void 0===h)throw new Error("Invalid character ("+String.fromCharCode(l)+")");var c=32&h;if(a+=(h&=31)<<s,c)s+=5;else{var d=1&a;a>>>=1,d&&(a=0===a?-2147483648:-a),n[o]+=a,o++,a=s=0}}}return ae(r,n,o),t.push(r),t}(e.mappings);return c&&function(e){re&&(performance.mark(e+"-end"),performance.measure(e,e+"-start",e+"-end"),performance.clearMarks(e+"-start"),performance.clearMarks(e+"-end"))}(t),r}("Decoding source map mappings with sourcemap-codec");return{originalPositionFor:function({columnNumber:r,lineNumber:n}){const o=r-1,i=t[n-1];let s=null,a=0,l=i.length-1,h=-1;for(;a<=l;){h=Math.floor((l+a)/2),s=i[h];const e=s[0];if(e===o)break;if(e>o){if(!(l-h>0)){h=l;break}l=h}else{if(!(h-a>0)){h=a;break}a=h}}for(;h>0&&i[h-1][0]===o;)h--;if(null==s)throw Error(`Could not find runtime location for line:${n} and column:${r}`);const c=s[1],d=null!=e.sourcesContent?e.sourcesContent[c]:null,u=e.sources[c]??null,f=s[2]+1;return{column:s[3],line:f,sourceContent:d,sourceURL:u}}}}(e)}const he=new Map;const ce="sourceMappingURL=";var de=r(16);function ue(e){const t=e.pathname.split("/").filter(Boolean);return(0,Z.join)(...t)}function fe(e){try{return{type:"URL",url:e,relativePath:ue(new de.URL(e))}}catch(t){return{type:(0,Z.isAbsolute)(e)?"absolute":"relative",path:e}}}r(873);const pe={DEVTOOLS_SIMPLE:"devtools/simple",DEVTOOLS_SYMBOLICATED:"devtools/symbolicated",TAG:"tag"};async function me(e,t,r,n){const o=await async function(e,t,r,n){const o=`${t}:${r}:${n}`,i=he.get(o);if(null!=i)return i;const s=async function(e,t,r,n){const o=await e(t).catch((()=>null));if(null==o)return null;const i=o.split(/[\r\n]+/);for(let o=i.length-1;o>=0;--o){const a=i[o];if(a){if(!a.startsWith("//#"))break;if(a.includes(ce)){const o=a.indexOf(ce),i=a.slice(o+ce.length,a.length),l=new URL(i,t).toString(),h=await e(l).catch((()=>null));if(null!=h)try{const e=le(JSON.parse(h)),{sourceURL:t,line:o,column:i}=e.originalPositionFor({lineNumber:r,columnNumber:n});if(null===t)return null;try{return new URL(t),{sourceURL:(s=t,s.replace("/./","/")),line:o,column:i}}catch(e){return t.startsWith("/")||t.slice(1).startsWith(":\\\\")?{sourceURL:t,line:o,column:i}:{sourceURL:new URL(t,l).toString(),line:o,column:i}}}catch(e){return null}return null}}}var s;return null}(e,t,r,n);return he.set(o,s),s}((e=>async function(e,t){if(t.has(e)){const r=t.get(e);if(null!=r)return Promise.resolve(r)}return fetch(e).then((e=>e.text())).then((r=>(t.set(e,r),r)))}(e,n)),e,t,r);return o?{origin:pe.DEVTOOLS_SYMBOLICATED,source:fe(o.sourceURL),line:o.line,column:o.column}:{origin:pe.DEVTOOLS_SIMPLE,source:fe(e),line:t,column:r}}function _e(){let e=null,t=null,n=null,o=null,i=null,a=(e,t)=>{u("Status",e,t)},l=()=>{},c=()=>{},d=()=>{};const u=(...e)=>console.log("[cs-devtools]",...e);u.warn=(...e)=>console.warn("[cs-devtools]",...e),u.error=(...e)=>console.error("[cs-devtools]",...e);const f=new Map;function p({code:e,message:t}){console.error(`Error: ${e} ${t}`)}function m(e){const t=[];e.onmessage=e=>{let r;try{if("string"!=typeof e.data)throw Error();r=JSON.parse(e.data),h&&function(e,...t){h&&console.log(`%c[core/standalone] %c${e}`,"color: teal; font-weight: bold;","font-weight: bold;",...t)}("WebSocket.onmessage",r)}catch(t){return void u.error("Failed to parse JSON",e.data)}t.forEach((e=>{try{e(r)}catch(e){throw u.error("Error calling listener",r),e}}))},o=new s({listen:e=>(t.push(e),()=>{const r=t.indexOf(e);r>=0&&t.splice(r,1)}),send(t,r,n){e.readyState===e.OPEN&&e.send(JSON.stringify({event:t,payload:r}))}}),o.addListener("shutdown",(()=>{e.close()})),i=new Q(o,{checkBridgeProtocolCompatibility:!0,supportsTraceUpdates:!0,supportsClickToInspect:!0}),u("Connected"),a("DevTools initialized.","devtools-connected"),function(){if(!o||!i)return void console.log("[cs-devtools] no bridge or store");const e=o,t=i,r=new Map;e.addListener("selectElement",(r=>{const n=t.getRendererIDForElement(r);if(null===n)return void console.log("[cs-devtools] no renderer id");const o={id:r,rendererID:n,requestID:(0,te.v4)(),path:null,forceFullData:!0};e.send("inspectElement",o)})),e.addListener("taggedData",(e=>{const{id:t,data:n}=e;r.set(t,n)})),e.addListener("startInspectingHost",(()=>{d(!0),r.clear()})),e.addListener("stopInspectingHost",(()=>{d(!1)})),e.addListener("inspectedElement",(async e=>{const t=r.get(e.id);!async function(e,t,r,n){if("error"===r.type)throw new Error("No data returned from inspection");if("full-data"===r.type)if(n)e({...r,value:{...r.value,parsedSource:{origin:pe.TAG,componentName:n.componentName,line:n.line,column:0,source:{type:"relative",path:n.path}}}});else if(null!==r.value.source){const{sourceURL:n,line:o,column:i}=r.value.source;e({...r,value:{...r.value,parsedSource:await me(n,o,i,t)}})}else e({...r,value:{...r.value,parsedSource:void 0}})}(c,f,e,t)}))}()}function _(){if(e){try{e.close()}catch(e){u.error("Failed to close connected socket:",e)}e=null}if(n){try{n.close()}catch(e){u.error("Failed to close WebSocket server:",e)}n=null}if(t){try{t.close()}catch(e){u.error("Failed to close HTTP server:",e)}t.removeAllListeners(),t=null}return o&&(o.emit("shutdown"),o=null),i&&(i=null),g.currentPort=null,a("Server stopped.","server-closed"),g}const g={currentPort:null,setStatusListener:function(e){return a=e,g},setDisconnectedCallback:function(e){return l=e,g},startServer:function o(i=8097,s="localhost",h,c,d=0){!function(e,t){async function r(r){if(M)if(null!=Y&&null!=J){const{metadata:n,...o}=r,i=null!=t?await t():{};Y?.contentWindow?.postMessage({source:"react-devtools-logging",event:o,context:{...i,metadata:null!=n?JSON.stringify(n):"",session_id:J,surface:e,version:"6.0.1-f736a28fc"}},"*")}else K.push(r)}if(M){const e="null",t=document.body;if("string"==typeof e&&e.length>0&&null!=t&&null==Y){U(r),J=window.crypto.randomUUID();const n=document.createElement("iframe");n.onload=()=>function(e){Y=e,K.length>0&&(K.forEach((e=>r(e))),K=[])}(n),n.src=e,t.appendChild(n)}}}(c?.surface??"standalone");const f=!!h;function v(e){"EADDRINUSE"===e.code?d<10?(u.warn(`Port ${i} in use, trying port ${i+1}...`),_(),o(i+1,s,h,c,d+1)):(p(e),a("Failed to start the server after 10 attempts.","error")):(p(e),console.log("server error",e),a("Failed to start the server.","error"))}return t=f?r(692).createServer(h):r(611).createServer(),n=new X.Server({server:t,maxPayload:1e9}),n.on("connection",(t=>{null!==e&&(e.close(),u.warn("Only one connection allowed at a time.","Closing the previous connection")),e=t,t.onerror=e=>{t.close(),u.error("Error with websocket connection",e)},t.onclose=()=>{e=null,l(),u("Connection to RN closed")},m(t)})),n.on("error",v),t.on("error",v),t.on("request",((e,t)=>{const r=(0,Z.join)(__dirname,"devtools","react","dist","backend.js"),n=(0,ee.readFileSync)(r),o=`\n      window.__REACT_DEVTOOLS_COMPONENT_FILTERS__ = ${JSON.stringify(w())};`;t.end(o+"\n;"+n.toString()+"\n;ReactDevToolsBackend.initialize();\n"+`ReactDevToolsBackend.connectToDevTools({port: ${i}, host: '${s}', useHttps: ${f?"true":"false"}});\n        `)})),t.listen(i,(()=>{g.currentPort=i,a("The server is listening on the port "+i+".","server-connected")})),g},stopServer:_,setDataCallback:function(e){return c=e,g},setInspectionCallback:function(e){return d=e,g},startInspectingHost:function(){return o?(o.send("startInspectingHost"),g):(console.log("[cs-devtools] no bridge"),g)},stopInspectingHost:function(){return o?(o.send("stopInspectingHost",!1),g):(console.log("[cs-devtools] no bridge"),g)},inspectingClearOverlays:function(){return o?(o.send("inspectingClearOverlays"),g):(console.log("[cs-devtools] no bridge"),g)}};return g}})(),module.exports=n})();
//# sourceMappingURL=standalone.js.map